<!DOCTYPE html><html lang=en-GB-x-hixie class=big><title>HTML Standard</title><script>
   var loadTimer = new Date();
   var current_revision = "r" + "$Revision: 8642 $".substr(11);
   current_revision = current_revision.substr(0, current_revision.length - 2);
   var last_known_revision = current_revision;
   function F( /* varargs... */) {
     var fragment = document.createDocumentFragment();
     for (var index = 0; index < arguments.length; index += 1) {
       if (arguments[index] instanceof Array) {
         fragment.appendChild(F.apply(this, arguments[index]));
       } else if (typeof arguments[index] == 'string') {
         fragment.appendChild(document.createTextNode(arguments[index]));
       } else {
         fragment.appendChild(arguments[index]);
       }
     }
     return fragment;
   }
   function E(name, /* optional */ attributes /*, varargs... */) {
     var element = document.createElement(name);
     var index = 1;
     if ((arguments.length > 1) && (typeof attributes != 'string') &&
         (!(attributes instanceof Node)) && (!(attributes instanceof Array))) {
       for (var attName in attributes) {
         if (typeof attributes[attName] == 'boolean') {
           if (attributes[attName])
             element.setAttribute(attName, '');
         } else if (typeof attributes[attName] == 'function') {
           element[attName] = attributes[attName];
         } else {
           element.setAttribute(attName, attributes[attName]);
         }
       }
       index = 2;
     }
     for (; index < arguments.length; index += 1) {
       if (arguments[index] instanceof Array) {
         element.appendChild(F.apply(this, arguments[index]));
       } else if (typeof arguments[index] == 'string') {
         element.appendChild(document.createTextNode(arguments[index]));
       } else {
         element.appendChild(arguments[index]);
       }
     }
     return element;
   }
   function getCookie(name) {
     var params = location.search.substr(1).split("&");
     for (var index = 0; index < params.length; index++) {
       if (params[index] == name)
         return "1";
       var data = params[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     var cookies = document.cookie.split("; ");
     for (var index = 0; index < cookies.length; index++) {
       var data = cookies[index].split("=");
       if (data[0] == name)
         return unescape(data[1]);
     }
     return null;
   }
   var currentAlert;
   var currentAlertTimeout;
   function showAlert(s, href) {
     if (!currentAlert) {
       currentAlert = document.createElement('div');
       currentAlert.id = 'alert';
       var x = document.createElement('button');
       x.textContent = '\u2573';
       x.onclick = closeAlert2;
       currentAlert.appendChild(x);
       currentAlert.appendChild(document.createElement('span'));
       currentAlert.onmousemove = function () {
         clearTimeout(currentAlertTimeout);
         currentAlert.className = '';
         currentAlertTimeout = setTimeout(closeAlert, 10000);
       }
       document.body.appendChild(currentAlert);
     } else {
       clearTimeout(currentAlertTimeout);
       currentAlert.className = '';
     }
     currentAlert.lastChild.textContent = '';
     currentAlert.lastChild.appendChild(F(s));
     if (href) {
       var link = document.createElement('a');
       link.href = href;
       link.textContent = href;
       currentAlert.lastChild.appendChild(F(' ', link));
     }
     currentAlertTimeout = setTimeout(closeAlert, 10000);
   }
   function closeAlert() {
     clearTimeout(currentAlertTimeout);
     if (currentAlert) {
       currentAlert.className = 'closed';
       currentAlertTimeout = setTimeout(closeAlert2, 3000);
     }
   }
   function closeAlert2() {
     clearTimeout(currentAlertTimeout);
     if (currentAlert) {
       currentAlert.parentNode.removeChild(currentAlert);
       currentAlert = null;
     }
   }
   window.addEventListener('keydown', function (event) {
     if (event.keyCode == 27) {
       if (currentAlert)
         closeAlert2();
     } else {
       closeAlert();
     }
   }, false);
   window.addEventListener('scroll', function (event) {
     closeAlert();
   }, false);
   function load(script) {
     var e = document.createElement('script');
     e.setAttribute('src', '//www.whatwg.org/specs/web-apps/current-work/' + script);
     document.body.appendChild(e);
   }
  </script><link rel=stylesheet href=//www.whatwg.org/style/specification><link rel=icon href=//www.whatwg.org/images/icon><style>
   .proposal { border: blue solid; padding: 1em; }
   .bad, .bad *:not(.XXX) { color: gray; border-color: gray; background: transparent; }
   #updatesStatus { display: none; z-index: 10; }
   #updatesStatus.relevant { display: block; position: fixed; right: 1em; top: 1em; padding: 0.5em; font: bold small sans-serif; min-width: 25em; width: 30%; max-width: 40em; height: auto; border: ridge 4px gray; background: #EEEEEE; color: black; }
   div.head .logo { width: 11em; margin-bottom: 20em; }
   #configUI { position: absolute; z-index: 20; top: auto; right: 0; width: 11em; padding: 0 0.5em 0 0.5em; font-size: small; background: gray; background: rgba(32,32,32,0.9); color: white; border-radius: 1em 0 0 1em; -moz-border-radius: 1em 0 0 1em; }
   #configUI p { margin: 0.75em 0; padding: 0.3em; }
   #configUI p label { display: block; }
   #configUI #updateUI, #configUI .loginUI { text-align: center; }
   #configUI input[type=button] { display: block; margin: auto; }
   #configUI :link, #configUI :visited { color: white; }
   #configUI :link:hover, #configUI :visited:hover { background: transparent; }
   #alert { position: fixed; top: 20%; left: 20%; right: 20%; font-size: 2em; padding: 0.5em; z-index: 40; background: gray; background: rgba(32,32,32,0.9); color: white; border-radius: 1em; -moz-border-radius: 1em; -webkit-transition: opacity 1s linear; }
   #alert.closed { opacity: 0; }
   #alert button { position: absolute; top: -1em; right: 2em; border-radius: 1em 1em 0 0; border: none; line-height: 0.9; color: white; background: rgb(64,64,64); font-size: 0.6em; font-weight: 900; cursor: pointer; }
   #alert :link, #alert :visited { color: white; }
   #alert :link:hover, #alert :visited:hover { background: transparent; }
   @media print { #configUI { display: none; } }
   .rfc2119 { font-variant: small-caps; text-shadow: 0 0 0.5em yellow; position: static; }
   .rfc2119::after { position: absolute; left: 0; width: 25px; text-align: center; color: yellow; text-shadow: 0.075em 0.075em 0.2em black; }
   .rfc2119.m\ust::after { content: '\2605'; }
   .rfc2119.s\hould::after { content: '\2606'; }
   [hidden] { display: none; }
  </style><style type=text/css>

   .fingerprint { float: right; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }
   .applies .yes { background: yellow; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   #base64-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 6em;
     column-count: 5;
     column-gap: 1em;
     -moz-column-width: 6em;
     -moz-column-count: 5;
     -moz-column-gap: 1em;
     -webkit-column-width: 6em;
     -webkit-column-count: 5;
     -webkit-column-gap: 1em;
   }
   #base64-table thead { display: none; }
   #base64-table * { border: none; }
   #base64-table tbody td:first-child:after { content: ':'; }
   #base64-table tbody td:last-child { text-align: right; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   @font-face {
     font-family: 'Essays1743';
     src: url('//www.whatwg.org/specs/web-apps/current-work/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('//www.whatwg.org/specs/web-apps/current-work/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('//www.whatwg.org/specs/web-apps/current-work/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('//www.whatwg.org/specs/web-apps/current-work/fonts/Essays1743-BoldItalic.ttf');
   }

  </style><link rel=stylesheet href=data:text/css, title=Normal><link rel="stylesheet alternate" href=data:text/css,.impl%20{%20background:%20pink;%20} title="Highlight implementation-only prose"><link rel=stylesheet href=status.css><script>
   var startedInit = 0;
   function init() {
     startedInit = 1;
     if (location.search == '?slow-browser')
       return;
     load('reviewer.js');
     if (document.documentElement.className == "big" || document.documentElement.className == "big split index")
       load('toc.js');
     load('updater.js');
     load('dfn.js');
     load('status.js');
     if (getCookie('profile') == '1')
       document.getElementsByTagName('h2')[0].textContent += '; load: ' + (new Date() - loadTimer) + 'ms';
   }
   if (document.documentElement.className == "")
     setTimeout(function () {
       if (!startedInit)
         showAlert("Too slow? Try reading the multipage copy of the spec instead:", "http://whatwg.org/html");
     }, 6000);

   window.addEventListener('keypress', function (event) {
     if ((event.which == 114) && (event.metaKey)) {
       if (!confirm('Are you sure you want to reload this page?'))
         event.preventDefault();
     }
   }, false);

  </script><body onload=init()>
  <header class="head with-buttons" id=head><p><a href=//www.whatwg.org/ class=logo><img width=101 src=/images/logo alt=WHATWG height=101></a></p>
   <hgroup><h1 class=allcaps>HTML</h1>
    <h2 class="no-num no-toc">Living Standard &mdash; Last Updated 18 May 2014</h2>
   </hgroup><div>
    <div>
     <a href=//whatwg.org/html><span><strong>Multipage Version</strong> <code>whatwg.org/html</code></span></a>
     <a href=//whatwg.org/c><span><strong>One-Page Version</strong> <code>whatwg.org/c</code></span></a>
     <a href=//whatwg.org/pdf><span><strong>PDF Version</strong> <code>whatwg.org/pdf</code></span></a>
     <a href=http://developers.whatwg.org/><span><strong>Developer Version</strong> <code>developers.whatwg.org</code></span></a>
    </div>
    <div>
     <a href=//whatwg.org/faq class=misc><span><strong>FAQ</strong> <code>whatwg.org/faq</code></span></a>
     <a href=http://validator.whatwg.org/ class=misc><span><strong>Validators</strong> <code>validator.whatwg.org</code></span></a>
    </div>
    <div>
     <a href=//www.whatwg.org/mailing-list class=comms><span><strong>Join our Mailing List</strong> <code>whatwg@whatwg.org</code></span></a>
     <a href=http://wiki.whatwg.org/wiki/IRC class=comms><span><strong>Join us on IRC</strong> <code>#whatwg on Freenode</code></span></a>
     <a href=http://forums.whatwg.org/ class=comms><span><strong>Join our Forums</strong> <code>forums.whatwg.org</code></span></a>
    </div>
    <div>
     <!--<a class="changes" href="http://svn.whatwg.org/webapps"><span><strong>SVN Repository</strong> <code>svn.whatwg.org/webapps</code></span></a>-->
     <a href=http://html5.org/tools/web-apps-tracker class=changes><span><strong>Change Log</strong> <code>html5.org's tracker</code></span></a>
     <a href=http://twitter.com/WHATWG class=changes><span><strong>Twitter Updates</strong> <code>@WHATWG</code></span></a>
    </div>
    <div>
     <a href="https://www.w3.org/Bugs/Public/buglist.cgi?bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;component=HTML&amp;product=WHATWG" class=feedback><span><strong>View Open Bugs</strong> <code>filed in Bugzilla</code></span></a>
     <a href=//www.whatwg.org/newbug class=feedback><span><strong>File a Bug</strong> <code>whatwg.org/newbug</code></span></a>
     <a href=http://ian.hixie.ch/+ class=feedback><span><strong>E-mail the Editor</strong> <code>ian@hixie.ch</code></span></a>
    </div>
   </div>
  </header><hr><div id=configUI></div>

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  
<!--begin-toc-->
<ol class=toc>
 <li><a href=#introduction><span class=secno>1 </span>Introduction</a>
  <ol>
   <li><a href=#abstract><span class=secno>1.1 </span>Where does this specification fit?</a></li>
   <li><a href=#is-this-html5?><span class=secno>1.2 </span>Is this HTML5?</a></li>
   <li><a href=#background><span class=secno>1.3 </span>Background</a></li>
   <li><a href=#audience><span class=secno>1.4 </span>Audience</a></li>
   <li><a href=#scope><span class=secno>1.5 </span>Scope</a></li>
   <li><a href=#history-1><span class=secno>1.6 </span>History</a></li>
   <li><a href=#design-notes><span class=secno>1.7 </span>Design notes</a>
    <ol>
     <li><a href=#serializability-of-script-execution><span class=secno>1.7.1 </span>Serializability of script execution</a></li>
     <li><a href=#compliance-with-other-specifications><span class=secno>1.7.2 </span>Compliance with other specifications</a></li>
     <li><a href=#extensibility><span class=secno>1.7.3 </span>Extensibility</a></ol></li>
   <li><a href=#html-vs-xhtml><span class=secno>1.8 </span>HTML vs XHTML</a></li>
   <li><a href=#structure-of-this-specification><span class=secno>1.9 </span>Structure of this specification</a>
    <ol>
     <li><a href=#how-to-read-this-specification><span class=secno>1.9.1 </span>How to read this specification</a></li>
     <li><a href=#typographic-conventions><span class=secno>1.9.2 </span>Typographic conventions</a></ol></li>
   <li><a href=#fingerprint><span class=secno>1.10 </span>Privacy concerns</a></li>
   <li><a href=#a-quick-introduction-to-html><span class=secno>1.11 </span>A quick introduction to HTML</a>
    <ol>
     <li><a href=#writing-secure-applications-with-html><span class=secno>1.11.1 </span>Writing secure applications with HTML</a></li>
     <li><a href=#common-pitfalls-to-avoid-when-using-the-scripting-apis><span class=secno>1.11.2 </span>Common pitfalls to avoid when using the scripting APIs</a></li>
     <li><a href=#how-to-catch-mistakes-when-writing-html:-validators-and-conformance-checkers><span class=secno>1.11.3 </span>How to catch mistakes when writing HTML: validators and conformance checkers</a></ol></li>
   <li><a href=#conformance-requirements-for-authors><span class=secno>1.12 </span>Conformance requirements for authors</a>
    <ol>
     <li><a href=#presentational-markup><span class=secno>1.12.1 </span>Presentational markup</a></li>
     <li><a href=#syntax-errors><span class=secno>1.12.2 </span>Syntax errors</a></li>
     <li><a href=#restrictions-on-content-models-and-on-attribute-values><span class=secno>1.12.3 </span>Restrictions on content models and on attribute values</a></ol></li>
   <li><a href=#suggested-reading><span class=secno>1.13 </span>Suggested reading</a></ol></li>
 <li><a href=#infrastructure><span class=secno>2 </span>Common infrastructure</a>
  <ol>
   <li><a href=#terminology><span class=secno>2.1 </span>Terminology</a>
    <ol>
     <li><a href=#resources><span class=secno>2.1.1 </span>Resources</a></li>
     <li><a href=#xml><span class=secno>2.1.2 </span>XML</a></li>
     <li><a href=#dom-trees><span class=secno>2.1.3 </span>DOM trees</a></li>
     <li><a href=#scripting-0><span class=secno>2.1.4 </span>Scripting</a></li>
     <li><a href=#plugins><span class=secno>2.1.5 </span>Plugins</a></li>
     <li><a href=#encoding-terminology><span class=secno>2.1.6 </span>Character encodings</a></ol></li>
   <li><a href=#conformance-requirements><span class=secno>2.2 </span>Conformance requirements</a>
    <ol>
     <li><a href=#conformance-classes><span class=secno>2.2.1 </span>Conformance classes</a></li>
     <li><a href=#dependencies><span class=secno>2.2.2 </span>Dependencies</a></li>
     <li><a href=#extensibility-0><span class=secno>2.2.3 </span>Extensibility</a></li>
     <li><a href=#interactions-with-xpath-and-xslt><span class=secno>2.2.4 </span>Interactions with XPath and XSLT</a></ol></li>
   <li><a href=#case-sensitivity-and-string-comparison><span class=secno>2.3 </span>Case-sensitivity and string comparison</a></li>
   <li><a href=#common-microsyntaxes><span class=secno>2.4 </span>Common microsyntaxes</a>
    <ol>
     <li><a href=#common-parser-idioms><span class=secno>2.4.1 </span>Common parser idioms</a></li>
     <li><a href=#boolean-attributes><span class=secno>2.4.2 </span>Boolean attributes</a></li>
     <li><a href=#keywords-and-enumerated-attributes><span class=secno>2.4.3 </span>Keywords and enumerated attributes</a></li>
     <li><a href=#numbers><span class=secno>2.4.4 </span>Numbers</a>
      <ol>
       <li><a href=#signed-integers><span class=secno>2.4.4.1 </span>Signed integers</a></li>
       <li><a href=#non-negative-integers><span class=secno>2.4.4.2 </span>Non-negative integers</a></li>
       <li><a href=#floating-point-numbers><span class=secno>2.4.4.3 </span>Floating-point numbers</a></li>
       <li><a href=#percentages-and-dimensions><span class=secno>2.4.4.4 </span>Percentages and lengths</a></li>
       <li><a href=#lists-of-integers><span class=secno>2.4.4.5 </span>Lists of integers</a></li>
       <li><a href=#lists-of-dimensions><span class=secno>2.4.4.6 </span>Lists of dimensions</a></ol></li>
     <li><a href=#dates-and-times><span class=secno>2.4.5 </span>Dates and times</a>
      <ol>
       <li><a href=#months><span class=secno>2.4.5.1 </span>Months</a></li>
       <li><a href=#dates><span class=secno>2.4.5.2 </span>Dates</a></li>
       <li><a href=#yearless-dates><span class=secno>2.4.5.3 </span>Yearless dates</a></li>
       <li><a href=#times><span class=secno>2.4.5.4 </span>Times</a></li>
       <li><a href=#local-dates-and-times><span class=secno>2.4.5.5 </span>Local dates and times</a></li>
       <li><a href=#time-zones><span class=secno>2.4.5.6 </span>Time zones</a></li>
       <li><a href=#global-dates-and-times><span class=secno>2.4.5.7 </span>Global dates and times</a></li>
       <li><a href=#weeks><span class=secno>2.4.5.8 </span>Weeks</a></li>
       <li><a href=#durations><span class=secno>2.4.5.9 </span>Durations</a></li>
       <li><a href=#vaguer-moments-in-time><span class=secno>2.4.5.10 </span>Vaguer moments in time</a></ol></li>
     <li><a href=#colors><span class=secno>2.4.6 </span>Colors</a></li>
     <li><a href=#space-separated-tokens><span class=secno>2.4.7 </span>Space-separated tokens</a></li>
     <li><a href=#comma-separated-tokens><span class=secno>2.4.8 </span>Comma-separated tokens</a></li>
     <li><a href=#syntax-references><span class=secno>2.4.9 </span>References</a></li>
     <li><a href=#mq><span class=secno>2.4.10 </span>Media queries</a></ol></li>
   <li><a href=#urls><span class=secno>2.5 </span>URLs</a>
    <ol>
     <li><a href=#terminology-0><span class=secno>2.5.1 </span>Terminology</a></li>
     <li><a href=#resolving-urls><span class=secno>2.5.2 </span>Resolving URLs</a></li>
     <li><a href=#dynamic-changes-to-base-urls><span class=secno>2.5.3 </span>Dynamic changes to base URLs</a></ol></li>
   <li><a href=#fetching-resources><span class=secno>2.6 </span>Fetching resources</a>
    <ol>
     <li><a href=#terminology-1><span class=secno>2.6.1 </span>Terminology</a></li>
     <li><a href=#processing-model><span class=secno>2.6.2 </span>Processing model</a></li>
     <li><a href=#encrypted-http-and-related-security-concerns><span class=secno>2.6.3 </span>Encrypted HTTP and related security concerns</a></li>
     <li><a href=#content-type-sniffing><span class=secno>2.6.4 </span>Determining the type of a resource</a></li>
     <li><a href=#extracting-character-encodings-from-meta-elements><span class=secno>2.6.5 </span>Extracting character encodings from <code>meta</code> elements</a></li>
     <li><a href=#cors-settings-attributes><span class=secno>2.6.6 </span>CORS settings attributes</a></li>
     <li><a href=#cors-enabled-fetch><span class=secno>2.6.7 </span>CORS-enabled fetch</a></ol></li>
   <li><a href=#common-dom-interfaces><span class=secno>2.7 </span>Common DOM interfaces</a>
    <ol>
     <li><a href=#reflecting-content-attributes-in-idl-attributes><span class=secno>2.7.1 </span>Reflecting content attributes in IDL attributes</a></li>
     <li><a href=#collections-0><span class=secno>2.7.2 </span>Collections</a>
      <ol>
       <li><a href=#htmlallcollection-0><span class=secno>2.7.2.1 </span>HTMLAllCollection</a></li>
       <li><a href=#htmlformcontrolscollection-0><span class=secno>2.7.2.2 </span>HTMLFormControlsCollection</a></li>
       <li><a href=#htmloptionscollection-0><span class=secno>2.7.2.3 </span>HTMLOptionsCollection</a></li>
       <li><a href=#htmlpropertiescollection-0><span class=secno>2.7.2.4 </span>HTMLPropertiesCollection</a></ol></li>
     <li><a href=#domstringmap-0><span class=secno>2.7.3 </span>DOMStringMap</a></li>
     <li><a href=#domelementmap-0><span class=secno>2.7.4 </span>DOMElementMap</a></li>
     <li><a href=#transferable-objects><span class=secno>2.7.5 </span>Transferable objects</a></li>
     <li><a href=#safe-passing-of-structured-data><span class=secno>2.7.6 </span>Safe passing of structured data</a></li>
     <li><a href=#callbacks><span class=secno>2.7.7 </span>Callbacks</a></li>
     <li><a href=#garbage-collection><span class=secno>2.7.8 </span>Garbage collection</a></ol></li>
   <li><a href=#namespaces><span class=secno>2.8 </span>Namespaces</a></ol></li>
 <li><a href=#dom><span class=secno>3 </span>Semantics, structure, and APIs of HTML documents</a>
  <ol>
   <li><a href=#documents><span class=secno>3.1 </span>Documents</a>
    <ol>
     <li><a href=#the-document-object><span class=secno>3.1.1 </span>The <code>Document</code> object</a></li>
     <li><a href=#resource-metadata-management><span class=secno>3.1.2 </span>Resource metadata management</a></li>
     <li><a href=#dom-tree-accessors><span class=secno>3.1.3 </span>DOM tree accessors</a></li>
     <li><a href=#loading-xml-documents><span class=secno>3.1.4 </span>Loading XML documents</a></ol></li>
   <li><a href=#elements><span class=secno>3.2 </span>Elements</a>
    <ol>
     <li><a href=#semantics-0><span class=secno>3.2.1 </span>Semantics</a></li>
     <li><a href=#elements-in-the-dom><span class=secno>3.2.2 </span>Elements in the DOM</a></li>
     <li><a href=#element-definitions><span class=secno>3.2.3 </span>Element definitions</a>
      <ol>
       <li><a href=#attributes><span class=secno>3.2.3.1 </span>Attributes</a></ol></li>
     <li><a href=#content-models><span class=secno>3.2.4 </span>Content models</a>
      <ol>
       <li><a href=#kinds-of-content><span class=secno>3.2.4.1 </span>Kinds of content</a>
        <ol>
         <li><a href=#metadata-content-0><span class=secno>3.2.4.1.1 </span>Metadata content</a></li>
         <li><a href=#flow-content-0><span class=secno>3.2.4.1.2 </span>Flow content</a></li>
         <li><a href=#sectioning-content-0><span class=secno>3.2.4.1.3 </span>Sectioning content</a></li>
         <li><a href=#heading-content-0><span class=secno>3.2.4.1.4 </span>Heading content</a></li>
         <li><a href=#phrasing-content-0><span class=secno>3.2.4.1.5 </span>Phrasing content</a></li>
         <li><a href=#embedded-content-0><span class=secno>3.2.4.1.6 </span>Embedded content</a></li>
         <li><a href=#interactive-content-0><span class=secno>3.2.4.1.7 </span>Interactive content</a></li>
         <li><a href=#palpable-content-0><span class=secno>3.2.4.1.8 </span>Palpable content</a></li>
         <li><a href=#script-supporting-elements-0><span class=secno>3.2.4.1.9 </span>Script-supporting elements</a></ol></li>
       <li><a href=#transparent-content-models><span class=secno>3.2.4.2 </span>Transparent content models</a></li>
       <li><a href=#paragraphs><span class=secno>3.2.4.3 </span>Paragraphs</a></ol></li>
     <li><a href=#global-attributes><span class=secno>3.2.5 </span>Global attributes</a>
      <ol>
       <li><a href=#the-id-attribute><span class=secno>3.2.5.1 </span>The <code>id</code> attribute</a></li>
       <li><a href=#the-title-attribute><span class=secno>3.2.5.2 </span>The <code title=attr-title>title</code> attribute</a></li>
       <li><a href=#the-lang-and-xml:lang-attributes><span class=secno>3.2.5.3 </span>The <code title=attr-lang>lang</code> and <code title=attr-xml-lang>xml:lang</code> attributes</a></li>
       <li><a href=#the-translate-attribute><span class=secno>3.2.5.4 </span>The <code title=attr-translate>translate</code> attribute</a></li>
       <li><a href=#the-xml:base-attribute-(xml-only)><span class=secno>3.2.5.5 </span>The <code>xml:base</code> attribute (XML only)</a></li>
       <li><a href=#the-dir-attribute><span class=secno>3.2.5.6 </span>The <code>dir</code> attribute</a></li>
       <li><a href=#classes><span class=secno>3.2.5.7 </span>The <code>class</code> attribute</a></li>
       <li><a href=#the-style-attribute><span class=secno>3.2.5.8 </span>The <code>style</code> attribute</a></li>
       <li><a href=#embedding-custom-non-visible-data-with-the-data-*-attributes><span class=secno>3.2.5.9 </span>Embedding custom non-visible data with the <code title=attr-data-*>data-*</code> attributes</a></ol></li>
     <li><a href=#requirements-relating-to-the-bidirectional-algorithm><span class=secno>3.2.6 </span>Requirements relating to the bidirectional algorithm</a>
      <ol>
       <li><a href=#authoring-conformance-criteria-for-bidirectional-algorithm-formatting-characters><span class=secno>3.2.6.1 </span>Authoring conformance criteria for bidirectional-algorithm formatting characters</a></li>
       <li><a href=#user-agent-conformance-criteria><span class=secno>3.2.6.2 </span>User agent conformance criteria</a></ol></li>
     <li><a href=#wai-aria><span class=secno>3.2.7 </span>WAI-ARIA</a></ol></ol></li>
 <li><a href=#semantics><span class=secno>4 </span>The elements of HTML</a>
  <ol>
   <li><a href=#the-root-element><span class=secno>4.1 </span>The root element</a>
    <ol>
     <li><a href=#the-html-element><span class=secno>4.1.1 </span>The <code>html</code> element</a></ol></li>
   <li><a href=#document-metadata><span class=secno>4.2 </span>Document metadata</a>
    <ol>
     <li><a href=#the-head-element><span class=secno>4.2.1 </span>The <code>head</code> element</a></li>
     <li><a href=#the-title-element><span class=secno>4.2.2 </span>The <code>title</code> element</a></li>
     <li><a href=#the-base-element><span class=secno>4.2.3 </span>The <code>base</code> element</a></li>
     <li><a href=#the-link-element><span class=secno>4.2.4 </span>The <code>link</code> element</a></li>
     <li><a href=#the-meta-element><span class=secno>4.2.5 </span>The <code>meta</code> element</a>
      <ol>
       <li><a href=#standard-metadata-names><span class=secno>4.2.5.1 </span>Standard metadata names</a></li>
       <li><a href=#other-metadata-names><span class=secno>4.2.5.2 </span>Other metadata names</a></li>
       <li><a href=#pragma-directives><span class=secno>4.2.5.3 </span>Pragma directives</a></li>
       <li><a href=#other-pragma-directives><span class=secno>4.2.5.4 </span>Other pragma directives</a></li>
       <li><a href=#charset><span class=secno>4.2.5.5 </span>Specifying the document's character encoding</a></ol></li>
     <li><a href=#the-style-element><span class=secno>4.2.6 </span>The <code>style</code> element</a></li>
     <li><a href=#interactions-of-styling-and-scripting><span class=secno>4.2.7 </span>Interactions of styling and scripting</a></ol></li>
   <li><a href=#sections><span class=secno>4.3 </span>Sections</a>
    <ol>
     <li><a href=#the-body-element><span class=secno>4.3.1 </span>The <code>body</code> element</a></li>
     <li><a href=#the-article-element><span class=secno>4.3.2 </span>The <code>article</code> element</a></li>
     <li><a href=#the-section-element><span class=secno>4.3.3 </span>The <code>section</code> element</a></li>
     <li><a href=#the-nav-element><span class=secno>4.3.4 </span>The <code>nav</code> element</a></li>
     <li><a href=#the-aside-element><span class=secno>4.3.5 </span>The <code>aside</code> element</a></li>
     <li><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements><span class=secno>4.3.6 </span>The <code>h1</code>, <code>h2</code>, <code>h3</code>, <code>h4</code>, <code>h5</code>, and
  <code>h6</code> elements</a></li>
     <li><a href=#the-hgroup-element><span class=secno>4.3.7 </span>The <code>hgroup</code> element</a></li>
     <li><a href=#the-header-element><span class=secno>4.3.8 </span>The <code>header</code> element</a></li>
     <li><a href=#the-footer-element><span class=secno>4.3.9 </span>The <code>footer</code> element</a></li>
     <li><a href=#the-address-element><span class=secno>4.3.10 </span>The <code>address</code> element</a></li>
     <li><a href=#headings-and-sections><span class=secno>4.3.11 </span>Headings and sections</a>
      <ol>
       <li><a href=#outlines><span class=secno>4.3.11.1 </span>Creating an outline</a></li>
       <li><a href=#sample-outlines><span class=secno>4.3.11.2 </span>Sample outlines</a></ol></li>
     <li><a href=#usage-summary-0><span class=secno>4.3.12 </span>Usage summary</a>
      <ol>
       <li><a href=#article-or-section><span class=secno>4.3.12.1 </span>Article or section?</a></ol></ol></li>
   <li><a href=#grouping-content><span class=secno>4.4 </span>Grouping content</a>
    <ol>
     <li><a href=#the-p-element><span class=secno>4.4.1 </span>The <code>p</code> element</a></li>
     <li><a href=#the-hr-element><span class=secno>4.4.2 </span>The <code>hr</code> element</a></li>
     <li><a href=#the-pre-element><span class=secno>4.4.3 </span>The <code>pre</code> element</a></li>
     <li><a href=#the-blockquote-element><span class=secno>4.4.4 </span>The <code>blockquote</code> element</a></li>
     <li><a href=#the-ol-element><span class=secno>4.4.5 </span>The <code>ol</code> element</a></li>
     <li><a href=#the-ul-element><span class=secno>4.4.6 </span>The <code>ul</code> element</a></li>
     <li><a href=#the-li-element><span class=secno>4.4.7 </span>The <code>li</code> element</a></li>
     <li><a href=#the-dl-element><span class=secno>4.4.8 </span>The <code>dl</code> element</a></li>
     <li><a href=#the-dt-element><span class=secno>4.4.9 </span>The <code>dt</code> element</a></li>
     <li><a href=#the-dd-element><span class=secno>4.4.10 </span>The <code>dd</code> element</a></li>
     <li><a href=#the-figure-element><span class=secno>4.4.11 </span>The <code>figure</code> element</a></li>
     <li><a href=#the-figcaption-element><span class=secno>4.4.12 </span>The <code>figcaption</code> element</a></li>
     <li><a href=#the-main-element><span class=secno>4.4.13 </span>The <code>main</code> element</a></li>
     <li><a href=#the-div-element><span class=secno>4.4.14 </span>The <code>div</code> element</a></ol></li>
   <li><a href=#text-level-semantics><span class=secno>4.5 </span>Text-level semantics</a>
    <ol>
     <li><a href=#the-a-element><span class=secno>4.5.1 </span>The <code>a</code> element</a></li>
     <li><a href=#the-em-element><span class=secno>4.5.2 </span>The <code>em</code> element</a></li>
     <li><a href=#the-strong-element><span class=secno>4.5.3 </span>The <code>strong</code> element</a></li>
     <li><a href=#the-small-element><span class=secno>4.5.4 </span>The <code>small</code> element</a></li>
     <li><a href=#the-s-element><span class=secno>4.5.5 </span>The <code>s</code> element</a></li>
     <li><a href=#the-cite-element><span class=secno>4.5.6 </span>The <code>cite</code> element</a></li>
     <li><a href=#the-q-element><span class=secno>4.5.7 </span>The <code>q</code> element</a></li>
     <li><a href=#the-dfn-element><span class=secno>4.5.8 </span>The <code>dfn</code> element</a></li>
     <li><a href=#the-abbr-element><span class=secno>4.5.9 </span>The <code>abbr</code> element</a></li>
     <li><a href=#the-ruby-element><span class=secno>4.5.10 </span>The <code>ruby</code> element</a></li>
     <li><a href=#the-rt-element><span class=secno>4.5.11 </span>The <code>rt</code> element</a></li>
     <li><a href=#the-rp-element><span class=secno>4.5.12 </span>The <code>rp</code> element</a></li>
     <li><a href=#the-data-element><span class=secno>4.5.13 </span>The <code>data</code> element</a></li>
     <li><a href=#the-time-element><span class=secno>4.5.14 </span>The <code>time</code> element</a></li>
     <li><a href=#the-code-element><span class=secno>4.5.15 </span>The <code>code</code> element</a></li>
     <li><a href=#the-var-element><span class=secno>4.5.16 </span>The <code>var</code> element</a></li>
     <li><a href=#the-samp-element><span class=secno>4.5.17 </span>The <code>samp</code> element</a></li>
     <li><a href=#the-kbd-element><span class=secno>4.5.18 </span>The <code>kbd</code> element</a></li>
     <li><a href=#the-sub-and-sup-elements><span class=secno>4.5.19 </span>The <code>sub</code> and <code>sup</code> elements</a></li>
     <li><a href=#the-i-element><span class=secno>4.5.20 </span>The <code>i</code> element</a></li>
     <li><a href=#the-b-element><span class=secno>4.5.21 </span>The <code>b</code> element</a></li>
     <li><a href=#the-u-element><span class=secno>4.5.22 </span>The <code>u</code> element</a></li>
     <li><a href=#the-mark-element><span class=secno>4.5.23 </span>The <code>mark</code> element</a></li>
     <li><a href=#the-bdi-element><span class=secno>4.5.24 </span>The <code>bdi</code> element</a></li>
     <li><a href=#the-bdo-element><span class=secno>4.5.25 </span>The <code>bdo</code> element</a></li>
     <li><a href=#the-span-element><span class=secno>4.5.26 </span>The <code>span</code> element</a></li>
     <li><a href=#the-br-element><span class=secno>4.5.27 </span>The <code>br</code> element</a></li>
     <li><a href=#the-wbr-element><span class=secno>4.5.28 </span>The <code>wbr</code> element</a></li>
     <li><a href=#usage-summary><span class=secno>4.5.29 </span>Usage summary</a></ol></li>
   <li><a href=#edits><span class=secno>4.6 </span>Edits</a>
    <ol>
     <li><a href=#the-ins-element><span class=secno>4.6.1 </span>The <code>ins</code> element</a></li>
     <li><a href=#the-del-element><span class=secno>4.6.2 </span>The <code>del</code> element</a></li>
     <li><a href=#attributes-common-to-ins-and-del-elements><span class=secno>4.6.3 </span>Attributes common to <code>ins</code> and <code>del</code> elements</a></li>
     <li><a href=#edits-and-paragraphs><span class=secno>4.6.4 </span>Edits and paragraphs</a></li>
     <li><a href=#edits-and-lists><span class=secno>4.6.5 </span>Edits and lists</a></li>
     <li><a href=#edits-and-tables><span class=secno>4.6.6 </span>Edits and tables</a></ol></li>
   <li><a href=#embedded-content><span class=secno>4.7 </span>Embedded content</a>
    <ol>
     <li><a href=#the-img-element><span class=secno>4.7.1 </span>The <code>img</code> element</a>
      <ol>
       <li><a href=#alt><span class=secno>4.7.1.1 </span>Requirements for providing text to act as an alternative for images</a>
        <ol>
         <li><a href=#general-guidelines><span class=secno>4.7.1.1.1 </span>General guidelines</a></li>
         <li><a href=#a-link-or-button-containing-nothing-but-the-image><span class=secno>4.7.1.1.2 </span>A link or button containing nothing but the image</a></li>
         <li><a href=#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations><span class=secno>4.7.1.1.3 </span>A phrase or paragraph with an alternative graphical representation: charts, diagrams, graphs, maps, illustrations</a></li>
         <li><a href=#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos><span class=secno>4.7.1.1.4 </span>A short phrase or label with an alternative graphical representation: icons, logos</a></li>
         <li><a href=#text-that-has-been-rendered-to-a-graphic-for-typographical-effect><span class=secno>4.7.1.1.5 </span>Text that has been rendered to a graphic for typographical effect</a></li>
         <li><a href=#a-graphical-representation-of-some-of-the-surrounding-text><span class=secno>4.7.1.1.6 </span>A graphical representation of some of the surrounding text</a></li>
         <li><a href="#a-purely-decorative-image-that-doesn't-add-any-information"><span class=secno>4.7.1.1.7 </span>A purely decorative image that doesn't add any information</a></li>
         <li><a href=#a-group-of-images-that-form-a-single-larger-picture-with-no-links><span class=secno>4.7.1.1.8 </span>A group of images that form a single larger picture with no links</a></li>
         <li><a href=#a-group-of-images-that-form-a-single-larger-picture-with-links><span class=secno>4.7.1.1.9 </span>A group of images that form a single larger picture with links</a></li>
         <li><a href=#a-key-part-of-the-content><span class=secno>4.7.1.1.10 </span>A key part of the content</a></li>
         <li><a href=#an-image-not-intended-for-the-user><span class=secno>4.7.1.1.11 </span>An image not intended for the user</a></li>
         <li><a href=#an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images><span class=secno>4.7.1.1.12 </span>An image in an e-mail or private document intended for a specific person who is known to be able to view images</a></li>
         <li><a href=#guidance-for-markup-generators><span class=secno>4.7.1.1.13 </span>Guidance for markup generators</a></li>
         <li><a href=#guidance-for-conformance-checkers><span class=secno>4.7.1.1.14 </span>Guidance for conformance checkers</a></ol></ol></li>
     <li><a href=#the-iframe-element><span class=secno>4.7.2 </span>The <code>iframe</code> element</a></li>
     <li><a href=#the-embed-element><span class=secno>4.7.3 </span>The <code>embed</code> element</a></li>
     <li><a href=#the-object-element><span class=secno>4.7.4 </span>The <code>object</code> element</a></li>
     <li><a href=#the-param-element><span class=secno>4.7.5 </span>The <code>param</code> element</a></li>
     <li><a href=#the-video-element><span class=secno>4.7.6 </span>The <code>video</code> element</a></li>
     <li><a href=#the-audio-element><span class=secno>4.7.7 </span>The <code>audio</code> element</a></li>
     <li><a href=#the-source-element><span class=secno>4.7.8 </span>The <code>source</code> element</a></li>
     <li><a href=#the-track-element><span class=secno>4.7.9 </span>The <code>track</code> element</a></li>
     <li><a href=#media-elements><span class=secno>4.7.10 </span>Media elements</a>
      <ol>
       <li><a href=#error-codes><span class=secno>4.7.10.1 </span>Error codes</a></li>
       <li><a href=#location-of-the-media-resource><span class=secno>4.7.10.2 </span>Location of the media resource</a></li>
       <li><a href=#mime-types><span class=secno>4.7.10.3 </span>MIME types</a></li>
       <li><a href=#network-states><span class=secno>4.7.10.4 </span>Network states</a></li>
       <li><a href=#loading-the-media-resource><span class=secno>4.7.10.5 </span>Loading the media resource</a></li>
       <li><a href=#offsets-into-the-media-resource><span class=secno>4.7.10.6 </span>Offsets into the media resource</a></li>
       <li><a href=#ready-states><span class=secno>4.7.10.7 </span>Ready states</a></li>
       <li><a href=#playing-the-media-resource><span class=secno>4.7.10.8 </span>Playing the media resource</a></li>
       <li><a href=#seeking><span class=secno>4.7.10.9 </span>Seeking</a></li>
       <li><a href=#media-resources-with-multiple-media-tracks><span class=secno>4.7.10.10 </span>Media resources with multiple media tracks</a>
        <ol>
         <li><a href=#audiotracklist-and-videotracklist-objects><span class=secno>4.7.10.10.1 </span><code>AudioTrackList</code> and <code>VideoTrackList</code> objects</a></li>
         <li><a href=#selecting-specific-audio-and-video-tracks-declaratively><span class=secno>4.7.10.10.2 </span>Selecting specific audio and video tracks declaratively</a></ol></li>
       <li><a href=#synchronising-multiple-media-elements><span class=secno>4.7.10.11 </span>Synchronising multiple media elements</a>
        <ol>
         <li><a href=#introduction-0><span class=secno>4.7.10.11.1 </span>Introduction</a></li>
         <li><a href=#media-controllers><span class=secno>4.7.10.11.2 </span>Media controllers</a></li>
         <li><a href=#assigning-a-media-controller-declaratively><span class=secno>4.7.10.11.3 </span>Assigning a media controller declaratively</a></ol></li>
       <li><a href=#timed-text-tracks><span class=secno>4.7.10.12 </span>Timed text tracks</a>
        <ol>
         <li><a href=#text-track-model><span class=secno>4.7.10.12.1 </span>Text track model</a></li>
         <li><a href=#sourcing-in-band-text-tracks><span class=secno>4.7.10.12.2 </span>Sourcing in-band text tracks</a></li>
         <li><a href=#sourcing-out-of-band-text-tracks><span class=secno>4.7.10.12.3 </span>Sourcing out-of-band text tracks</a></li>
         <li><a href=#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues><span class=secno>4.7.10.12.4 </span>Guidelines for exposing cues in various formats as text track cues</a></li>
         <li><a href=#text-track-api><span class=secno>4.7.10.12.5 </span>Text track API</a></li>
         <li><a href=#text-tracks-describing-chapters><span class=secno>4.7.10.12.6 </span>Text tracks describing chapters</a></li>
         <li><a href=#cue-events><span class=secno>4.7.10.12.7 </span>Event handlers for objects of the text track APIs</a></li>
         <li><a href=#best-practices-for-metadata-text-tracks><span class=secno>4.7.10.12.8 </span>Best practices for metadata text tracks</a></ol></li>
       <li><a href=#user-interface><span class=secno>4.7.10.13 </span>User interface</a></li>
       <li><a href=#time-ranges><span class=secno>4.7.10.14 </span>Time ranges</a></li>
       <li><a href=#the-trackevent-interface><span class=secno>4.7.10.15 </span>The <code>TrackEvent</code> interface</a></li>
       <li><a href=#mediaevents><span class=secno>4.7.10.16 </span>Event summary</a></li>
       <li><a href=#security-and-privacy-considerations><span class=secno>4.7.10.17 </span>Security and privacy considerations</a></li>
       <li><a href=#best-practices-for-authors-using-media-elements><span class=secno>4.7.10.18 </span>Best practices for authors using media elements</a></li>
       <li><a href=#best-practices-for-implementors-of-media-elements><span class=secno>4.7.10.19 </span>Best practices for implementors of media elements</a></ol></li>
     <li><a href=#the-map-element><span class=secno>4.7.11 </span>The <code>map</code> element</a></li>
     <li><a href=#the-area-element><span class=secno>4.7.12 </span>The <code>area</code> element</a></li>
     <li><a href=#image-maps><span class=secno>4.7.13 </span>Image maps</a>
      <ol>
       <li><a href=#authoring><span class=secno>4.7.13.1 </span>Authoring</a></li>
       <li><a href=#processing-model-0><span class=secno>4.7.13.2 </span>Processing model</a></ol></li>
     <li><a href=#mathml><span class=secno>4.7.14 </span>MathML</a></li>
     <li><a href=#svg-0><span class=secno>4.7.15 </span>SVG</a></li>
     <li><a href=#dimension-attributes><span class=secno>4.7.16 </span>Dimension attributes</a></ol></li>
   <li><a href=#links><span class=secno>4.8 </span>Links</a>
    <ol>
     <li><a href=#introduction-1><span class=secno>4.8.1 </span>Introduction</a></li>
     <li><a href=#links-created-by-a-and-area-elements><span class=secno>4.8.2 </span>Links created by <code>a</code> and <code>area</code> elements</a></li>
     <li><a href=#following-hyperlinks-0><span class=secno>4.8.3 </span>Following hyperlinks</a></li>
     <li><a href=#downloading-resources><span class=secno>4.8.4 </span>Downloading resources</a>
      <ol>
       <li><a href=#hyperlink-auditing><span class=secno>4.8.4.1 </span>Hyperlink auditing</a></ol></li>
     <li><a href=#linkTypes><span class=secno>4.8.5 </span>Link types</a>
      <ol>
       <li><a href=#rel-alternate><span class=secno>4.8.5.1 </span>Link type "<code>alternate</code>"</a></li>
       <li><a href=#link-type-author><span class=secno>4.8.5.2 </span>Link type "<code>author</code>"</a></li>
       <li><a href=#link-type-bookmark><span class=secno>4.8.5.3 </span>Link type "<code>bookmark</code>"</a></li>
       <li><a href=#link-type-external><span class=secno>4.8.5.4 </span>Link type "<code>external</code>"</a></li>
       <li><a href=#link-type-help><span class=secno>4.8.5.5 </span>Link type "<code>help</code>"</a></li>
       <li><a href=#rel-icon><span class=secno>4.8.5.6 </span>Link type "<code>icon</code>"</a></li>
       <li><a href=#link-type-license><span class=secno>4.8.5.7 </span>Link type "<code>license</code>"</a></li>
       <li><a href=#link-type-nofollow><span class=secno>4.8.5.8 </span>Link type "<code>nofollow</code>"</a></li>
       <li><a href=#link-type-noreferrer><span class=secno>4.8.5.9 </span>Link type "<code>noreferrer</code>"</a></li>
       <li><a href=#link-type-pingback><span class=secno>4.8.5.10 </span>Link type "<code>pingback</code>"</a></li>
       <li><a href=#link-type-prefetch><span class=secno>4.8.5.11 </span>Link type "<code>prefetch</code>"</a></li>
       <li><a href=#link-type-search><span class=secno>4.8.5.12 </span>Link type "<code>search</code>"</a></li>
       <li><a href=#link-type-sidebar><span class=secno>4.8.5.13 </span>Link type "<code>sidebar</code>"</a></li>
       <li><a href=#link-type-stylesheet><span class=secno>4.8.5.14 </span>Link type "<code>stylesheet</code>"</a></li>
       <li><a href=#link-type-tag><span class=secno>4.8.5.15 </span>Link type "<code>tag</code>"</a></li>
       <li><a href=#sequential-link-types><span class=secno>4.8.5.16 </span>Sequential link types</a>
        <ol>
         <li><a href=#link-type-next><span class=secno>4.8.5.16.1 </span>Link type "<code>next</code>"</a></li>
         <li><a href=#link-type-prev><span class=secno>4.8.5.16.2 </span>Link type "<code>prev</code>"</a></ol></li>
       <li><a href=#other-link-types><span class=secno>4.8.5.17 </span>Other link types</a></ol></ol></li>
   <li><a href=#tabular-data><span class=secno>4.9 </span>Tabular data</a>
    <ol>
     <li><a href=#the-table-element><span class=secno>4.9.1 </span>The <code>table</code> element</a>
      <ol>
       <li><a href=#table-descriptions-techniques><span class=secno>4.9.1.1 </span>Techniques for describing tables</a></li>
       <li><a href=#table-layout-techniques><span class=secno>4.9.1.2 </span>Techniques for table design</a></ol></li>
     <li><a href=#the-caption-element><span class=secno>4.9.2 </span>The <code>caption</code> element</a></li>
     <li><a href=#the-colgroup-element><span class=secno>4.9.3 </span>The <code>colgroup</code> element</a></li>
     <li><a href=#the-col-element><span class=secno>4.9.4 </span>The <code>col</code> element</a></li>
     <li><a href=#the-tbody-element><span class=secno>4.9.5 </span>The <code>tbody</code> element</a></li>
     <li><a href=#the-thead-element><span class=secno>4.9.6 </span>The <code>thead</code> element</a></li>
     <li><a href=#the-tfoot-element><span class=secno>4.9.7 </span>The <code>tfoot</code> element</a></li>
     <li><a href=#the-tr-element><span class=secno>4.9.8 </span>The <code>tr</code> element</a></li>
     <li><a href=#the-td-element><span class=secno>4.9.9 </span>The <code>td</code> element</a></li>
     <li><a href=#the-th-element><span class=secno>4.9.10 </span>The <code>th</code> element</a></li>
     <li><a href=#attributes-common-to-td-and-th-elements><span class=secno>4.9.11 </span>Attributes common to <code>td</code> and <code>th</code> elements</a></li>
     <li><a href=#processing-model-1><span class=secno>4.9.12 </span>Processing model</a>
      <ol>
       <li><a href=#forming-a-table><span class=secno>4.9.12.1 </span>Forming a table</a></li>
       <li><a href=#header-and-data-cell-semantics><span class=secno>4.9.12.2 </span>Forming relationships between data cells and header cells</a></ol></li>
     <li><a href=#table-sorting-model><span class=secno>4.9.13 </span>Table sorting model</a></li>
     <li><a href=#table-examples><span class=secno>4.9.14 </span>Examples</a></ol></li>
   <li><a href=#forms><span class=secno>4.10 </span>Forms</a>
    <ol>
     <li><a href=#introduction-2><span class=secno>4.10.1 </span>Introduction</a>
      <ol>
       <li><a href="#writing-a-form's-user-interface"><span class=secno>4.10.1.1 </span>Writing a form's user interface</a></li>
       <li><a href=#implementing-the-server-side-processing-for-a-form><span class=secno>4.10.1.2 </span>Implementing the server-side processing for a form</a></li>
       <li><a href=#configuring-a-form-to-communicate-with-a-server><span class=secno>4.10.1.3 </span>Configuring a form to communicate with a server</a></li>
       <li><a href=#client-side-form-validation><span class=secno>4.10.1.4 </span>Client-side form validation</a></li>
       <li><a href=#enabling-client-side-automatic-filling-of-form-controls><span class=secno>4.10.1.5 </span>Enabling client-side automatic filling of form controls</a></li>
       <li><a href=#improving-the-user-experience-on-mobile-devices><span class=secno>4.10.1.6 </span>Improving the user experience on mobile devices</a></li>
       <li><a href=#the-difference-between-the-field-type,-the-autofill-field-name,-and-the-input-modality><span class=secno>4.10.1.7 </span>The difference between the field type, the autofill field name, and the input modality</a></li>
       <li><a href=#input-author-notes><span class=secno>4.10.1.8 </span>Date, time, and number formats</a></ol></li>
     <li><a href=#categories><span class=secno>4.10.2 </span>Categories</a></li>
     <li><a href=#the-form-element><span class=secno>4.10.3 </span>The <code>form</code> element</a></li>
     <li><a href=#the-label-element><span class=secno>4.10.4 </span>The <code>label</code> element</a></li>
     <li><a href=#the-input-element><span class=secno>4.10.5 </span>The <code>input</code> element</a>
      <ol>
       <li><a href=#states-of-the-type-attribute><span class=secno>4.10.5.1 </span>States of the <code title=attr-input-type>type</code> attribute</a>
        <ol>
         <li><a href="#hidden-state-(type=hidden)"><span class=secno>4.10.5.1.1 </span>Hidden state (<code title="">type=hidden</code>)</a></li>
         <li><a href="#text-(type=text)-state-and-search-state-(type=search)"><span class=secno>4.10.5.1.2 </span>Text (<code title="">type=text</code>) state and Search state (<code title="">type=search</code>)</a></li>
         <li><a href="#telephone-state-(type=tel)"><span class=secno>4.10.5.1.3 </span>Telephone state (<code title="">type=tel</code>)</a></li>
         <li><a href="#url-state-(type=url)"><span class=secno>4.10.5.1.4 </span>URL state (<code title="">type=url</code>)</a></li>
         <li><a href="#e-mail-state-(type=email)"><span class=secno>4.10.5.1.5 </span>E-mail state (<code title="">type=email</code>)</a></li>
         <li><a href="#password-state-(type=password)"><span class=secno>4.10.5.1.6 </span>Password state (<code title="">type=password</code>)</a></li>
         <li><a href="#date-and-time-state-(type=datetime)"><span class=secno>4.10.5.1.7 </span>Date and Time state (<code title="">type=datetime</code>)</a></li>
         <li><a href="#date-state-(type=date)"><span class=secno>4.10.5.1.8 </span>Date state (<code title="">type=date</code>)</a></li>
         <li><a href="#month-state-(type=month)"><span class=secno>4.10.5.1.9 </span>Month state (<code title="">type=month</code>)</a></li>
         <li><a href="#week-state-(type=week)"><span class=secno>4.10.5.1.10 </span>Week state (<code title="">type=week</code>)</a></li>
         <li><a href="#time-state-(type=time)"><span class=secno>4.10.5.1.11 </span>Time state (<code title="">type=time</code>)</a></li>
         <li><a href="#local-date-and-time-state-(type=datetime-local)"><span class=secno>4.10.5.1.12 </span>Local Date and Time state (<code title="">type=datetime-local</code>)</a></li>
         <li><a href="#number-state-(type=number)"><span class=secno>4.10.5.1.13 </span>Number state (<code title="">type=number</code>)</a></li>
         <li><a href="#range-state-(type=range)"><span class=secno>4.10.5.1.14 </span>Range state (<code title="">type=range</code>)</a></li>
         <li><a href="#color-state-(type=color)"><span class=secno>4.10.5.1.15 </span>Color state (<code title="">type=color</code>)</a></li>
         <li><a href="#checkbox-state-(type=checkbox)"><span class=secno>4.10.5.1.16 </span>Checkbox state (<code title="">type=checkbox</code>)</a></li>
         <li><a href="#radio-button-state-(type=radio)"><span class=secno>4.10.5.1.17 </span>Radio Button state (<code title="">type=radio</code>)</a></li>
         <li><a href="#file-upload-state-(type=file)"><span class=secno>4.10.5.1.18 </span>File Upload state (<code title="">type=file</code>)</a></li>
         <li><a href="#submit-button-state-(type=submit)"><span class=secno>4.10.5.1.19 </span>Submit Button state (<code title="">type=submit</code>)</a></li>
         <li><a href="#image-button-state-(type=image)"><span class=secno>4.10.5.1.20 </span>Image Button state (<code title="">type=image</code>)</a></li>
         <li><a href="#reset-button-state-(type=reset)"><span class=secno>4.10.5.1.21 </span>Reset Button state (<code title="">type=reset</code>)</a></li>
         <li><a href="#button-state-(type=button)"><span class=secno>4.10.5.1.22 </span>Button state (<code title="">type=button</code>)</a></ol></li>
       <li><a href=#input-impl-notes><span class=secno>4.10.5.2 </span>Implemention notes regarding localization of form controls</a></li>
       <li><a href=#common-input-element-attributes><span class=secno>4.10.5.3 </span>Common <code>input</code> element attributes</a>
        <ol>
         <li><a href=#the-maxlength-and-minlength-attributes><span class=secno>4.10.5.3.1 </span>The <code title=attr-input-maxlength>maxlength</code> and <code title=attr-input-minlength>minlength</code> attributes</a></li>
         <li><a href=#the-size-attribute><span class=secno>4.10.5.3.2 </span>The <code title=attr-input-size>size</code> attribute</a></li>
         <li><a href=#the-readonly-attribute><span class=secno>4.10.5.3.3 </span>The <code title=attr-input-readonly>readonly</code> attribute</a></li>
         <li><a href=#the-required-attribute><span class=secno>4.10.5.3.4 </span>The <code title=attr-input-required>required</code> attribute</a></li>
         <li><a href=#the-multiple-attribute><span class=secno>4.10.5.3.5 </span>The <code title=attr-input-multiple>multiple</code> attribute</a></li>
         <li><a href=#the-pattern-attribute><span class=secno>4.10.5.3.6 </span>The <code title=attr-input-pattern>pattern</code> attribute</a></li>
         <li><a href=#the-min-and-max-attributes><span class=secno>4.10.5.3.7 </span>The <code title=attr-input-min>min</code> and <code title=attr-input-max>max</code> attributes</a></li>
         <li><a href=#the-step-attribute><span class=secno>4.10.5.3.8 </span>The <code title=attr-input-step>step</code> attribute</a></li>
         <li><a href=#the-list-attribute><span class=secno>4.10.5.3.9 </span>The <code title=attr-input-list>list</code> attribute</a></li>
         <li><a href=#the-placeholder-attribute><span class=secno>4.10.5.3.10 </span>The <code title=attr-input-placeholder>placeholder</code> attribute</a></ol></li>
       <li><a href=#common-input-element-apis><span class=secno>4.10.5.4 </span>Common <code>input</code> element APIs</a></li>
       <li><a href=#common-input-element-events><span class=secno>4.10.5.5 </span>Common event behaviors</a></ol></li>
     <li><a href=#the-button-element><span class=secno>4.10.6 </span>The <code>button</code> element</a></li>
     <li><a href=#the-select-element><span class=secno>4.10.7 </span>The <code>select</code> element</a></li>
     <li><a href=#the-datalist-element><span class=secno>4.10.8 </span>The <code>datalist</code> element</a></li>
     <li><a href=#the-optgroup-element><span class=secno>4.10.9 </span>The <code>optgroup</code> element</a></li>
     <li><a href=#the-option-element><span class=secno>4.10.10 </span>The <code>option</code> element</a></li>
     <li><a href=#the-textarea-element><span class=secno>4.10.11 </span>The <code>textarea</code> element</a></li>
     <li><a href=#the-keygen-element><span class=secno>4.10.12 </span>The <code>keygen</code> element</a></li>
     <li><a href=#the-output-element><span class=secno>4.10.13 </span>The <code>output</code> element</a></li>
     <li><a href=#the-progress-element><span class=secno>4.10.14 </span>The <code>progress</code> element</a></li>
     <li><a href=#the-meter-element><span class=secno>4.10.15 </span>The <code>meter</code> element</a></li>
     <li><a href=#the-fieldset-element><span class=secno>4.10.16 </span>The <code>fieldset</code> element</a></li>
     <li><a href=#the-legend-element><span class=secno>4.10.17 </span>The <code>legend</code> element</a></li>
     <li><a href=#form-control-infrastructure><span class=secno>4.10.18 </span>Form control infrastructure</a>
      <ol>
       <li><a href="#a-form-control's-value"><span class=secno>4.10.18.1 </span>A form control's value</a></li>
       <li><a href=#mutability><span class=secno>4.10.18.2 </span>Mutability</a></li>
       <li><a href=#association-of-controls-and-forms><span class=secno>4.10.18.3 </span>Association of controls and forms</a></ol></li>
     <li><a href=#attributes-common-to-form-controls><span class=secno>4.10.19 </span>Attributes common to form controls</a>
      <ol>
       <li><a href=#naming-form-controls:-the-name-attribute><span class=secno>4.10.19.1 </span>Naming form controls: the <code title=attr-fe-name>name</code> attribute</a></li>
       <li><a href=#submitting-element-directionality:-the-dirname-attribute><span class=secno>4.10.19.2 </span>Submitting element directionality: the <code title=attr-fe-dirname>dirname</code> attribute</a></li>
       <li><a href=#limiting-user-input-length:-the-maxlength-attribute><span class=secno>4.10.19.3 </span>Limiting user input length: the <code title=attr-fe-maxlength>maxlength</code> attribute</a></li>
       <li><a href=#setting-minimum-input-length-requirements:-the-minlength-attribute><span class=secno>4.10.19.4 </span>Setting minimum input length requirements: the <code title=attr-fe-minlength>minlength</code> attribute</a></li>
       <li><a href=#enabling-and-disabling-form-controls:-the-disabled-attribute><span class=secno>4.10.19.5 </span>Enabling and disabling form controls: the <code title=attr-fe-disabled>disabled</code> attribute</a></li>
       <li><a href=#form-submission-0><span class=secno>4.10.19.6 </span>Form submission</a>
        <ol>
         <li><a href=#autofocusing-a-form-control:-the-autofocus-attribute><span class=secno>4.10.19.6.1 </span>Autofocusing a form control: the <code title=attr-fe-autofocus>autofocus</code> attribute</a></ol></li>
       <li><a href=#input-modalities:-the-inputmode-attribute><span class=secno>4.10.19.7 </span>Input modalities: the <code title=attr-fe-inputmode>inputmode</code> attribute</a></li>
       <li><a href=#autofill><span class=secno>4.10.19.8 </span>Autofill</a>
        <ol>
         <li><a href=#autofilling-form-controls:-the-autocomplete-attribute><span class=secno>4.10.19.8.1 </span>Autofilling form controls: the <code title=attr-fe-autocomplete>autocomplete</code> attribute</a></li>
         <li><a href=#processing-model-2><span class=secno>4.10.19.8.2 </span>Processing model</a></li>
         <li><a href=#user-interface-for-bulk-autofill><span class=secno>4.10.19.8.3 </span>User interface for bulk autofill</a></li>
         <li><a href=#the-autocompleteerrorevent-interface><span class=secno>4.10.19.8.4 </span>The <code>AutocompleteErrorEvent</code> interface</a></ol></ol></li>
     <li><a href=#textFieldSelection><span class=secno>4.10.20 </span>APIs for the text field selections</a></li>
     <li><a href=#constraints><span class=secno>4.10.21 </span>Constraints</a>
      <ol>
       <li><a href=#definitions><span class=secno>4.10.21.1 </span>Definitions</a></li>
       <li><a href=#constraint-validation><span class=secno>4.10.21.2 </span>Constraint validation</a></li>
       <li><a href=#the-constraint-validation-api><span class=secno>4.10.21.3 </span>The constraint validation API</a></li>
       <li><a href=#security-forms><span class=secno>4.10.21.4 </span>Security</a></ol></li>
     <li><a href=#form-submission><span class=secno>4.10.22 </span>Form submission</a>
      <ol>
       <li><a href=#introduction-3><span class=secno>4.10.22.1 </span>Introduction</a></li>
       <li><a href=#implicit-submission><span class=secno>4.10.22.2 </span>Implicit submission</a></li>
       <li><a href=#form-submission-algorithm><span class=secno>4.10.22.3 </span>Form submission algorithm</a></li>
       <li><a href=#constructing-form-data-set><span class=secno>4.10.22.4 </span>Constructing the form data set</a></li>
       <li><a href=#selecting-a-form-submission-encoding><span class=secno>4.10.22.5 </span>Selecting a form submission encoding</a></li>
       <li><a href=#url-encoded-form-data><span class=secno>4.10.22.6 </span>URL-encoded form data</a></li>
       <li><a href=#multipart-form-data><span class=secno>4.10.22.7 </span>Multipart form data</a></li>
       <li><a href=#plain-text-form-data><span class=secno>4.10.22.8 </span>Plain text form data</a></ol></li>
     <li><a href=#resetting-a-form><span class=secno>4.10.23 </span>Resetting a form</a></ol></li>
   <li><a href=#interactive-elements><span class=secno>4.11 </span>Interactive elements</a>
    <ol>
     <li><a href=#the-details-element><span class=secno>4.11.1 </span>The <code>details</code> element</a></li>
     <li><a href=#the-summary-element><span class=secno>4.11.2 </span>The <code>summary</code> element</a></li>
     <li><a href=#the-menu-element><span class=secno>4.11.3 </span>The <code>menu</code> element</a></li>
     <li><a href=#the-menuitem-element><span class=secno>4.11.4 </span>The <code>menuitem</code> element</a></li>
     <li><a href=#context-menus><span class=secno>4.11.5 </span>Context menus</a>
      <ol>
       <li><a href=#declaring-a-context-menu><span class=secno>4.11.5.1 </span>Declaring a context menu</a></li>
       <li><a href=#processing-model-3><span class=secno>4.11.5.2 </span>Processing model</a></li>
       <li><a href=#the-relatedevent-interfaces><span class=secno>4.11.5.3 </span>The <code>RelatedEvent</code> interfaces</a></ol></li>
     <li><a href=#commands><span class=secno>4.11.6 </span>Commands</a>
      <ol>
       <li><a href=#facets-0><span class=secno>4.11.6.1 </span>Facets</a></li>
       <li><a href=#using-the-a-element-to-define-a-command><span class=secno>4.11.6.2 </span>Using the <code>a</code> element to define a command</a></li>
       <li><a href=#using-the-button-element-to-define-a-command><span class=secno>4.11.6.3 </span>Using the <code>button</code> element to define a command</a></li>
       <li><a href=#using-the-input-element-to-define-a-command><span class=secno>4.11.6.4 </span>Using the <code>input</code> element to define a command</a></li>
       <li><a href=#using-the-option-element-to-define-a-command><span class=secno>4.11.6.5 </span>Using the <code>option</code> element to define a command</a></li>
       <li><a href=#using-the-menuitem-element-to-define-a-command><span class=secno>4.11.6.6 </span>Using the <code>menuitem</code> element to define a
  command</a></li>
       <li><a href=#using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly><span class=secno>4.11.6.7 </span>Using the <code title=attr-menuitem-command>command</code> attribute on <code>menuitem</code> elements to define
  a command indirectly</a></li>
       <li><a href=#using-the-accesskey-attribute-on-a-label-element-to-define-a-command><span class=secno>4.11.6.8 </span>Using the <code title=attr-accesskey>accesskey</code> attribute
  on a <code>label</code> element to define a command</a></li>
       <li><a href=#using-the-accesskey-attribute-on-a-legend-element-to-define-a-command><span class=secno>4.11.6.9 </span>Using the <code title=attr-accesskey>accesskey</code> attribute
  on a <code>legend</code> element to define a command</a></li>
       <li><a href=#using-the-accesskey-attribute-to-define-a-command-on-other-elements><span class=secno>4.11.6.10 </span>Using the <code title=attr-accesskey>accesskey</code>
  attribute to define a command on other elements</a></ol></li>
     <li><a href=#the-dialog-element><span class=secno>4.11.7 </span>The <code>dialog</code> element</a>
      <ol>
       <li><a href=#anchor-points><span class=secno>4.11.7.1 </span>Anchor points</a></ol></ol></li>
   <li><a href=#scripting-1><span class=secno>4.12 </span>Scripting</a>
    <ol>
     <li><a href=#the-script-element><span class=secno>4.12.1 </span>The <code>script</code> element</a>
      <ol>
       <li><a href=#scriptingLanguages><span class=secno>4.12.1.1 </span>Scripting languages</a></li>
       <li><a href=#restrictions-for-contents-of-script-elements><span class=secno>4.12.1.2 </span>Restrictions for contents of <code>script</code> elements</a></li>
       <li><a href=#inline-documentation-for-external-scripts><span class=secno>4.12.1.3 </span>Inline documentation for external scripts</a></li>
       <li><a href=#scriptTagXSLT><span class=secno>4.12.1.4 </span>Interaction of <code>script</code> elements and XSLT</a></ol></li>
     <li><a href=#the-noscript-element><span class=secno>4.12.2 </span>The <code>noscript</code> element</a></li>
     <li><a href=#the-template-element><span class=secno>4.12.3 </span>The <code>template</code> element</a>
      <ol>
       <li><a href=#template-XSLT-XPath><span class=secno>4.12.3.1 </span>Interaction of <code>template</code> elements with XSLT and XPath</a></ol></li>
     <li><a href=#the-canvas-element><span class=secno>4.12.4 </span>The <code>canvas</code> element</a>
      <ol>
       <li><a href=#proxying-canvases-to-workers><span class=secno>4.12.4.1 </span>Proxying canvases to workers</a></li>
       <li><a href=#2dcontext><span class=secno>4.12.4.2 </span>The 2D rendering context</a>
        <ol>
         <li><a href=#implementation-notes><span class=secno>4.12.4.2.1 </span>Implementation notes</a></li>
         <li><a href=#the-canvas-state><span class=secno>4.12.4.2.2 </span>The canvas state</a></li>
         <li><a href=#drawingstyle-objects><span class=secno>4.12.4.2.3 </span><code>DrawingStyle</code> objects</a></li>
         <li><a href=#line-styles><span class=secno>4.12.4.2.4 </span>Line styles</a></li>
         <li><a href=#text-styles><span class=secno>4.12.4.2.5 </span>Text styles</a></li>
         <li><a href=#building-paths><span class=secno>4.12.4.2.6 </span>Building paths</a></li>
         <li><a href=#path2d-objects><span class=secno>4.12.4.2.7 </span><code>Path2D</code> objects</a></li>
         <li><a href=#transformations><span class=secno>4.12.4.2.8 </span>Transformations</a></li>
         <li><a href=#image-sources-for-2d-rendering-contexts><span class=secno>4.12.4.2.9 </span>Image sources for 2D rendering contexts</a></li>
         <li><a href=#fill-and-stroke-styles><span class=secno>4.12.4.2.10 </span>Fill and stroke styles</a></li>
         <li><a href=#drawing-rectangles-to-the-bitmap><span class=secno>4.12.4.2.11 </span>Drawing rectangles to the bitmap</a></li>
         <li><a href=#drawing-text-to-the-bitmap><span class=secno>4.12.4.2.12 </span>Drawing text to the bitmap</a></li>
         <li><a href=#drawing-paths-to-the-canvas><span class=secno>4.12.4.2.13 </span>Drawing paths to the canvas</a></li>
         <li><a href=#drawing-images><span class=secno>4.12.4.2.14 </span>Drawing images</a></li>
         <li><a href=#hit-regions><span class=secno>4.12.4.2.15 </span>Hit regions</a></li>
         <li><a href=#pixel-manipulation><span class=secno>4.12.4.2.16 </span>Pixel manipulation</a></li>
         <li><a href=#compositing><span class=secno>4.12.4.2.17 </span>Compositing</a></li>
         <li><a href=#image-smoothing><span class=secno>4.12.4.2.18 </span>Image smoothing</a></li>
         <li><a href=#shadows><span class=secno>4.12.4.2.19 </span>Shadows</a></li>
         <li><a href=#drawing-model><span class=secno>4.12.4.2.20 </span>Drawing model</a></li>
         <li><a href=#best-practices><span class=secno>4.12.4.2.21 </span>Best practices</a></li>
         <li><a href=#examples><span class=secno>4.12.4.2.22 </span>Examples</a></ol></li>
       <li><a href=#color-spaces-and-color-correction><span class=secno>4.12.4.3 </span>Color spaces and color correction</a></li>
       <li><a href=#serializing-bitmaps-to-a-file><span class=secno>4.12.4.4 </span>Serializing bitmaps to a file</a></li>
       <li><a href=#security-with-canvas-elements><span class=secno>4.12.4.5 </span>Security with <code>canvas</code> elements</a></ol></ol></li>
   <li><a href=#common-idioms><span class=secno>4.13 </span>Common idioms without dedicated elements</a>
    <ol>
     <li><a href=#the-main-part-of-the-content><span class=secno>4.13.1 </span>The main part of the content</a></li>
     <li><a href=#rel-up><span class=secno>4.13.2 </span>Bread crumb navigation</a></li>
     <li><a href=#tag-clouds><span class=secno>4.13.3 </span>Tag clouds</a></li>
     <li><a href=#conversations><span class=secno>4.13.4 </span>Conversations</a></li>
     <li><a href=#footnotes><span class=secno>4.13.5 </span>Footnotes</a></ol></li>
   <li><a href=#disabled-elements><span class=secno>4.14 </span>Disabled elements</a></li>
   <li><a href=#selectors><span class=secno>4.15 </span>Matching HTML elements using selectors</a>
    <ol>
     <li><a href=#case-sensitivity><span class=secno>4.15.1 </span>Case-sensitivity</a></li>
     <li><a href=#pseudo-classes><span class=secno>4.15.2 </span>Pseudo-classes</a></ol></ol></li>
 <li><a href=#microdata><span class=secno>5 </span>Microdata</a>
  <ol>
   <li><a href=#introduction-4><span class=secno>5.1 </span>Introduction</a>
    <ol>
     <li><a href=#overview><span class=secno>5.1.1 </span>Overview</a></li>
     <li><a href=#the-basic-syntax><span class=secno>5.1.2 </span>The basic syntax</a></li>
     <li><a href=#typed-items><span class=secno>5.1.3 </span>Typed items</a></li>
     <li><a href=#global-identifiers-for-items><span class=secno>5.1.4 </span>Global identifiers for items</a></li>
     <li><a href=#selecting-names-when-defining-vocabularies><span class=secno>5.1.5 </span>Selecting names when defining vocabularies</a></li>
     <li><a href=#using-the-microdata-dom-api><span class=secno>5.1.6 </span>Using the microdata DOM API</a></ol></li>
   <li><a href=#encoding-microdata><span class=secno>5.2 </span>Encoding microdata</a>
    <ol>
     <li><a href=#the-microdata-model><span class=secno>5.2.1 </span>The microdata model</a></li>
     <li><a href=#items><span class=secno>5.2.2 </span>Items</a></li>
     <li><a href=#names:-the-itemprop-attribute><span class=secno>5.2.3 </span>Names: the <code>itemprop</code> attribute</a></li>
     <li><a href=#values><span class=secno>5.2.4 </span>Values</a></li>
     <li><a href=#associating-names-with-items><span class=secno>5.2.5 </span>Associating names with items</a></li>
     <li><a href=#microdata-and-other-namespaces><span class=secno>5.2.6 </span>Microdata and other namespaces</a></ol></li>
   <li><a href=#microdata-dom-api><span class=secno>5.3 </span>Microdata DOM API</a></li>
   <li><a href=#mdvocabs><span class=secno>5.4 </span>Sample microdata vocabularies</a>
    <ol>
     <li><a href=#vcard><span class=secno>5.4.1 </span>vCard</a>
      <ol>
       <li><a href=#conversion-to-vcard><span class=secno>5.4.1.1 </span>Conversion to vCard</a></li>
       <li><a href=#examples-0><span class=secno>5.4.1.2 </span>Examples</a></ol></li>
     <li><a href=#vevent><span class=secno>5.4.2 </span>vEvent</a>
      <ol>
       <li><a href=#conversion-to-icalendar><span class=secno>5.4.2.1 </span>Conversion to iCalendar</a></li>
       <li><a href=#examples-1><span class=secno>5.4.2.2 </span>Examples</a></ol></li>
     <li><a href=#licensing-works><span class=secno>5.4.3 </span>Licensing works</a>
      <ol>
       <li><a href=#examples-2><span class=secno>5.4.3.1 </span>Examples</a></ol></ol></li>
   <li><a href=#converting-html-to-other-formats><span class=secno>5.5 </span>Converting HTML to other formats</a>
    <ol>
     <li><a href=#json><span class=secno>5.5.1 </span>JSON</a></ol></ol></li>
 <li><a href=#editing><span class=secno>6 </span>User interaction</a>
  <ol>
   <li><a href=#the-hidden-attribute><span class=secno>6.1 </span>The <code>hidden</code> attribute</a></li>
   <li><a href=#inert-subtrees><span class=secno>6.2 </span>Inert subtrees</a></li>
   <li><a href=#activation><span class=secno>6.3 </span>Activation</a></li>
   <li><a href=#focus><span class=secno>6.4 </span>Focus</a>
    <ol>
     <li><a href=#introduction-5><span class=secno>6.4.1 </span>Introduction</a></li>
     <li><a href=#data-model><span class=secno>6.4.2 </span>Data model</a></li>
     <li><a href=#the-tabindex-attribute><span class=secno>6.4.3 </span>The <code title=attr-tabindex>tabindex</code> attribute</a></li>
     <li><a href=#processing-model-4><span class=secno>6.4.4 </span>Processing model</a></li>
     <li><a href=#sequential-focus-navigation><span class=secno>6.4.5 </span>Sequential focus navigation</a></li>
     <li><a href=#focus-management-apis><span class=secno>6.4.6 </span>Focus management APIs</a></ol></li>
   <li><a href=#assigning-keyboard-shortcuts><span class=secno>6.5 </span>Assigning keyboard shortcuts</a>
    <ol>
     <li><a href=#introduction-6><span class=secno>6.5.1 </span>Introduction</a></li>
     <li><a href=#the-accesskey-attribute><span class=secno>6.5.2 </span>The <code>accesskey</code> attribute</a></li>
     <li><a href=#processing-model-5><span class=secno>6.5.3 </span>Processing model</a></ol></li>
   <li><a href=#editing-0><span class=secno>6.6 </span>Editing</a>
    <ol>
     <li><a href=#contenteditable><span class=secno>6.6.1 </span>Making document regions editable: The <code title=attr-contenteditable>contenteditable</code> content attribute</a></li>
     <li><a href=#making-entire-documents-editable:-the-designmode-idl-attribute><span class=secno>6.6.2 </span>Making entire documents editable: The <code title=dom-document-designMode>designMode</code> IDL attribute</a></li>
     <li><a href=#best-practices-for-in-page-editors><span class=secno>6.6.3 </span>Best practices for in-page editors</a></li>
     <li><a href=#editing-apis><span class=secno>6.6.4 </span>Editing APIs</a></li>
     <li><a href=#spelling-and-grammar-checking><span class=secno>6.6.5 </span>Spelling and grammar checking</a></ol></li>
   <li><a href=#dnd><span class=secno>6.7 </span>Drag and drop</a>
    <ol>
     <li><a href=#introduction-7><span class=secno>6.7.1 </span>Introduction</a></li>
     <li><a href=#the-drag-data-store><span class=secno>6.7.2 </span>The drag data store</a></li>
     <li><a href=#the-datatransfer-interface><span class=secno>6.7.3 </span>The <code>DataTransfer</code> interface</a>
      <ol>
       <li><a href=#the-datatransferitemlist-interface><span class=secno>6.7.3.1 </span>The <code>DataTransferItemList</code> interface</a></li>
       <li><a href=#the-datatransferitem-interface><span class=secno>6.7.3.2 </span>The <code>DataTransferItem</code> interface</a></ol></li>
     <li><a href=#the-dragevent-interface><span class=secno>6.7.4 </span>The <code>DragEvent</code> interface</a></li>
     <li><a href=#drag-and-drop-processing-model><span class=secno>6.7.5 </span>Drag-and-drop processing model</a></li>
     <li><a href=#dndevents><span class=secno>6.7.6 </span>Events summary</a></li>
     <li><a href=#the-draggable-attribute><span class=secno>6.7.7 </span>The <code>draggable</code> attribute</a></li>
     <li><a href=#the-dropzone-attribute><span class=secno>6.7.8 </span>The <code>dropzone</code> attribute</a></li>
     <li><a href=#security-risks-in-the-drag-and-drop-model><span class=secno>6.7.9 </span>Security risks in the drag-and-drop model</a></ol></ol></li>
 <li><a href=#browsers><span class=secno>7 </span>Loading Web pages</a>
  <ol>
   <li><a href=#windows><span class=secno>7.1 </span>Browsing contexts</a>
    <ol>
     <li><a href=#nested-browsing-contexts><span class=secno>7.1.1 </span>Nested browsing contexts</a>
      <ol>
       <li><a href=#navigating-nested-browsing-contexts-in-the-dom><span class=secno>7.1.1.1 </span>Navigating nested browsing contexts in the DOM</a></ol></li>
     <li><a href=#auxiliary-browsing-contexts><span class=secno>7.1.2 </span>Auxiliary browsing contexts</a>
      <ol>
       <li><a href=#navigating-auxiliary-browsing-contexts-in-the-dom><span class=secno>7.1.2.1 </span>Navigating auxiliary browsing contexts in the DOM</a></ol></li>
     <li><a href=#secondary-browsing-contexts><span class=secno>7.1.3 </span>Secondary browsing contexts</a></li>
     <li><a href=#security-nav><span class=secno>7.1.4 </span>Security</a></li>
     <li><a href=#groupings-of-browsing-contexts><span class=secno>7.1.5 </span>Groupings of browsing contexts</a></li>
     <li><a href=#browsing-context-names><span class=secno>7.1.6 </span>Browsing context names</a></ol></li>
   <li><a href=#the-window-object><span class=secno>7.2 </span>The <code>Window</code> object</a>
    <ol>
     <li><a href=#security-window><span class=secno>7.2.1 </span>Security</a></li>
     <li><a href=#apis-for-creating-and-navigating-browsing-contexts-by-name><span class=secno>7.2.2 </span>APIs for creating and navigating browsing contexts by name</a></li>
     <li><a href=#accessing-other-browsing-contexts><span class=secno>7.2.3 </span>Accessing other browsing contexts</a></li>
     <li><a href=#named-access-on-the-window-object><span class=secno>7.2.4 </span>Named access on the <code>Window</code> object</a></li>
     <li><a href=#garbage-collection-and-browsing-contexts><span class=secno>7.2.5 </span>Garbage collection and browsing contexts</a></li>
     <li><a href=#closing-browsing-contexts><span class=secno>7.2.6 </span>Closing browsing contexts</a></li>
     <li><a href=#browser-interface-elements><span class=secno>7.2.7 </span>Browser interface elements</a></li>
     <li><a href=#the-windowproxy-object><span class=secno>7.2.8 </span>The <code>WindowProxy</code> object</a></ol></li>
   <li><a href=#origin-0><span class=secno>7.3 </span>Origin</a>
    <ol>
     <li><a href=#relaxing-the-same-origin-restriction><span class=secno>7.3.1 </span>Relaxing the same-origin restriction</a></ol></li>
   <li><a href=#sandboxing><span class=secno>7.4 </span>Sandboxing</a></li>
   <li><a href=#history><span class=secno>7.5 </span>Session history and navigation</a>
    <ol>
     <li><a href=#the-session-history-of-browsing-contexts><span class=secno>7.5.1 </span>The session history of browsing contexts</a></li>
     <li><a href=#the-history-interface><span class=secno>7.5.2 </span>The <code>History</code> interface</a></li>
     <li><a href=#the-location-interface><span class=secno>7.5.3 </span>The <code>Location</code> interface</a>
      <ol>
       <li><a href=#security-location><span class=secno>7.5.3.1 </span>Security</a></ol></li>
     <li><a href=#history-notes><span class=secno>7.5.4 </span>Implementation notes for session history</a></ol></li>
   <li><a href=#browsing-the-web><span class=secno>7.6 </span>Browsing the Web</a>
    <ol>
     <li><a href=#navigating-across-documents><span class=secno>7.6.1 </span>Navigating across documents</a></li>
     <li><a href=#read-html><span class=secno>7.6.2 </span>Page load processing model for HTML files</a></li>
     <li><a href=#read-xml><span class=secno>7.6.3 </span>Page load processing model for XML files</a></li>
     <li><a href=#read-text><span class=secno>7.6.4 </span>Page load processing model for text files</a></li>
     <li><a href=#read-multipart-x-mixed-replace><span class=secno>7.6.5 </span>Page load processing model for <code>multipart/x-mixed-replace</code> resources</a></li>
     <li><a href=#read-media><span class=secno>7.6.6 </span>Page load processing model for media</a></li>
     <li><a href=#read-plugin><span class=secno>7.6.7 </span>Page load processing model for content that uses plugins</a></li>
     <li><a href=#read-ua-inline><span class=secno>7.6.8 </span>Page load processing model for inline
  content that doesn't have a DOM</a></li>
     <li><a href=#scroll-to-fragid><span class=secno>7.6.9 </span>Navigating to a fragment identifier</a></li>
     <li><a href=#history-traversal><span class=secno>7.6.10 </span>History traversal</a>
      <ol>
       <li><a href=#the-popstateevent-interface><span class=secno>7.6.10.1 </span>The <code>PopStateEvent</code> interface</a></li>
       <li><a href=#the-hashchangeevent-interface><span class=secno>7.6.10.2 </span>The <code>HashChangeEvent</code> interface</a></li>
       <li><a href=#the-pagetransitionevent-interface><span class=secno>7.6.10.3 </span>The <code>PageTransitionEvent</code> interface</a></ol></li>
     <li><a href=#unloading-documents><span class=secno>7.6.11 </span>Unloading documents</a>
      <ol>
       <li><a href=#the-beforeunloadevent-interface><span class=secno>7.6.11.1 </span>The <code>BeforeUnloadEvent</code> interface</a></ol></li>
     <li><a href=#aborting-a-document-load><span class=secno>7.6.12 </span>Aborting a document load</a></ol></li>
   <li><a href=#offline><span class=secno>7.7 </span>Offline Web applications</a>
    <ol>
     <li><a href=#introduction-8><span class=secno>7.7.1 </span>Introduction</a>
      <ol>
       <li><a href=#supporting-offline-caching-for-legacy-applications><span class=secno>7.7.1.1 </span>Supporting offline caching for legacy applications</a></li>
       <li><a href=#appcacheevents><span class=secno>7.7.1.2 </span>Event summary</a></ol></li>
     <li><a href=#appcache><span class=secno>7.7.2 </span>Application caches</a></li>
     <li><a href=#manifests><span class=secno>7.7.3 </span>The cache manifest syntax</a>
      <ol>
       <li><a href=#some-sample-manifests><span class=secno>7.7.3.1 </span>Some sample manifests</a></li>
       <li><a href=#writing-cache-manifests><span class=secno>7.7.3.2 </span>Writing cache manifests</a></li>
       <li><a href=#parsing-cache-manifests><span class=secno>7.7.3.3 </span>Parsing cache manifests</a></ol></li>
     <li><a href=#downloading-or-updating-an-application-cache><span class=secno>7.7.4 </span>Downloading or updating an application cache</a></li>
     <li><a href=#the-application-cache-selection-algorithm><span class=secno>7.7.5 </span>The application cache selection algorithm</a></li>
     <li><a href=#changesToNetworkingModel><span class=secno>7.7.6 </span>Changes to the networking model</a></li>
     <li><a href=#expiring-application-caches><span class=secno>7.7.7 </span>Expiring application caches</a></li>
     <li><a href=#disk-space><span class=secno>7.7.8 </span>Disk space</a></li>
     <li><a href=#application-cache-api><span class=secno>7.7.9 </span>Application cache API</a></li>
     <li><a href=#browser-state><span class=secno>7.7.10 </span>Browser state</a></ol></ol></li>
 <li><a href=#webappapis><span class=secno>8 </span>Web application APIs</a>
  <ol>
   <li><a href=#scripting><span class=secno>8.1 </span>Scripting</a>
    <ol>
     <li><a href=#introduction-9><span class=secno>8.1.1 </span>Introduction</a></li>
     <li><a href=#enabling-and-disabling-scripting><span class=secno>8.1.2 </span>Enabling and disabling scripting</a></li>
     <li><a href=#processing-model-6><span class=secno>8.1.3 </span>Processing model</a>
      <ol>
       <li><a href=#definitions-0><span class=secno>8.1.3.1 </span>Definitions</a></li>
       <li><a href=#script-settings-for-browsing-contexts><span class=secno>8.1.3.2 </span>Script settings for browsing contexts</a></li>
       <li><a href=#calling-scripts><span class=secno>8.1.3.3 </span>Calling scripts</a></li>
       <li><a href=#creating-scripts><span class=secno>8.1.3.4 </span>Creating scripts</a></li>
       <li><a href=#killing-scripts><span class=secno>8.1.3.5 </span>Killing scripts</a></li>
       <li><a href=#runtime-script-errors><span class=secno>8.1.3.6 </span>Runtime script errors</a>
        <ol>
         <li><a href=#runtime-script-errors-in-documents><span class=secno>8.1.3.6.1 </span>Runtime script errors in documents</a></li>
         <li><a href=#the-errorevent-interface><span class=secno>8.1.3.6.2 </span>The <code>ErrorEvent</code> interface</a></ol></ol></li>
     <li><a href=#event-loops><span class=secno>8.1.4 </span>Event loops</a>
      <ol>
       <li><a href=#definitions-1><span class=secno>8.1.4.1 </span>Definitions</a></li>
       <li><a href=#processing-model-7><span class=secno>8.1.4.2 </span>Processing model</a></li>
       <li><a href=#generic-task-sources><span class=secno>8.1.4.3 </span>Generic task sources</a></ol></li>
     <li><a href=#events><span class=secno>8.1.5 </span>Events</a>
      <ol>
       <li><a href=#event-handler-attributes><span class=secno>8.1.5.1 </span>Event handlers</a></li>
       <li><a href=#event-handlers-on-elements,-document-objects,-and-window-objects><span class=secno>8.1.5.2 </span>Event handlers on elements, <code>Document</code> objects, and <code>Window</code> objects</a>
        <ol>
         <li><a href=#idl-definitions><span class=secno>8.1.5.2.1 </span>IDL definitions</a></ol></li>
       <li><a href=#event-firing><span class=secno>8.1.5.3 </span>Event firing</a></li>
       <li><a href=#events-and-the-window-object><span class=secno>8.1.5.4 </span>Events and the <code>Window</code> object</a></ol></ol></li>
   <li><a href=#atob><span class=secno>8.2 </span>Base64 utility methods</a></li>
   <li><a href=#dynamic-markup-insertion><span class=secno>8.3 </span>Dynamic markup insertion</a>
    <ol>
     <li><a href=#opening-the-input-stream><span class=secno>8.3.1 </span>Opening the input stream</a></li>
     <li><a href=#closing-the-input-stream><span class=secno>8.3.2 </span>Closing the input stream</a></li>
     <li><a href=#document.write()><span class=secno>8.3.3 </span><code title=dom-document-write>document.write()</code></a></li>
     <li><a href=#document.writeln()><span class=secno>8.3.4 </span><code title=dom-document-writeln>document.writeln()</code></a></ol></li>
   <li><a href=#timers><span class=secno>8.4 </span>Timers</a></li>
   <li><a href=#user-prompts><span class=secno>8.5 </span>User prompts</a>
    <ol>
     <li><a href=#simple-dialogs><span class=secno>8.5.1 </span>Simple dialogs</a></li>
     <li><a href=#printing><span class=secno>8.5.2 </span>Printing</a></li>
     <li><a href=#dialogs-implemented-using-separate-documents><span class=secno>8.5.3 </span>Dialogs implemented using separate documents</a></ol></li>
   <li><a href=#system-state-and-capabilities><span class=secno>8.6 </span>System state and capabilities</a>
    <ol>
     <li><a href=#the-navigator-object><span class=secno>8.6.1 </span>The <code>Navigator</code> object</a>
      <ol>
       <li><a href=#client-identification><span class=secno>8.6.1.1 </span>Client identification</a></li>
       <li><a href=#language-preferences><span class=secno>8.6.1.2 </span>Language preferences</a></li>
       <li><a href=#custom-handlers><span class=secno>8.6.1.3 </span>Custom scheme and content handlers</a>
        <ol>
         <li><a href=#security-and-privacy><span class=secno>8.6.1.3.1 </span>Security and privacy</a></li>
         <li><a href=#sample-handler-impl><span class=secno>8.6.1.3.2 </span>Sample user interface</a></ol></li>
       <li><a href=#manually-releasing-the-storage-mutex><span class=secno>8.6.1.4 </span>Manually releasing the storage mutex</a></li>
       <li><a href=#plugins-0><span class=secno>8.6.1.5 </span>Plugins</a></ol></li>
     <li><a href=#the-external-interface><span class=secno>8.6.2 </span>The <code>External</code> interface</a></ol></li>
   <li><a href=#images><span class=secno>8.7 </span>Images</a></ol></li>
 <li><a href=#comms><span class=secno>9 </span>Communication</a>
  <ol>
   <li><a href=#the-messageevent-interfaces><span class=secno>9.1 </span>The <code>MessageEvent</code> interfaces</a></li>
   <li><a href=#server-sent-events><span class=secno>9.2 </span>Server-sent events</a>
    <ol>
     <li><a href=#server-sent-events-intro><span class=secno>9.2.1 </span>Introduction</a></li>
     <li><a href=#the-eventsource-interface><span class=secno>9.2.2 </span>The <code>EventSource</code> interface</a></li>
     <li><a href=#processing-model-8><span class=secno>9.2.3 </span>Processing model</a></li>
     <li><a href=#parsing-an-event-stream><span class=secno>9.2.4 </span>Parsing an event stream</a></li>
     <li><a href=#event-stream-interpretation><span class=secno>9.2.5 </span>Interpreting an event stream</a></li>
     <li><a href=#authoring-notes><span class=secno>9.2.6 </span>Authoring notes</a></li>
     <li><a href=#eventsource-push><span class=secno>9.2.7 </span>Connectionless push and other features</a></li>
     <li><a href=#garbage-collection-0><span class=secno>9.2.8 </span>Garbage collection</a></li>
     <li><a href=#implementation-advice><span class=secno>9.2.9 </span>Implementation advice</a></li>
     <li><a href=#iana-considerations><span class=secno>9.2.10 </span>IANA considerations</a>
      <ol>
       <li><a href=#text/event-stream><span class=secno>9.2.10.1 </span><code>text/event-stream</code></a></li>
       <li><a href=#last-event-id><span class=secno>9.2.10.2 </span><code>Last-Event-ID</code></a></ol></ol></li>
   <li><a href=#network><span class=secno>9.3 </span>Web sockets</a>
    <ol>
     <li><a href=#network-intro><span class=secno>9.3.1 </span>Introduction</a></li>
     <li><a href=#the-websocket-interface><span class=secno>9.3.2 </span>The <code>WebSocket</code> interface</a></li>
     <li><a href=#feedback-from-the-protocol><span class=secno>9.3.3 </span>Feedback from the protocol</a></li>
     <li><a href=#ping-and-pong-frames><span class=secno>9.3.4 </span>Ping and Pong frames</a></li>
     <li><a href=#parsing-websocket-urls><span class=secno>9.3.5 </span>Parsing WebSocket URLs</a></li>
     <li><a href=#the-closeevent-interfaces><span class=secno>9.3.6 </span>The <code>CloseEvent</code> interfaces</a></li>
     <li><a href=#garbage-collection-1><span class=secno>9.3.7 </span>Garbage collection</a></ol></li>
   <li><a href=#web-messaging><span class=secno>9.4 </span>Cross-document messaging</a>
    <ol>
     <li><a href=#introduction-10><span class=secno>9.4.1 </span>Introduction</a></li>
     <li><a href=#security-postmsg><span class=secno>9.4.2 </span>Security</a>
      <ol>
       <li><a href=#authors><span class=secno>9.4.2.1 </span>Authors</a></li>
       <li><a href=#user-agents><span class=secno>9.4.2.2 </span>User agents</a></ol></li>
     <li><a href=#posting-messages><span class=secno>9.4.3 </span>Posting messages</a></ol></li>
   <li><a href=#channel-messaging><span class=secno>9.5 </span>Channel messaging</a>
    <ol>
     <li><a href=#introduction-11><span class=secno>9.5.1 </span>Introduction</a>
      <ol>
       <li><a href=#examples-3><span class=secno>9.5.1.1 </span>Examples</a></li>
       <li><a href=#ports-as-the-basis-of-an-object-capability-model-on-the-web><span class=secno>9.5.1.2 </span>Ports as the basis of an object-capability model on the Web</a></li>
       <li><a href=#ports-as-the-basis-of-abstracting-out-service-implementations><span class=secno>9.5.1.3 </span>Ports as the basis of abstracting out service implementations</a></ol></li>
     <li><a href=#message-channels><span class=secno>9.5.2 </span>Message channels</a></li>
     <li><a href=#message-ports><span class=secno>9.5.3 </span>Message ports</a></li>
     <li><a href=#broadcasting-to-many-ports><span class=secno>9.5.4 </span>Broadcasting to many ports</a></li>
     <li><a href=#ports-and-garbage-collection><span class=secno>9.5.5 </span>Ports and garbage collection</a></ol></li>
   <li><a href=#broadcasting-to-other-browsing-contexts><span class=secno>9.6 </span>Broadcasting to other browsing contexts</a></ol></li>
 <li><a href=#workers><span class=secno>10 </span>Web workers</a>
  <ol>
   <li><a href=#introduction-12><span class=secno>10.1 </span>Introduction</a>
    <ol>
     <li><a href=#scope-0><span class=secno>10.1.1 </span>Scope</a></li>
     <li><a href=#examples-4><span class=secno>10.1.2 </span>Examples</a>
      <ol>
       <li><a href=#a-background-number-crunching-worker><span class=secno>10.1.2.1 </span>A background number-crunching worker</a></li>
       <li><a href=#worker-used-for-background-i/o><span class=secno>10.1.2.2 </span>Worker used for background I/O</a></li>
       <li><a href=#shared-workers-introduction><span class=secno>10.1.2.3 </span>Shared workers introduction</a></li>
       <li><a href=#shared-state-using-a-shared-worker><span class=secno>10.1.2.4 </span>Shared state using a shared worker</a></li>
       <li><a href=#delegation><span class=secno>10.1.2.5 </span>Delegation</a></ol></li>
     <li><a href=#tutorials><span class=secno>10.1.3 </span>Tutorials</a>
      <ol>
       <li><a href=#creating-a-dedicated-worker><span class=secno>10.1.3.1 </span>Creating a dedicated worker</a></li>
       <li><a href=#communicating-with-a-dedicated-worker><span class=secno>10.1.3.2 </span>Communicating with a dedicated worker</a></li>
       <li><a href=#shared-workers><span class=secno>10.1.3.3 </span>Shared workers</a></ol></ol></li>
   <li><a href=#infrastructure-0><span class=secno>10.2 </span>Infrastructure</a>
    <ol>
     <li><a href=#the-global-scope><span class=secno>10.2.1 </span>The global scope</a>
      <ol>
       <li><a href=#the-workerglobalscope-common-interface><span class=secno>10.2.1.1 </span>The <code>WorkerGlobalScope</code> common interface</a></li>
       <li><a href=#dedicated-workers-and-the-dedicatedworkerglobalscope-interface><span class=secno>10.2.1.2 </span>Dedicated workers and the <code>DedicatedWorkerGlobalScope</code> interface</a></li>
       <li><a href=#shared-workers-and-the-sharedworkerglobalscope-interface><span class=secno>10.2.1.3 </span>Shared workers and the <code>SharedWorkerGlobalScope</code> interface</a></ol></li>
     <li><a href=#worker-event-loop><span class=secno>10.2.2 </span>The event loop</a></li>
     <li><a href="#the-worker's-lifetime"><span class=secno>10.2.3 </span>The worker's lifetime</a></li>
     <li><a href=#processing-model-9><span class=secno>10.2.4 </span>Processing model</a></li>
     <li><a href=#runtime-script-errors-0><span class=secno>10.2.5 </span>Runtime script errors</a></li>
     <li><a href=#creating-workers><span class=secno>10.2.6 </span>Creating workers</a>
      <ol>
       <li><a href=#the-abstractworker-abstract-interface><span class=secno>10.2.6.1 </span>The <code>AbstractWorker</code> abstract interface</a></li>
       <li><a href=#script-settings-for-workers><span class=secno>10.2.6.2 </span>Script settings for workers</a></li>
       <li><a href=#dedicated-workers-and-the-worker-interface><span class=secno>10.2.6.3 </span>Dedicated workers and the <code>Worker</code> interface</a></li>
       <li><a href=#shared-workers-and-the-sharedworker-interface><span class=secno>10.2.6.4 </span>Shared workers and the <code>SharedWorker</code> interface</a></ol></ol></li>
   <li><a href=#apis-available-to-workers><span class=secno>10.3 </span>APIs available to workers</a>
    <ol>
     <li><a href=#importing-scripts-and-libraries><span class=secno>10.3.1 </span>Importing scripts and libraries</a></li>
     <li><a href=#the-workernavigator-object><span class=secno>10.3.2 </span>The <code>WorkerNavigator</code> object</a></li>
     <li><a href=#worker-locations><span class=secno>10.3.3 </span>Worker locations</a></ol></ol></li>
 <li><a href=#webstorage><span class=secno>11 </span>Web storage</a>
  <ol>
   <li><a href=#introduction-13><span class=secno>11.1 </span>Introduction</a></li>
   <li><a href=#storage><span class=secno>11.2 </span>The API</a>
    <ol>
     <li><a href=#the-storage-interface><span class=secno>11.2.1 </span>The <code>Storage</code> interface</a></li>
     <li><a href=#the-sessionstorage-attribute><span class=secno>11.2.2 </span>The <code title=dom-sessionStorage>sessionStorage</code> attribute</a></li>
     <li><a href=#the-localstorage-attribute><span class=secno>11.2.3 </span>The <code title=dom-localStorage>localStorage</code> attribute</a></li>
     <li><a href=#the-storage-event><span class=secno>11.2.4 </span>The <code title=event-storage>storage</code> event</a>
      <ol>
       <li><a href=#the-storageevent-interface><span class=secno>11.2.4.1 </span>The <code>StorageEvent</code> interface</a></ol></li>
     <li><a href=#threads><span class=secno>11.2.5 </span>Threads</a></ol></li>
   <li><a href=#disk-space-0><span class=secno>11.3 </span>Disk space</a></li>
   <li><a href=#privacy><span class=secno>11.4 </span>Privacy</a>
    <ol>
     <li><a href=#user-tracking><span class=secno>11.4.1 </span>User tracking</a></li>
     <li><a href=#sensitivity-of-data><span class=secno>11.4.2 </span>Sensitivity of data</a></ol></li>
   <li><a href=#security-storage><span class=secno>11.5 </span>Security</a>
    <ol>
     <li><a href=#dns-spoofing-attacks><span class=secno>11.5.1 </span>DNS spoofing attacks</a></li>
     <li><a href=#cross-directory-attacks><span class=secno>11.5.2 </span>Cross-directory attacks</a></li>
     <li><a href=#implementation-risks><span class=secno>11.5.3 </span>Implementation risks</a></ol></ol></li>
 <li><a href=#syntax><span class=secno>12 </span>The HTML syntax</a>
  <ol>
   <li><a href=#writing><span class=secno>12.1 </span>Writing HTML documents</a>
    <ol>
     <li><a href=#the-doctype><span class=secno>12.1.1 </span>The DOCTYPE</a></li>
     <li><a href=#elements-0><span class=secno>12.1.2 </span>Elements</a>
      <ol>
       <li><a href=#start-tags><span class=secno>12.1.2.1 </span>Start tags</a></li>
       <li><a href=#end-tags><span class=secno>12.1.2.2 </span>End tags</a></li>
       <li><a href=#attributes-0><span class=secno>12.1.2.3 </span>Attributes</a></li>
       <li><a href=#optional-tags><span class=secno>12.1.2.4 </span>Optional tags</a></li>
       <li><a href=#element-restrictions><span class=secno>12.1.2.5 </span>Restrictions on content models</a></li>
       <li><a href=#cdata-rcdata-restrictions><span class=secno>12.1.2.6 </span>Restrictions on the contents of raw text and escapable raw text elements</a></ol></li>
     <li><a href=#text-0><span class=secno>12.1.3 </span>Text</a>
      <ol>
       <li><a href=#newlines><span class=secno>12.1.3.1 </span>Newlines</a></ol></li>
     <li><a href=#character-references><span class=secno>12.1.4 </span>Character references</a></li>
     <li><a href=#cdata-sections><span class=secno>12.1.5 </span>CDATA sections</a></li>
     <li><a href=#comments><span class=secno>12.1.6 </span>Comments</a></ol></li>
   <li><a href=#parsing><span class=secno>12.2 </span>Parsing HTML documents</a>
    <ol>
     <li><a href=#overview-of-the-parsing-model><span class=secno>12.2.1 </span>Overview of the parsing model</a></li>
     <li><a href=#the-input-byte-stream><span class=secno>12.2.2 </span>The input byte stream</a>
      <ol>
       <li><a href=#parsing-with-a-known-character-encoding><span class=secno>12.2.2.1 </span>Parsing with a known character encoding</a></li>
       <li><a href=#determining-the-character-encoding><span class=secno>12.2.2.2 </span>Determining the character encoding</a></li>
       <li><a href=#character-encodings><span class=secno>12.2.2.3 </span>Character encodings</a></li>
       <li><a href=#changing-the-encoding-while-parsing><span class=secno>12.2.2.4 </span>Changing the encoding while parsing</a></li>
       <li><a href=#preprocessing-the-input-stream><span class=secno>12.2.2.5 </span>Preprocessing the input stream</a></ol></li>
     <li><a href=#parse-state><span class=secno>12.2.3 </span>Parse state</a>
      <ol>
       <li><a href=#the-insertion-mode><span class=secno>12.2.3.1 </span>The insertion mode</a></li>
       <li><a href=#the-stack-of-open-elements><span class=secno>12.2.3.2 </span>The stack of open elements</a></li>
       <li><a href=#the-list-of-active-formatting-elements><span class=secno>12.2.3.3 </span>The list of active formatting elements</a></li>
       <li><a href=#the-element-pointers><span class=secno>12.2.3.4 </span>The element pointers</a></li>
       <li><a href=#other-parsing-state-flags><span class=secno>12.2.3.5 </span>Other parsing state flags</a></ol></li>
     <li><a href=#tokenization><span class=secno>12.2.4 </span>Tokenization</a>
      <ol>
       <li><a href=#data-state><span class=secno>12.2.4.1 </span>Data state</a></li>
       <li><a href=#character-reference-in-data-state><span class=secno>12.2.4.2 </span>Character reference in data state</a></li>
       <li><a href=#rcdata-state><span class=secno>12.2.4.3 </span>RCDATA state</a></li>
       <li><a href=#character-reference-in-rcdata-state><span class=secno>12.2.4.4 </span>Character reference in RCDATA state</a></li>
       <li><a href=#rawtext-state><span class=secno>12.2.4.5 </span>RAWTEXT state</a></li>
       <li><a href=#script-data-state><span class=secno>12.2.4.6 </span>Script data state</a></li>
       <li><a href=#plaintext-state><span class=secno>12.2.4.7 </span>PLAINTEXT state</a></li>
       <li><a href=#tag-open-state><span class=secno>12.2.4.8 </span>Tag open state</a></li>
       <li><a href=#end-tag-open-state><span class=secno>12.2.4.9 </span>End tag open state</a></li>
       <li><a href=#tag-name-state><span class=secno>12.2.4.10 </span>Tag name state</a></li>
       <li><a href=#rcdata-less-than-sign-state><span class=secno>12.2.4.11 </span>RCDATA less-than sign state</a></li>
       <li><a href=#rcdata-end-tag-open-state><span class=secno>12.2.4.12 </span>RCDATA end tag open state</a></li>
       <li><a href=#rcdata-end-tag-name-state><span class=secno>12.2.4.13 </span>RCDATA end tag name state</a></li>
       <li><a href=#rawtext-less-than-sign-state><span class=secno>12.2.4.14 </span>RAWTEXT less-than sign state</a></li>
       <li><a href=#rawtext-end-tag-open-state><span class=secno>12.2.4.15 </span>RAWTEXT end tag open state</a></li>
       <li><a href=#rawtext-end-tag-name-state><span class=secno>12.2.4.16 </span>RAWTEXT end tag name state</a></li>
       <li><a href=#script-data-less-than-sign-state><span class=secno>12.2.4.17 </span>Script data less-than sign state</a></li>
       <li><a href=#script-data-end-tag-open-state><span class=secno>12.2.4.18 </span>Script data end tag open state</a></li>
       <li><a href=#script-data-end-tag-name-state><span class=secno>12.2.4.19 </span>Script data end tag name state</a></li>
       <li><a href=#script-data-escape-start-state><span class=secno>12.2.4.20 </span>Script data escape start state</a></li>
       <li><a href=#script-data-escape-start-dash-state><span class=secno>12.2.4.21 </span>Script data escape start dash state</a></li>
       <li><a href=#script-data-escaped-state><span class=secno>12.2.4.22 </span>Script data escaped state</a></li>
       <li><a href=#script-data-escaped-dash-state><span class=secno>12.2.4.23 </span>Script data escaped dash state</a></li>
       <li><a href=#script-data-escaped-dash-dash-state><span class=secno>12.2.4.24 </span>Script data escaped dash dash state</a></li>
       <li><a href=#script-data-escaped-less-than-sign-state><span class=secno>12.2.4.25 </span>Script data escaped less-than sign state</a></li>
       <li><a href=#script-data-escaped-end-tag-open-state><span class=secno>12.2.4.26 </span>Script data escaped end tag open state</a></li>
       <li><a href=#script-data-escaped-end-tag-name-state><span class=secno>12.2.4.27 </span>Script data escaped end tag name state</a></li>
       <li><a href=#script-data-double-escape-start-state><span class=secno>12.2.4.28 </span>Script data double escape start state</a></li>
       <li><a href=#script-data-double-escaped-state><span class=secno>12.2.4.29 </span>Script data double escaped state</a></li>
       <li><a href=#script-data-double-escaped-dash-state><span class=secno>12.2.4.30 </span>Script data double escaped dash state</a></li>
       <li><a href=#script-data-double-escaped-dash-dash-state><span class=secno>12.2.4.31 </span>Script data double escaped dash dash state</a></li>
       <li><a href=#script-data-double-escaped-less-than-sign-state><span class=secno>12.2.4.32 </span>Script data double escaped less-than sign state</a></li>
       <li><a href=#script-data-double-escape-end-state><span class=secno>12.2.4.33 </span>Script data double escape end state</a></li>
       <li><a href=#before-attribute-name-state><span class=secno>12.2.4.34 </span>Before attribute name state</a></li>
       <li><a href=#attribute-name-state><span class=secno>12.2.4.35 </span>Attribute name state</a></li>
       <li><a href=#after-attribute-name-state><span class=secno>12.2.4.36 </span>After attribute name state</a></li>
       <li><a href=#before-attribute-value-state><span class=secno>12.2.4.37 </span>Before attribute value state</a></li>
       <li><a href=#attribute-value-(double-quoted)-state><span class=secno>12.2.4.38 </span>Attribute value (double-quoted) state</a></li>
       <li><a href=#attribute-value-(single-quoted)-state><span class=secno>12.2.4.39 </span>Attribute value (single-quoted) state</a></li>
       <li><a href=#attribute-value-(unquoted)-state><span class=secno>12.2.4.40 </span>Attribute value (unquoted) state</a></li>
       <li><a href=#character-reference-in-attribute-value-state><span class=secno>12.2.4.41 </span>Character reference in attribute value state</a></li>
       <li><a href=#after-attribute-value-(quoted)-state><span class=secno>12.2.4.42 </span>After attribute value (quoted) state</a></li>
       <li><a href=#self-closing-start-tag-state><span class=secno>12.2.4.43 </span>Self-closing start tag state</a></li>
       <li><a href=#bogus-comment-state><span class=secno>12.2.4.44 </span>Bogus comment state</a></li>
       <li><a href=#markup-declaration-open-state><span class=secno>12.2.4.45 </span>Markup declaration open state</a></li>
       <li><a href=#comment-start-state><span class=secno>12.2.4.46 </span>Comment start state</a></li>
       <li><a href=#comment-start-dash-state><span class=secno>12.2.4.47 </span>Comment start dash state</a></li>
       <li><a href=#comment-state><span class=secno>12.2.4.48 </span>Comment state</a></li>
       <li><a href=#comment-end-dash-state><span class=secno>12.2.4.49 </span>Comment end dash state</a></li>
       <li><a href=#comment-end-state><span class=secno>12.2.4.50 </span>Comment end state</a></li>
       <li><a href=#comment-end-bang-state><span class=secno>12.2.4.51 </span>Comment end bang state</a></li>
       <li><a href=#doctype-state><span class=secno>12.2.4.52 </span>DOCTYPE state</a></li>
       <li><a href=#before-doctype-name-state><span class=secno>12.2.4.53 </span>Before DOCTYPE name state</a></li>
       <li><a href=#doctype-name-state><span class=secno>12.2.4.54 </span>DOCTYPE name state</a></li>
       <li><a href=#after-doctype-name-state><span class=secno>12.2.4.55 </span>After DOCTYPE name state</a></li>
       <li><a href=#after-doctype-public-keyword-state><span class=secno>12.2.4.56 </span>After DOCTYPE public keyword state</a></li>
       <li><a href=#before-doctype-public-identifier-state><span class=secno>12.2.4.57 </span>Before DOCTYPE public identifier state</a></li>
       <li><a href=#doctype-public-identifier-(double-quoted)-state><span class=secno>12.2.4.58 </span>DOCTYPE public identifier (double-quoted) state</a></li>
       <li><a href=#doctype-public-identifier-(single-quoted)-state><span class=secno>12.2.4.59 </span>DOCTYPE public identifier (single-quoted) state</a></li>
       <li><a href=#after-doctype-public-identifier-state><span class=secno>12.2.4.60 </span>After DOCTYPE public identifier state</a></li>
       <li><a href=#between-doctype-public-and-system-identifiers-state><span class=secno>12.2.4.61 </span>Between DOCTYPE public and system identifiers state</a></li>
       <li><a href=#after-doctype-system-keyword-state><span class=secno>12.2.4.62 </span>After DOCTYPE system keyword state</a></li>
       <li><a href=#before-doctype-system-identifier-state><span class=secno>12.2.4.63 </span>Before DOCTYPE system identifier state</a></li>
       <li><a href=#doctype-system-identifier-(double-quoted)-state><span class=secno>12.2.4.64 </span>DOCTYPE system identifier (double-quoted) state</a></li>
       <li><a href=#doctype-system-identifier-(single-quoted)-state><span class=secno>12.2.4.65 </span>DOCTYPE system identifier (single-quoted) state</a></li>
       <li><a href=#after-doctype-system-identifier-state><span class=secno>12.2.4.66 </span>After DOCTYPE system identifier state</a></li>
       <li><a href=#bogus-doctype-state><span class=secno>12.2.4.67 </span>Bogus DOCTYPE state</a></li>
       <li><a href=#cdata-section-state><span class=secno>12.2.4.68 </span>CDATA section state</a></li>
       <li><a href=#tokenizing-character-references><span class=secno>12.2.4.69 </span>Tokenizing character references</a></ol></li>
     <li><a href=#tree-construction><span class=secno>12.2.5 </span>Tree construction</a>
      <ol>
       <li><a href=#creating-and-inserting-nodes><span class=secno>12.2.5.1 </span>Creating and inserting nodes</a></li>
       <li><a href=#parsing-elements-that-contain-only-text><span class=secno>12.2.5.2 </span>Parsing elements that contain only text</a></li>
       <li><a href=#closing-elements-that-have-implied-end-tags><span class=secno>12.2.5.3 </span>Closing elements that have implied end tags</a></li>
       <li><a href=#parsing-main-inhtml><span class=secno>12.2.5.4 </span>The rules for parsing tokens in HTML content</a>
        <ol>
         <li><a href=#the-initial-insertion-mode><span class=secno>12.2.5.4.1 </span>The "initial" insertion mode</a></li>
         <li><a href=#the-before-html-insertion-mode><span class=secno>12.2.5.4.2 </span>The "before html" insertion mode</a></li>
         <li><a href=#the-before-head-insertion-mode><span class=secno>12.2.5.4.3 </span>The "before head" insertion mode</a></li>
         <li><a href=#parsing-main-inhead><span class=secno>12.2.5.4.4 </span>The "in head" insertion mode</a></li>
         <li><a href=#parsing-main-inheadnoscript><span class=secno>12.2.5.4.5 </span>The "in head noscript" insertion mode</a></li>
         <li><a href=#the-after-head-insertion-mode><span class=secno>12.2.5.4.6 </span>The "after head" insertion mode</a></li>
         <li><a href=#parsing-main-inbody><span class=secno>12.2.5.4.7 </span>The "in body" insertion mode</a></li>
         <li><a href=#parsing-main-incdata><span class=secno>12.2.5.4.8 </span>The "text" insertion mode</a></li>
         <li><a href=#parsing-main-intable><span class=secno>12.2.5.4.9 </span>The "in table" insertion mode</a></li>
         <li><a href=#parsing-main-intabletext><span class=secno>12.2.5.4.10 </span>The "in table text" insertion mode</a></li>
         <li><a href=#parsing-main-incaption><span class=secno>12.2.5.4.11 </span>The "in caption" insertion mode</a></li>
         <li><a href=#parsing-main-incolgroup><span class=secno>12.2.5.4.12 </span>The "in column group" insertion mode</a></li>
         <li><a href=#parsing-main-intbody><span class=secno>12.2.5.4.13 </span>The "in table body" insertion mode</a></li>
         <li><a href=#parsing-main-intr><span class=secno>12.2.5.4.14 </span>The "in row" insertion mode</a></li>
         <li><a href=#parsing-main-intd><span class=secno>12.2.5.4.15 </span>The "in cell" insertion mode</a></li>
         <li><a href=#parsing-main-inselect><span class=secno>12.2.5.4.16 </span>The "in select" insertion mode</a></li>
         <li><a href=#parsing-main-inselectintable><span class=secno>12.2.5.4.17 </span>The "in select in table" insertion mode</a></li>
         <li><a href=#parsing-main-intemplate><span class=secno>12.2.5.4.18 </span>The "in template" insertion mode</a></li>
         <li><a href=#parsing-main-afterbody><span class=secno>12.2.5.4.19 </span>The "after body" insertion mode</a></li>
         <li><a href=#parsing-main-inframeset><span class=secno>12.2.5.4.20 </span>The "in frameset" insertion mode</a></li>
         <li><a href=#parsing-main-afterframeset><span class=secno>12.2.5.4.21 </span>The "after frameset" insertion mode</a></li>
         <li><a href=#the-after-after-body-insertion-mode><span class=secno>12.2.5.4.22 </span>The "after after body" insertion mode</a></li>
         <li><a href=#the-after-after-frameset-insertion-mode><span class=secno>12.2.5.4.23 </span>The "after after frameset" insertion mode</a></ol></li>
       <li><a href=#parsing-main-inforeign><span class=secno>12.2.5.5 </span>The rules for parsing tokens in foreign content</a></ol></li>
     <li><a href=#the-end><span class=secno>12.2.6 </span>The end</a></li>
     <li><a href=#coercing-an-html-dom-into-an-infoset><span class=secno>12.2.7 </span>Coercing an HTML DOM into an infoset</a></li>
     <li><a href=#an-introduction-to-error-handling-and-strange-cases-in-the-parser><span class=secno>12.2.8 </span>An introduction to error handling and strange cases in the parser</a>
      <ol>
       <li><a href=#misnested-tags:-b-i-/b-/i><span class=secno>12.2.8.1 </span>Misnested tags: &lt;b&gt;&lt;i&gt;&lt;/b&gt;&lt;/i&gt;</a></li>
       <li><a href=#misnested-tags:-b-p-/b-/p><span class=secno>12.2.8.2 </span>Misnested tags: &lt;b&gt;&lt;p&gt;&lt;/b&gt;&lt;/p&gt;</a></li>
       <li><a href=#unexpected-markup-in-tables><span class=secno>12.2.8.3 </span>Unexpected markup in tables</a></li>
       <li><a href=#scripts-that-modify-the-page-as-it-is-being-parsed><span class=secno>12.2.8.4 </span>Scripts that modify the page as it is being parsed</a></li>
       <li><a href=#the-execution-of-scripts-that-are-moving-across-multiple-documents><span class=secno>12.2.8.5 </span>The execution of scripts that are moving across multiple documents</a></li>
       <li><a href=#unclosed-formatting-elements><span class=secno>12.2.8.6 </span>Unclosed formatting elements</a></ol></ol></li>
   <li><a href=#serializing-html-fragments><span class=secno>12.3 </span>Serializing HTML fragments</a></li>
   <li><a href=#parsing-html-fragments><span class=secno>12.4 </span>Parsing HTML fragments</a></li>
   <li><a href=#named-character-references><span class=secno>12.5 </span>Named character references</a></ol></li>
 <li><a href=#the-xhtml-syntax><span class=secno>13 </span>The XHTML syntax</a>
  <ol>
   <li><a href=#writing-xhtml-documents><span class=secno>13.1 </span>Writing XHTML documents</a></li>
   <li><a href=#parsing-xhtml-documents><span class=secno>13.2 </span>Parsing XHTML documents</a></li>
   <li><a href=#serializing-xhtml-fragments><span class=secno>13.3 </span>Serializing XHTML fragments</a></li>
   <li><a href=#parsing-xhtml-fragments><span class=secno>13.4 </span>Parsing XHTML fragments</a></ol></li>
 <li><a href=#rendering><span class=secno>14 </span>Rendering</a>
  <ol>
   <li><a href=#introduction-14><span class=secno>14.1 </span>Introduction</a></li>
   <li><a href=#the-css-user-agent-style-sheet-and-presentational-hints><span class=secno>14.2 </span>The CSS user agent style sheet and presentational hints</a></li>
   <li><a href=#non-replaced-elements><span class=secno>14.3 </span>Non-replaced elements</a>
    <ol>
     <li><a href=#hidden-elements><span class=secno>14.3.1 </span>Hidden elements</a></li>
     <li><a href=#the-page><span class=secno>14.3.2 </span>The page</a></li>
     <li><a href=#flow-content-1><span class=secno>14.3.3 </span>Flow content</a></li>
     <li><a href=#phrasing-content-1><span class=secno>14.3.4 </span>Phrasing content</a></li>
     <li><a href=#bidi-rendering><span class=secno>14.3.5 </span>Bidirectional text</a></li>
     <li><a href=#quotes><span class=secno>14.3.6 </span>Quotes</a></li>
     <li><a href=#sections-and-headings><span class=secno>14.3.7 </span>Sections and headings</a></li>
     <li><a href=#lists><span class=secno>14.3.8 </span>Lists</a></li>
     <li><a href=#tables><span class=secno>14.3.9 </span>Tables</a></li>
     <li><a href=#margin-collapsing-quirks><span class=secno>14.3.10 </span>Margin collapsing quirks</a></li>
     <li><a href=#form-controls><span class=secno>14.3.11 </span>Form controls</a></li>
     <li><a href=#the-hr-element-0><span class=secno>14.3.12 </span>The <code>hr</code> element</a></li>
     <li><a href=#the-fieldset-and-legend-elements><span class=secno>14.3.13 </span>The <code>fieldset</code> and <code>legend</code> elements</a></ol></li>
   <li><a href=#replaced-elements><span class=secno>14.4 </span>Replaced elements</a>
    <ol>
     <li><a href=#embedded-content-rendering-rules><span class=secno>14.4.1 </span>Embedded content</a></li>
     <li><a href=#images-0><span class=secno>14.4.2 </span>Images</a></li>
     <li><a href=#attributes-for-embedded-content-and-images><span class=secno>14.4.3 </span>Attributes for embedded content and images</a></li>
     <li><a href=#image-maps-0><span class=secno>14.4.4 </span>Image maps</a></ol></li>
   <li><a href=#bindings><span class=secno>14.5 </span>Bindings</a>
    <ol>
     <li><a href=#introduction-15><span class=secno>14.5.1 </span>Introduction</a></li>
     <li><a href=#the-button-element-0><span class=secno>14.5.2 </span>The <code>button</code> element</a></li>
     <li><a href=#the-details-element-0><span class=secno>14.5.3 </span>The <code>details</code> element</a></li>
     <li><a href=#the-input-element-as-a-text-entry-widget><span class=secno>14.5.4 </span>The <code>input</code> element as a text entry widget</a></li>
     <li><a href=#the-input-element-as-domain-specific-widgets><span class=secno>14.5.5 </span>The <code>input</code> element as domain-specific widgets</a></li>
     <li><a href=#the-input-element-as-a-range-control><span class=secno>14.5.6 </span>The <code>input</code> element as a range control</a></li>
     <li><a href=#the-input-element-as-a-color-well><span class=secno>14.5.7 </span>The <code>input</code> element as a color well</a></li>
     <li><a href=#the-input-element-as-a-checkbox-and-radio-button-widgets><span class=secno>14.5.8 </span>The <code>input</code> element as a checkbox and radio button widgets</a></li>
     <li><a href=#the-input-element-as-a-file-upload-control><span class=secno>14.5.9 </span>The <code>input</code> element as a file upload control</a></li>
     <li><a href=#the-input-element-as-a-button><span class=secno>14.5.10 </span>The <code>input</code> element as a button</a></li>
     <li><a href=#the-marquee-element-0><span class=secno>14.5.11 </span>The <code>marquee</code> element</a></li>
     <li><a href=#the-meter-element-0><span class=secno>14.5.12 </span>The <code>meter</code> element</a></li>
     <li><a href=#the-progress-element-0><span class=secno>14.5.13 </span>The <code>progress</code> element</a></li>
     <li><a href=#the-select-element-0><span class=secno>14.5.14 </span>The <code>select</code> element</a></li>
     <li><a href=#the-textarea-element-0><span class=secno>14.5.15 </span>The <code>textarea</code> element</a></li>
     <li><a href=#the-keygen-element-0><span class=secno>14.5.16 </span>The <code>keygen</code> element</a></ol></li>
   <li><a href=#frames-and-framesets><span class=secno>14.6 </span>Frames and framesets</a></li>
   <li><a href=#interactive-media><span class=secno>14.7 </span>Interactive media</a>
    <ol>
     <li><a href=#links,-forms,-and-navigation><span class=secno>14.7.1 </span>Links, forms, and navigation</a></li>
     <li><a href=#the-title-attribute-0><span class=secno>14.7.2 </span>The <code title=attr-title>title</code> attribute</a></li>
     <li><a href=#editing-hosts><span class=secno>14.7.3 </span>Editing hosts</a></li>
     <li><a href=#text-rendered-in-native-user-interfaces><span class=secno>14.7.4 </span>Text rendered in native user interfaces</a></ol></li>
   <li><a href=#print-media><span class=secno>14.8 </span>Print media</a></li>
   <li><a href=#unstyled-xml-documents><span class=secno>14.9 </span>Unstyled XML documents</a></ol></li>
 <li><a href=#obsolete><span class=secno>15 </span>Obsolete features</a>
  <ol>
   <li><a href=#obsolete-but-conforming-features><span class=secno>15.1 </span>Obsolete but conforming features</a>
    <ol>
     <li><a href=#warnings-for-obsolete-but-conforming-features><span class=secno>15.1.1 </span>Warnings for obsolete but conforming features</a></ol></li>
   <li><a href=#non-conforming-features><span class=secno>15.2 </span>Non-conforming features</a></li>
   <li><a href=#requirements-for-implementations><span class=secno>15.3 </span>Requirements for implementations</a>
    <ol>
     <li><a href=#the-applet-element><span class=secno>15.3.1 </span>The <code>applet</code> element</a></li>
     <li><a href=#the-marquee-element><span class=secno>15.3.2 </span>The <code>marquee</code> element</a></li>
     <li><a href=#frames><span class=secno>15.3.3 </span>Frames</a></li>
     <li><a href=#other-elements,-attributes-and-apis><span class=secno>15.3.4 </span>Other elements, attributes and APIs</a></ol></ol></li>
 <li><a href=#iana><span class=secno>16 </span>IANA considerations</a>
  <ol>
   <li><a href=#text/html><span class=secno>16.1 </span><code>text/html</code></a></li>
   <li><a href=#multipart/x-mixed-replace><span class=secno>16.2 </span><code>multipart/x-mixed-replace</code></a></li>
   <li><a href=#application/xhtml+xml><span class=secno>16.3 </span><code>application/xhtml+xml</code></a></li>
   <li><a href=#application/x-www-form-urlencoded><span class=secno>16.4 </span><code>application/x-www-form-urlencoded</code></a></li>
   <li><a href=#text/cache-manifest><span class=secno>16.5 </span><code>text/cache-manifest</code></a></li>
   <li><a href=#text/ping><span class=secno>16.6 </span><code>text/ping</code></a></li>
   <li><a href=#application/microdata+json><span class=secno>16.7 </span><code>application/microdata+json</code></a></li>
   <li><a href=#ping-from><span class=secno>16.8 </span><code>Ping-From</code></a></li>
   <li><a href=#ping-to><span class=secno>16.9 </span><code>Ping-To</code></a></li>
   <li><a href=#web+-scheme-prefix><span class=secno>16.10 </span><code>web+</code> scheme prefix</a></ol></li>
 <li><a href=#index class=no-num>Index</a>
  <ol>
   <li><a href=#elements-1 class=no-num>Elements</a></li>
   <li><a href=#element-content-categories class=no-num>Element content categories</a></li>
   <li><a href=#attributes-1 class=no-num>Attributes</a></li>
   <li><a href=#element-interfaces class=no-num>Element Interfaces</a></li>
   <li><a href=#all-interfaces class=no-num>All Interfaces</a></li>
   <li><a href=#events-0 class=no-num>Events</a></ol></li>
 <li><a href=#references class=no-num>References</a></li>
 <li><a href=#acknowledgments class=no-num>Acknowledgments</a></ol>
<!--end-toc-->
  <hr><!--
 ! http://lists.w3.org/Archives/Public/www-archive/2014Apr/0034.html
 !--><!--CLEANUP--><!-- color => colour in prose --><h2 id=introduction><span class=secno>1 </span>Introduction</h2>


  <h3 id=abstract><span class=secno>1.1 </span>Where does this specification fit?</h3>

  <p>This specification defines a big part of the Web platform, in lots of detail. Its place in the
  Web platform specification stack relative to other specifications can be best summed up as
  follows:</p>

  <p><img src=http://images.whatwg.org/abstract.png width=398 alt="It consists of everything else, above such core technologies as HTTP, URI/IRIs, DOM, XML, Unicode, and ECMAScript; below presentation-layer technologies like CSS and the NPAPI; and to the side of technologies like Geolocation, SVG, MathML, and XHR." height=359></p>



  <h3 id=is-this-html5?><span class=secno>1.2 </span>Is this HTML5?</h3><!--VERSION-->

  <p><i>This section is non-normative.</i></p>

  <p>In short: Yes.</p>

  <p>In more length: The term "HTML5" is widely used as a buzzword to refer to modern Web
  technologies, many of which (though by no means all) are developed at the WHATWG.</p>

  <p>The WHATWG work on HTML is all published in one specification

  (the one you are reading right now),
  parts of which are republished in an edition optimised for Web developers.

  </p>

  <p>The W3C also publishes parts of this specification as separate documents that are forked
  subsets of

  this specification (the HTML Living Standard).
  There are numerous differences between

  this specification (the HTML Living Standard)
  and the W3C forks; some minor, some major. Unfortunately these are not currently accurately
  documented anywhere, so there is no way to know which are intentional and which are not.</p>



  <h3 id=background><span class=secno>1.3 </span>Background</h3>

  <p><i>This section is non-normative.</i></p>

  <p>The World Wide Web's markup language has always been HTML. HTML was primarily designed as a
  language for semantically describing scientific documents, although its general design and
  adaptations over the years have enabled it to be used to describe a number of other types of
  documents.</p>

  <p>The main area that has not been adequately addressed by HTML is a vague subject referred to as
  Web Applications. This standard attempts to rectify this, while at the same time updating the HTML
  language to address issues raised in the past few years.</p>


  <h3 id=audience><span class=secno>1.4 </span>Audience</h3>

  <p><i>This section is non-normative.</i></p>

  <p>This specification is intended for authors of documents and scripts that use the features
  defined in this specification<span class=impl>, implementors of tools that operate on pages that
  use the features defined in this specification, and individuals wishing to establish the
  correctness of documents or implementations with respect to the requirements of this
  specification</span>.</p>

  <p>This document is probably not suited to readers who do not already have at least a passing
  familiarity with Web technologies, as in places it sacrifices clarity for precision, and brevity
  for completeness. More approachable tutorials and authoring guides can provide a gentler
  introduction to the topic.</p>

  <p>In particular, familiarity with the basics of DOM is necessary for a complete understanding of
  some of the more technical parts of this specification. An understanding of Web IDL, HTTP, XML,
  Unicode, character encodings, JavaScript, and CSS will also be helpful in places but is not
  essential.</p>


  <h3 id=scope><span class=secno>1.5 </span>Scope</h3>

  <p><i>This section is non-normative.</i></p>

  <p>This specification is limited to providing a semantic-level markup language and associated
  semantic-level scripting APIs for authoring accessible pages on the Web ranging from static
  documents to dynamic applications.</p>

  <p>The scope of this specification does not include providing mechanisms for media-specific
  customization of presentation (although default rendering rules for Web browsers are included at
  the end of this specification, and several mechanisms for hooking into CSS are provided as part of
  the language).</p>

  <p>The scope of this specification is not to describe an entire operating system. In particular,
  hardware configuration software, image manipulation tools, and applications that users would be
  expected to use with high-end workstations on a daily basis are out of scope. In terms of
  applications, this specification is targeted specifically at applications that would be expected
  to be used by users on an occasional basis, or regularly but from disparate locations, with low
  CPU requirements. Examples of such applications include online purchasing systems, searching
  systems, games (especially multiplayer online games), public telephone books or address books,
  communications software (e-mail clients, instant messaging clients, discussion software), document
  editing software, etc.</p>


  <h3 id=history-1><span class=secno>1.6 </span>History</h3>

  <p><i>This section is non-normative.</i></p>

  <p>For its first five years (1990-1995), HTML went through a number of revisions and experienced a
  number of extensions, primarily hosted first at CERN, and then at the IETF.</p>

  <p>With the creation of the W3C, HTML's development changed venue again. A first abortive attempt
  at extending HTML in 1995 known as HTML 3.0 then made way to a more pragmatic approach known as
  HTML 3.2, which was completed in 1997. HTML4 quickly followed later that same year.</p>

  <p>The following year, the W3C membership decided to stop evolving HTML and instead begin work on
  an XML-based equivalent, called XHTML. <!-- http://www.w3.org/MarkUp/future/#summary --> This
  effort started with a reformulation of HTML4 in XML, known as XHTML 1.0, which added no new
  features except the new serialization, and which was completed in 2000. After XHTML 1.0, the W3C's
  focus turned to making it easier for other working groups to extend XHTML, under the banner of
  XHTML Modularization. In parallel with this, the W3C also worked on a new language that was not
  compatible with the earlier HTML and XHTML languages, calling it XHTML2.</p>

  <p>Around the time that HTML's evolution was stopped in 1998, parts of the API for HTML developed
  by browser vendors were specified and published under the name DOM Level 1 (in 1998) and DOM Level
  2 Core and DOM Level 2 HTML (starting in 2000 and culminating in 2003). These efforts then petered
  out, with some DOM Level 3 specifications published in 2004 but the working group being closed
  before all the Level 3 drafts were completed.</p>

  <p>In 2003, the publication of XForms, a technology which was positioned as the next generation of
  Web forms, sparked a renewed interest in evolving HTML itself, rather than finding replacements
  for it. This interest was borne from the realization that XML's deployment as a Web technology was
  limited to entirely new technologies (like RSS and later Atom), rather than as a replacement for
  existing deployed technologies (like HTML).</p>

  <p>A proof of concept to show that it was possible to extend HTML4's forms to provide many of the
  features that XForms 1.0 introduced, without requiring browsers to implement rendering engines
  that were incompatible with existing HTML Web pages, was the first result of this renewed
  interest. At this early stage, while the draft was already publicly available, and input was
  already being solicited from all sources, the specification was only under Opera Software's
  copyright.</p>

  <p>The idea that HTML's evolution should be reopened was tested at a W3C workshop in 2004, where
  some of the principles that underlie the HTML5 work (described below), as well as the
  aforementioned early draft proposal covering just forms-related features, were presented to the
  W3C jointly by Mozilla and Opera. The proposal was rejected on the grounds that the proposal
  conflicted with the previously chosen direction for the Web's evolution; the W3C staff and
  membership voted to continue developing XML-based replacements instead.</p>

  <p>Shortly thereafter, Apple, Mozilla, and Opera jointly announced their intent to continue
  working on the effort under the umbrella of a new venue called the WHATWG. A public mailing list
  was created, and the draft was moved to the WHATWG site. The copyright was subsequently amended to
  be jointly owned by all three vendors, and to allow reuse of the specification.</p>

  <p>The WHATWG was based on several core principles, in particular that technologies need to be
  backwards compatible, that specifications and implementations need to match even if this means
  changing the specification rather than the implementations, and that specifications need to be
  detailed enough that implementations can achieve complete interoperability without
  reverse-engineering each other.</p>

  <p>The latter requirement in particular required that the scope of the HTML5 specification include
  what had previously been specified in three separate documents: HTML4, XHTML1, and DOM2 HTML. It
  also meant including significantly more detail than had previously been considered the norm.</p>

  <p>In 2006, the W3C indicated an interest to participate in the development of HTML5 after all,
  and in 2007 formed a working group chartered to work with the WHATWG on the development of the
  HTML5 specification. Apple, Mozilla, and Opera allowed the W3C to publish the specification under
  the W3C copyright, while keeping a version with the less restrictive license on the WHATWG
  site.</p>

  <p>For a number of years, both groups then worked together. In 2011, however, the groups came to
  the conclusion that they had different goals: the W3C wanted to publish a "finished" version of
  "HTML5", while the WHATWG wanted to continue working on a Living Standard for HTML, continuously
  maintaining the specification rather than freezing it in a state with known problems, and adding
  new features as needed to evolve the platform.</p>

  <p>Since then, the WHATWG has been working on this specification (amongst others), and the W3C has
  been copying fixes made by the WHATWG into their fork of the document, as well as making other
  changes, some intentional and some not, with no documentation listing or explaining the
  differences.</p>




  <h3 id=design-notes><span class=secno>1.7 </span>Design notes</h3>

  <p><i>This section is non-normative.</i></p>

  <p>It must be admitted that many aspects of HTML appear at first glance to be nonsensical and
  inconsistent.</p>

  <p>HTML, its supporting DOM APIs, as well as many of its supporting technologies, have been
  developed over a period of several decades by a wide array of people with different priorities
  who, in many cases, did not know of each other's existence.</p>

  <p>Features have thus arisen from many sources, and have not always been designed in especially
  consistent ways. Furthermore, because of the unique characteristics of the Web, implementation
  bugs have often become de-facto, and now de-jure, standards, as content is often unintentionally
  written in ways that rely on them before they can be fixed.</p>

  <p>Despite all this, efforts have been made to adhere to certain design goals. These are described
  in the next few subsections.</p>



  <h4 id=serializability-of-script-execution><span class=secno>1.7.1 </span>Serializability of script execution</h4>

  <p><i>This section is non-normative.</i></p>

  <p>To avoid exposing Web authors to the complexities of multithreading, the HTML and DOM APIs are
  designed such that no script can ever detect the simultaneous execution of other scripts. Even
  with <a href=#worker title=Worker>workers</a>, the intent is that the behavior of implementations can
  be thought of as completely serializing the execution of all scripts in all <a href=#browsing-context title="browsing
  context">browsing contexts</a>.</p>

  <p class=note>The <code title=dom-navigator-yieldForStorageUpdates><a href=#dom-navigator-yieldforstorageupdates>navigator.yieldForStorageUpdates()</a></code> method, in
  this model, is equivalent to allowing other scripts to run while the calling script is
  blocked.</p>



  <h4 id=compliance-with-other-specifications><span class=secno>1.7.2 </span>Compliance with other specifications</h4>

  <p><i>This section is non-normative.</i></p>

  <p>This specification interacts with and relies on a wide variety of other specifications. In
  certain circumstances, unfortunately, conflicting needs have led to this specification violating
  the requirements of these other specifications. Whenever this has occurred, the transgressions
  have each been noted as a "<dfn id=willful-violation>willful violation</dfn>", and the reason for the violation has
  been noted.</p>



  <h4 id=extensibility><span class=secno>1.7.3 </span>Extensibility</h4>

  <p><i>This section is non-normative.</i></p>

  <p>HTML has a wide array of extensibility mechanisms that can be used for adding semantics in a
  safe manner:</p>

  <ul><li><p>Authors can use the <code title=attr-class><a href=#classes>class</a></code> attribute to extend elements,
   effectively creating their own elements, while using the most applicable existing "real" HTML
   element, so that browsers and other tools that don't know of the extension can still support it
   somewhat well. This is the tack used by microformats, for example.</li>

   <li><p>Authors can include data for inline client-side scripts or server-side site-wide scripts
   to process using the <code title=attr-data-*><a href=#attr-data-*>data-*=""</a></code> attributes. These are guaranteed
   to never be touched by browsers, and allow scripts to include data on HTML elements that scripts
   can then look for and process.</li>

   <li><p>Authors can use the <code title=meta><a href=#the-meta-element>&lt;meta name="" content=""&gt;</a></code> mechanism to
   include page-wide metadata by registering <a href=#concept-meta-extensions title=concept-meta-extensions>extensions to
   the predefined set of metadata names</a>.</li>

   <li><p>Authors can use the <code title=attr-hyperlink-rel><a href=#attr-hyperlink-rel>rel=""</a></code> mechanism to annotate
   links with specific meanings by registering <a href=#concept-rel-extensions title=concept-rel-extensions>extensions to
   the predefined set of link types</a>. This is also used by microformats.</li>

   <li><p>Authors can embed raw data using the <code title=script><a href=#the-script-element>&lt;script type=""&gt;</a></code>
   mechanism with a custom type, for further handling by inline or server-side scripts.</li>

   <li><p>Authors can create <a href=#plugin title=plugin>plugins</a> and invoke them using the
   <code><a href=#the-embed-element>embed</a></code> element. This is how Flash works.</li>

   <li><p>Authors can extend APIs using the JavaScript prototyping mechanism. This is widely used by
   script libraries, for instance.</li>

   <li><p>Authors can use the microdata feature (the <code title=attr-itemscope><a href=#attr-itemscope>itemscope=""</a></code> and <code title=attr-itemprop><a href=#names:-the-itemprop-attribute>itemprop=""</a></code>
   attributes) to embed nested name-value pairs of data to be shared with other applications and
   sites.</li>

  </ul><h3 id=html-vs-xhtml><span class=secno>1.8 </span>HTML vs XHTML</h3>

  <p><i>This section is non-normative.</i></p>

  <p>This specification defines an abstract language for describing documents and applications, and
  some APIs for interacting with in-memory representations of resources that use this language.</p>

  <p>The in-memory representation is known as "DOM HTML", or "the DOM" for short.</p>

  <p>There are various concrete syntaxes that can be used to transmit resources that use this
  abstract language, two of which are defined in this specification.</p>

  <p>The first such concrete syntax is the HTML syntax. This is the format suggested for most
  authors. It is compatible with most legacy Web browsers. If a document is transmitted with the
  <code><a href=#text/html>text/html</a></code> <a href=#mime-type>MIME type</a>, then it will be processed as an HTML document by
  Web browsers. This specification defines the latest HTML syntax, known simply as "HTML".</p>

  <p>The second concrete syntax is the XHTML syntax, which is an application of XML. When a document
  is transmitted with an <a href=#xml-mime-type>XML MIME type</a>, such as <code><a href=#application/xhtml+xml>application/xhtml+xml</a></code>,
  then it is treated as an XML document by Web browsers, to be parsed by an XML processor. Authors
  are reminded that the processing for XML and HTML differs; in particular, even minor syntax errors
  will prevent a document labeled as XML from being rendered fully, whereas they would be ignored in
  the HTML syntax. This specification defines the latest XHTML syntax, known simply as "XHTML".</p>

  <p>The DOM, the HTML syntax, and the XHTML syntax cannot all represent the same content. For
  example, namespaces cannot be represented using the HTML syntax, but they are supported in the DOM
  and in the XHTML syntax. Similarly, documents that use the <code><a href=#the-noscript-element>noscript</a></code> feature can be
  represented using the HTML syntax, but cannot be represented with the DOM or in the XHTML syntax.
  Comments that contain the string "<code title="">--&gt;</code>" can only be represented in the
  DOM, not in the HTML and XHTML syntaxes.</p>


  <h3 id=structure-of-this-specification><span class=secno>1.9 </span>Structure of this specification</h3>

  <p><i>This section is non-normative.</i></p>

  <p>This specification is divided into the following major sections:</p>

  <dl><dt><a href=#introduction>Introduction</a></dt>

   <dd>Non-normative materials providing a context for the HTML standard.</dd>


   <dt><a href=#infrastructure>Common infrastructure</a></dt>

   <dd>The conformance classes, algorithms, definitions, and the common underpinnings of the rest of
   the specification.</dd>


   <dt><a href=#dom>Semantics, structure, and APIs of HTML documents</a></dt>

   <dd>Documents are built from elements. These elements form a tree using the DOM. This section
   defines the features of this DOM, as well as introducing the features common to all elements, and
   the concepts used in defining elements.</dd>


   <dt><a href=#semantics>The elements of HTML</a></dt>

   <dd>Each element has a predefined meaning, which is explained in this section. Rules for authors
   on how to use the element<span class=impl>, along with user agent requirements for how to
   handle each element,</span> are also given. This includes large signature features of HTML such
   as video playback and subtitles, form controls and form submission, and a 2D graphics API known
   as the HTML canvas.</dd>


   <dt><a href=#microdata>Microdata</a></dt>

   <dd>This specification introduces a mechanism for adding machine-readable annotations to
   documents, so that tools can extract trees of name-value pairs from the document. This section
   describes this mechanism<span class=impl> and some algorithms that can be used to convert HTML
   documents into other formats</span>. This section also defines some sample Microdata vocabularies
   for contact information, calendar events, and licensing works.</dd>


   <dt><a href=#editing>User interaction</a></dt>

   <dd>HTML documents can provide a number of mechanisms for users to interact with and modify
   content, which are described in this section, such as how focus works, and drag-and-drop.</dd>


   <dt><a href=#browsers>Loading Web pages</a></dt>

   <dd>HTML documents do not exist in a vacuum &mdash; this section defines many of the features
   that affect environments that deal with multiple pages, such as Web browsers and offline
   caching of Web applications.</dd>


   <dt><a href=#webappapis>Web application APIs</a></dt>

   <dd>This section introduces basic features for scripting of applications in HTML.</dd>


   <dt><a href=#workers>Web workers</a></dt>

   <dd>This section defines an API for background threads in JavaScript.</dd>


   <dt><a href=#comms>The communication APIs</a></dt>

   <dd>This section describes some mechanisms that applications written in HTML can use to
   communicate with other applications from different domains running on the same client. It also
   introduces a server-push event stream mechanism known as Server Sent Events or
   <code><a href=#eventsource>EventSource</a></code>, and a two-way full-duplex socket protocol for scripts known as Web
   Sockets.

   </dd>


   <dt><a href=#webstorage>Web storage</a></dt>

   <dd>This section defines a client-side storage mechanism based on name-value pairs.</dd>


   <dt><a href=#syntax>The HTML syntax</a></dt>
   <dt><a href=#xhtml>The XHTML syntax</a></dt>

   <dd>All of these features would be for naught if they couldn't be represented in a serialized
   form and sent to other people, and so these sections define the syntaxes of HTML and XHTML<span class=impl>, along with rules for how to parse content using those syntaxes</span>.</dd>


   <dt><a href=#rendering>Rendering</a></dt>

   <dd>This section defines the default rendering rules for Web browsers.</dd>


  </dl><p>There are also some appendices, listing <a href=#obsolete>obsolete features</a> and <a href=#iana>IANA considerations</a>, and several indices.</p>



  <h4 id=how-to-read-this-specification><span class=secno>1.9.1 </span>How to read this specification</h4>

  <p>This specification should be read like all other specifications. First, it should be read
  cover-to-cover, multiple times. Then, it should be read backwards at least once. Then it should be
  read by picking random sections from the contents list and following all the cross-references.</p>

  <p>As described in the conformance requirements section below, this specification describes
  conformance criteria for a variety of conformance classes. In particular, there are conformance
  requirements that apply to <em>producers</em>, for example authors and the documents they create,
  and there are conformance requirements that apply to <em>consumers</em>, for example Web browsers.
  They can be distinguished by what they are requiring: a requirement on a producer states what is
  allowed, while a requirement on a consumer states how software is to act.</p>

  <div class=example>

   <p>For example, "the <code title="">foo</code> attribute's value must be a <a href=#valid-integer>valid
   integer</a>" is a requirement on producers, as it lays out the allowed values; in contrast,
   the requirement "the <code title="">foo</code> attribute's value must be parsed using the
   <a href=#rules-for-parsing-integers>rules for parsing integers</a>" is a requirement on consumers, as it describes how to
   process the content.</p>

  </div>

  <p><strong>Requirements on producers have no bearing whatsoever on consumers.</strong></p>

  <div class=example>

   <p>Continuing the above example, a requirement stating that a particular attribute's value is
   constrained to being a <a href=#valid-integer>valid integer</a> emphatically does <em>not</em> imply anything
   about the requirements on consumers. It might be that the consumers are in fact required to treat
   the attribute as an opaque string, completely unaffected by whether the value conforms to the
   requirements or not. It might be (as in the previous example) that the consumers are required to
   parse the value using specific rules that define how invalid (non-numeric in this case) values
   are to be processed.</p>

  </div>



  <h4 id=typographic-conventions><span class=secno>1.9.2 </span>Typographic conventions</h4>

  <p>This is a definition, requirement, or explanation.</p>

  <p class=note>This is a note.</p>

  <p class=example>This is an example.</p>

  <p class=XXX>This is an open issue.</p>

  <p class=warning>This is a warning.</p>

  <pre class="idl extract">interface <dfn title="">Example</dfn> {
  // this is an IDL definition
};</pre>

  <dl class=domintro><dt><var title="">variable</var> = <var title="">object</var> . <code title="">method</code>( [ <var title="">optionalArgument</var> ] )</dt>

   <dd>

    <p>This is a note to authors describing the usage of an interface.</p>

   </dd>

  </dl><pre class=css>/* this is a CSS fragment */</pre>

  <p>The defining instance of a term is marked up like <dfn id=x-this title=x-this>this</dfn>. Uses of that
  term are marked up like <a href=#x-this title=x-this>this</a> or like <i title=x-this><a href=#x-this>this</a></i>.</p>

  <p>The defining instance of an element, attribute, or API is marked up like <dfn id=x-that title=x-that><code>this</code></dfn>. References to that element, attribute, or API are marked
  up like <code title=x-that><a href=#x-that>this</a></code>.</p>

  <p>Other code fragments are marked up <code title="">like this</code>.</p>

  <p>Variables are marked up like <var title="">this</var>.</p>

  <!--<p class="impl">This is an implementation requirement.</p>-->

  <p>In an algorithm, steps in <a href=#synchronous-section title="synchronous section">synchronous sections</a> are
  marked with &#x231b;.</p>

  <p>In some cases, requirements are given in the form of lists with conditions and corresponding
  requirements. In such cases, the requirements that apply to a condition are always the first set
  of requirements that follow the condition, even in the case of there being multiple sets of
  conditions for those requirements. Such cases are presented as follows:</p>

  <dl class=switch><dt>This is a condition
   <dt>This is another condition
   </dt><dd>This is the requirement that applies to the conditions above.

   <dt>This is a third condition
   <dd>This is the requirement that applies to the third condition.

  </dl><h3 id=fingerprint><span class=secno>1.10 </span>Privacy concerns</h3>

  <p><i>This section is non-normative.</i></p>

  <p>Some features of HTML trade user convenience for a measure of user privacy.</p>

  <p>In general, due to the Internet's architecture, a user can be distinguished from another by the
  user's IP address. IP addresses do not perfectly match to a user; as a user moves from device to
  device, or from network to network, their IP address will change; similarly, NAT routing, proxy
  servers, and shared computers enable packets that appear to all come from a single IP address to
  actually map to multiple users. Technologies such as onion routing can be used to further
  anonymise requests so that requests from a single user at one node on the Internet appear to come
  from many disparate parts of the network.</p>

  <p>However, the IP address used for a user's requests is not the only mechanism by which a user's
  requests could be related to each other. Cookies, for example, are designed specifically to enable
  this, and are the basis of most of the Web's session features that enable you to log into a site
  with which you have an account.</p>

  <p>There are other mechanisms that are more subtle. Certain characteristics of a user's system can
  be used to distinguish groups of users from each other; by collecting enough such information, an
  individual user's browser's "digital fingerprint" can be computed, which can be as good, if not
  better, as an IP address in ascertaining which requests are from the same user.</p>

  <p>Grouping requests in this manner, especially across multiple sites, can be used for both benign
  (and even arguably positive) purposes, as well as for malevolent purposes. An example of a
  reasonably benign purpose would be determining whether a particular person seems to prefer sites
  with dog illustrations as opposed to sites with cat illustrations (based on how often they visit
  the sites in question) and then automatically using the preferred illustrations on subsequent
  visits to participating sites. Malevolent purposes, however, could include governments combining
  information such as the person's home address (determined from the addresses they use when getting
  driving directions on one site) with their apparent political affiliations (determined by
  examining the forum sites that they participate in) to determine whether the person should be
  prevented from voting in an election.</p>

  <p>Since the malevolent purposes can be remarkably evil, user agent implementors are encouraged to
  consider how to provide their users with tools to minimise leaking information that could be used
  to fingerprint a user.</p>

  <p>Unfortunately, as the first paragraph in this section implies, sometimes there is great benefit
  to be derived from exposing the very information that can also be used for fingerprinting
  purposes, so it's not as easy as simply blocking all possible leaks. For instance, the ability to
  log into a site to post under a specific identity requires that the user's requests be
  identifiable as all being from the same user, more or less by definition. More subtly, though,
  information such as how wide text is, which is necessary for many effects that involve drawing
  text onto a canvas (e.g. any effect that involves drawing a border around the text) also leaks
  information that can be used to group a user's requests. (In this case, by potentially exposing,
  via a brute force search, which fonts a user has installed, information which can vary
  considerably from user to user.)</p>

  <p>Features in this specification which can be <dfn id=fingerprinting-vector title="fingerprinting vector">used to
  fingerprint the user</dfn> are marked as this paragraph is.
  <a href=#fingerprinting-vector class=fingerprint title="fingerprinting vector"><img src=http://images.whatwg.org/fingerprint.png width=46 alt="(This is a fingerprinting vector.)" height=64></a>
  </p>

  <p>Other features in the platform can be used for the same purpose, though, including, though not
  limited to:</p>

  <ul><li>The exact list of which features a user agents supports.</li>

   <li>The maximum allowed stack depth for recursion in script.</li>

   <li>Features that describe the user's environment, like Media Queries and the <code><a href=#screen>Screen</a></code>
   object. <a href=#refsMQ>[MQ]</a> <a href=#refsCSSOMVIEW>[CSSOMVIEW]</a></li>

   <li>The user's time zone.</li>

  </ul><h3 id=a-quick-introduction-to-html><span class=secno>1.11 </span>A quick introduction to HTML</h3>

  <p><i>This section is non-normative.</i></p>

  <p>A basic HTML document looks like this:</p>

  <pre id=intro-early-example>&lt;!DOCTYPE html&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Sample page&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Sample page&lt;/h1&gt;
  &lt;p&gt;This is a &lt;a href="demo.html"&gt;simple&lt;/a&gt; sample.&lt;/p&gt;
  &lt;!-- this is a comment --&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  <p>HTML documents consist of a tree of elements and text. Each element is denoted in the source by
  a <a href=#syntax-start-tag title=syntax-start-tag>start tag</a>, such as "<code title="">&lt;body&gt;</code>", and
  an <a href=#syntax-end-tag title=syntax-end-tag>end tag</a>, such as "<code title="">&lt;/body&gt;</code>".
  (Certain start tags and end tags can in certain cases be <a href=#syntax-tag-omission title=syntax-tag-omission>omitted</a> and are implied by other tags.)</p>

  <p>Tags have to be nested such that elements are all completely within each other, without
  overlapping:</p>

  <pre class=bad>&lt;p&gt;This is &lt;em&gt;very &lt;strong&gt;wrong&lt;/em&gt;!&lt;/strong&gt;&lt;/p&gt;</pre>
  <pre>&lt;p&gt;This &lt;em&gt;is &lt;strong&gt;correct&lt;/strong&gt;.&lt;/em&gt;&lt;/p&gt;</pre>

  <p>This specification defines a set of elements that can be used in HTML, along with rules about
  the ways in which the elements can be nested.</p>

  <p>Elements can have attributes, which control how the elements work. In the example below, there
  is a <a href=#hyperlink>hyperlink</a>, formed using the <code><a href=#the-a-element>a</a></code> element and its <code title=attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code> attribute:</p>

  <pre>&lt;a href="demo.html"&gt;simple&lt;/a&gt;</pre>

  <p><a href=#syntax-attributes title=syntax-attributes>Attributes</a> are placed inside the start tag, and consist
  of a <a href=#syntax-attribute-name title=syntax-attribute-name>name</a> and a <a href=#syntax-attribute-value title=syntax-attribute-value>value</a>, separated by an "<code title="">=</code>" character.
  The attribute value can remain <a href=#unquoted>unquoted</a> if it doesn't contain <a href=#space-character title="space character">space characters</a> or any of <code title="">"</code> <code title="">'</code> <code title="">`</code> <code title="">=</code> <code title="">&lt;</code> or
  <code title="">&gt;</code>. Otherwise, it has to be quoted using either single or double quotes.
  The value, along with the "<code title="">=</code>" character, can be omitted altogether if the
  value is the empty string.</p>

  <pre>&lt;!-- empty attributes --&gt;
&lt;input name=address disabled&gt;
&lt;input name=address disabled=""&gt;

&lt;!-- attributes with a value --&gt;
&lt;input name=address maxlength=200&gt;
&lt;input name=address maxlength='200'&gt;
&lt;input name=address maxlength="200"&gt;</pre>

  <p>HTML user agents (e.g. Web browsers) then <i>parse</i> this markup, turning it into a DOM
  (Document Object Model) tree. A DOM tree is an in-memory representation of a document.</p>

  <p>DOM trees contain several kinds of nodes, in particular a <code><a href=#documenttype>DocumentType</a></code> node,
  <code><a href=#element>Element</a></code> nodes, <code><a href=#text>Text</a></code> nodes, <code><a href=#comment-0>Comment</a></code> nodes, and in some cases
  <code><a href=#processinginstruction>ProcessingInstruction</a></code> nodes.</p>

  <p>The <a href=#intro-early-example>markup snippet at the top of this section</a> would be
  turned into the following DOM tree:</p>

  <ul class=domTree><li class=t10>DOCTYPE: <code title="">html</code><li class=t1><code><a href=#the-html-element>html</a></code><ul><li class=t1><code><a href=#the-head-element>head</a></code><ul><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;&blank;</span><li class=t1><code><a href=#the-title-element>title</a></code><ul><li class=t3><code>#text</code>: <span title="">Sample page</span></ul><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;</span></ul><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;</span><li class=t1><code><a href=#the-body-element>body</a></code><ul><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;&blank;</span><li class=t1><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h1</a></code><ul><li class=t3><code>#text</code>: <span title="">Sample page</span></ul><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;&blank;</span><li class=t1><code><a href=#the-p-element>p</a></code><ul><li class=t3><code>#text</code>: <span title="">This is a <!--grammar-check-override--></span><li class=t1><code><a href=#the-a-element>a</a></code> <span class=t2 title=""><code class="attribute name">href</code>="<code class="attribute value">demo.html</code>"</span><ul><li class=t3><code>#text</code>: <span title="">simple</span></ul><li class=t3><code>#text</code>: <span title=""> sample.</span></ul><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;&blank;</span><li class=t8><code>#comment</code>: <span title=""> this is a comment </span><li class=t3><code>#text</code>: <span title="">&#x23ce;&blank;&#x23ce;</span></ul></ul></ul><p>The <a href=#root-element>root element</a> of this tree is the <code><a href=#the-html-element>html</a></code> element, which is the
  element always found at the root of HTML documents. It contains two elements, <code><a href=#the-head-element>head</a></code>
  and <code><a href=#the-body-element>body</a></code>, as well as a <code><a href=#text>Text</a></code> node between them.</p>

  <p>There are many more <code><a href=#text>Text</a></code> nodes in the DOM tree than one would initially expect,
  because the source contains a number of spaces (represented here by "&blank;") and line breaks
  ("&#x23ce;") that all end up as <code><a href=#text>Text</a></code> nodes in the DOM. However, for historical
  reasons not all of the spaces and line breaks in the original markup appear in the DOM. In
  particular, all the whitespace before <code><a href=#the-head-element>head</a></code> start tag ends up being dropped silently,
  and all the whitespace after the <code><a href=#the-body-element>body</a></code> end tag ends up placed at the end of the
  <code><a href=#the-body-element>body</a></code>.</p>

  <p>The <code><a href=#the-head-element>head</a></code> element contains a <code><a href=#the-title-element>title</a></code> element, which itself contains a
  <code><a href=#text>Text</a></code> node with the text "Sample page". Similarly, the <code><a href=#the-body-element>body</a></code> element
  contains an <code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h1</a></code> element, a <code><a href=#the-p-element>p</a></code> element, and a comment.</p>

  <hr><p>This DOM tree can be manipulated from scripts in the page. Scripts (typically in JavaScript)
  are small programs that can be embedded using the <code><a href=#the-script-element>script</a></code> element or using <a href=#event-handler-content-attributes>event
  handler content attributes</a>. For example, here is a form with a script that sets the value
  of the form's <code><a href=#the-output-element>output</a></code> element to say "Hello World":</p>

  <pre>&lt;<a href=#the-form-element>form</a> <a href=#attr-form-name title=attr-form-name>name</a>="main"&gt;
 Result: &lt;<a href=#the-output-element>output</a> <a href=#attr-fe-name title=attr-fe-name>name</a>="result"&gt;&lt;/output&gt;
 &lt;<a href=#the-script-element>script</a>&gt;
  <a href=#document title=Document>document</a>.<a href=#dom-document-forms title=dom-document-forms>forms</a>.main.<a href=#dom-form-elements title=dom-form-elements>elements</a>.result.<a href=#dom-output-value title=dom-output-value>value</a> = 'Hello World';
 &lt;/script&gt;
&lt;/form&gt;</pre>

  <p>Each element in the DOM tree is represented by an object, and these objects have APIs so that
  they can be manipulated. For instance, a link (e.g. the <code><a href=#the-a-element>a</a></code> element in the tree above)
  can have its "<code title=attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code>" attribute changed in several
  ways:</p>

  <pre>var a = <a href=#document title=Document>document</a>.<a href=#dom-document-links title=dom-document-links>links</a>[0]; // obtain the first link in the document
a.<a href=#dom-url-href title=dom-url-href>href</a> = 'sample.html'; // change the destination URL of the link
a.<a href=#dom-url-protocol title=dom-url-protocol>protocol</a> = 'https'; // change just the scheme part of the URL
a.setAttribute('href', 'http://example.com/'); // change the content attribute directly</pre>

  <p>Since DOM trees are used as the way to represent HTML documents when they are processed and
  presented by implementations (especially interactive implementations like Web browsers), this
  specification is mostly phrased in terms of DOM trees, instead of the markup described above.</p>

  <hr><p>HTML documents represent a media-independent description of interactive content. HTML documents
  might be rendered to a screen, or through a speech synthesiser, or on a braille display. To
  influence exactly how such rendering takes place, authors can use a styling language such as
  CSS.</p>

  <p>In the following example, the page has been made yellow-on-blue using CSS.</p>

  <pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Sample styled page&lt;/title&gt;
  &lt;style&gt;
   body { background: navy; color: yellow; }
  &lt;/style&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Sample styled page&lt;/h1&gt;
  &lt;p&gt;This page is just a demo.&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  <p>For more details on how to use HTML, authors are encouraged to consult tutorials and guides.
  Some of the examples included in this specification might also be of use, but the novice author is
  cautioned that this specification, by necessity, defines the language with a level of detail that
  might be difficult to understand at first.</p>



<!--ADD-TOPIC:Security-->
  <h4 id=writing-secure-applications-with-html><span class=secno>1.11.1 </span>Writing secure applications with HTML</h4>

  <p><i>This section is non-normative.</i></p>

  <p>When HTML is used to create interactive sites, care needs to be taken to avoid introducing
  vulnerabilities through which attackers can compromise the integrity of the site itself or of the
  site's users.</p>

  <p>A comprehensive study of this matter is beyond the scope of this document, and authors are
  strongly encouraged to study the matter in more detail. However, this section attempts to provide
  a quick introduction to some common pitfalls in HTML application development.</p>

  <p>The security model of the Web is based on the concept of "origins", and correspondingly many of
  the potential attacks on the Web involve cross-origin actions. <a href=#refsORIGIN>[ORIGIN]</a></p>

  <dl><dt>Not validating user input</dt>
   <dt>Cross-site scripting (XSS)</dt>
   <dt>SQL injection</dt>

   <dd>

    <p>When accepting untrusted input, e.g. user-generated content such as text comments, values in
    URL parameters, messages from third-party sites, etc, it is imperative that the data be
    validated before use, and properly escaped when displayed. Failing to do this can allow a
    hostile user to perform a variety of attacks, ranging from the potentially benign, such as
    providing bogus user information like a negative age, to the serious, such as running scripts
    every time a user looks at a page that includes the information, potentially propagating the
    attack in the process, to the catastrophic, such as deleting all data in the server.</p>

    <p>When writing filters to validate user input, it is imperative that filters always be
    whitelist-based, allowing known-safe constructs and disallowing all other input. Blacklist-based
    filters that disallow known-bad inputs and allow everything else are not secure, as not
    everything that is bad is yet known (for example, because it might be invented in the
    future).</p>

    <div class=example>

     <p>For example, suppose a page looked at its URL's query string to determine what to display,
     and the site then redirected the user to that page to display a message, as in:</p>

     <pre>&lt;ul&gt;
 &lt;li&gt;&lt;a href="message.cgi?say=Hello"&gt;Say Hello&lt;/a&gt;
 &lt;li&gt;&lt;a href="message.cgi?say=Welcome"&gt;Say Welcome&lt;/a&gt;
 &lt;li&gt;&lt;a href="message.cgi?say=Kittens"&gt;Say Kittens&lt;/a&gt;
&lt;/ul&gt;</pre>

     <p>If the message was just displayed to the user without escaping, a hostile attacker could
     then craft a URL that contained a script element:</p>

     <pre>http://example.com/message.cgi?say=%3Cscript%3Ealert%28%27Oh%20no%21%27%29%3C/script%3E</pre>

     <p>If the attacker then convinced a victim user to visit this page, a script of the attacker's
     choosing would run on the page. Such a script could do any number of hostile actions, limited
     only by what the site offers: if the site is an e-commerce shop, for instance, such a script
     could cause the user to unknowingly make arbitrarily many unwanted purchases.</p>

     <p>This is called a cross-site scripting attack.</p>

    </div>

    <p>There are many constructs that can be used to try to trick a site into executing code. Here
    are some that authors are encouraged to consider when writing whitelist filters:</p>

    <ul><li>When allowing harmless-seeming elements like <code><a href=#the-img-element>img</a></code>, it is important to whitelist
     any provided attributes as well. If one allowed all attributes then an attacker could, for
     instance, use the <code title=handler-onload><a href=#handler-onload>onload</a></code> attribute to run arbitrary
     script.</li>

     <li>When allowing URLs to be provided (e.g. for links), the scheme of each URL also needs to be
     explicitly whitelisted, as there are many schemes that can be abused. The most prominent
     example is "<code title=javascript-protocol>javascript:</code>", but user agents can
     implement (and indeed, have historically implemented) others.</li> <!-- IE had vbscript:,
     Netscape had livescript:, etc. -->

     <li>Allowing a <code><a href=#the-base-element>base</a></code> element to be inserted means any <code><a href=#the-script-element>script</a></code> elements
     in the page with relative links can be hijacked, and similarly that any form submissions can
     get redirected to a hostile site.</li>

    </ul></dd>


   <dt>Cross-site request forgery (CSRF)</dt>

   <dd>

    <p>If a site allows a user to make form submissions with user-specific side-effects, for example
    posting messages on a forum under the user's name, making purchases, or applying for a passport,
    it is important to verify that the request was made by the user intentionally, rather than by
    another site tricking the user into making the request unknowingly.</p>

    <p>This problem exists because HTML forms can be submitted to other origins.</p>

    <p>Sites can prevent such attacks by populating forms with user-specific hidden tokens, or by
    checking <code title=http-origin>Origin</code> headers on all requests.</p>

   </dd>



   <dt>Clickjacking</dt>

   <dd>

    <p>A page that provides users with an interface to perform actions that the user might not wish
    to perform needs to be designed so as to avoid the possibility that users can be tricked into
    activating the interface.</p>

    <p>One way that a user could be so tricked is if a hostile site places the victim site in a
    small <code><a href=#the-iframe-element>iframe</a></code> and then convinces the user to click, for instance by having the user
    play a reaction game. Once the user is playing the game, the hostile site can quickly position
    the iframe under the mouse cursor just as the user is about to click, thus tricking the user
    into clicking the victim site's interface.</p>

    <p>To avoid this, sites that do not expect to be used in frames are encouraged to only enable
    their interface if they detect that they are not in a frame (e.g. by comparing the <code title=dom-window><a href=#dom-window>window</a></code> object to the value of the <code title=dom-top><a href=#dom-top>top</a></code>
    attribute).</p>

   </dd>

  </dl><!--REMOVE-TOPIC:Security--><h4 id=common-pitfalls-to-avoid-when-using-the-scripting-apis><span class=secno>1.11.2 </span>Common pitfalls to avoid when using the scripting APIs</h4>

  <p><i>This section is non-normative.</i></p>

  <p>Scripts in HTML have "run-to-completion" semantics, meaning that the browser will generally run
  the script uninterrupted before doing anything else, such as firing further events or continuing
  to parse the document.</p>

  <p>On the other hand, parsing of HTML files happens asynchronously and incrementally, meaning that
  the parser can pause at any point to let scripts run. This is generally a good thing, but it does
  mean that authors need to be careful to avoid hooking event handlers after the events could have
  possibly fired.</p>

  <p>There are two techniques for doing this reliably: use <a href=#event-handler-content-attributes>event handler content
  attributes</a>, or create the element and add the event handlers in the same script. The latter
  is safe because, as mentioned earlier, scripts are run to completion before further events can
  fire.</p>

  <div class=example>

   <p>One way this could manifest itself is with <code><a href=#the-img-element>img</a></code> elements and the <code title=event-load><a href=#event-load>load</a></code> event. The event could fire as soon as the element has been
   parsed, especially if the image has already been cached (which is common).</p>

   <p>Here, the author uses the <code title=handler-onload><a href=#handler-onload>onload</a></code> handler on an
   <code><a href=#the-img-element>img</a></code> element to catch the <code title=event-load><a href=#event-load>load</a></code> event:</p>

   <pre>&lt;img src="games.png" alt="Games" onload="gamesLogoHasLoaded(event)"&gt;</pre>

   <p>If the element is being added by script, then so long as the event handlers are added in the
   same script, the event will still not be missed:</p>

   <pre>&lt;script&gt;
 var img = new Image();
 img.src = 'games.png';
 img.alt = 'Games';
 img.onload = gamesLogoHasLoaded;
 // img.addEventListener('load', gamesLogoHasLoaded, false); // would work also
&lt;/script&gt;</pre>

   <p>However, if the author first created the <code><a href=#the-img-element>img</a></code> element and then in a separate
   script added the event listeners, there's a chance that the <code title=event-load><a href=#event-load>load</a></code>
   event would be fired in between, leading it to be missed:</p>

   <pre class=bad>&lt;!-- Do not use this style, it has a race condition! --&gt;
 &lt;img id="games" src="games.png" alt="Games"&gt;
 &lt;!-- the 'load' event might fire here while the parser is taking a
      break, in which case you will not see it! --&gt;
 &lt;script&gt;
  var img = document.getElementById('games');
  img.onload = gamesLogoHasLoaded; // might never fire!
 &lt;/script&gt;</pre>

  </div>



  <h4 id=how-to-catch-mistakes-when-writing-html:-validators-and-conformance-checkers><span class=secno>1.11.3 </span>How to catch mistakes when writing HTML: validators and conformance checkers</h4>

  <p><i>This section is non-normative.</i></p>

  <p>Authors are encouraged to make use of conformance checkers (also known as <i>validators</i>) to
  catch common mistakes. The WHATWG maintains a list of such tools at: <a href=http://validator.whatwg.org/>http://validator.whatwg.org/</a></p>



  <h3 id=conformance-requirements-for-authors><span class=secno>1.12 </span>Conformance requirements for authors</h3>

  <p><i>This section is non-normative.</i></p>

  <p>Unlike previous versions of the HTML specification, this specification defines in some detail
  the required processing for invalid documents as well as valid documents.</p> <!-- This has led to
  some questioning the purpose of conformance criteria: if there is no ambiguity in how something
  will be processed, why disallow it? -->

  <p>However, even though the processing of invalid content is in most cases well-defined,
  conformance requirements for documents are still important: in practice, interoperability (the
  situation in which all implementations process particular content in a reliable and identical or
  equivalent way) is not the only goal of document conformance requirements. This section details
  some of the more common reasons for still distinguishing between a conforming document and one
  with errors.</p>


  <h4 id=presentational-markup><span class=secno>1.12.1 </span>Presentational markup</h4>

  <p><i>This section is non-normative.</i></p>

  <p>The majority of presentational features from previous versions of HTML are no longer allowed.
  Presentational markup in general has been found to have a number of problems:</p>

  <dl><dt>The use of presentational elements leads to poorer accessibility</dt>

   <dd>

    <p>While it is possible to use presentational markup in a way that provides users of assistive
    technologies (ATs) with an acceptable experience (e.g. using ARIA), doing so is significantly
    more difficult than doing so when using semantically-appropriate markup. Furthermore, even using
    such techniques doesn't help make pages accessible for non-AT non-graphical users, such as users
    of text-mode browsers.</p>

    <p>Using media-independent markup, on the other hand, provides an easy way for documents to be
    authored in such a way that they work for more users (e.g. text browsers).</p>

   </dd>


   <dt>Higher cost of maintenance</dt>

   <dd>

    <p>It is significantly easier to maintain a site written in such a way that the markup is
    style-independent. For example, changing the color of a site that uses
    <code>&lt;font&nbsp;color=""&gt;</code> throughout requires changes across the entire site, whereas
    a similar change to a site based on CSS can be done by changing a single file.</p>

   </dd>


   <dt>Larger document sizes</dt>

   <dd>

    <p>Presentational markup tends to be much more redundant, and thus results in larger document
    sizes.</p>

   </dd>

  </dl><p>For those reasons, presentational markup has been removed from HTML in this version. This
  change should not come as a surprise; HTML4 deprecated presentational markup many years ago and
  provided a mode (HTML4 Transitional) to help authors move away from presentational markup; later,
  XHTML 1.1 went further and obsoleted those features altogether.</p>

  <p>The only remaining presentational markup features in HTML are the <code title=attr-style><a href=#the-style-attribute>style</a></code> attribute and the <code><a href=#the-style-element>style</a></code> element. Use of the <code title=attr-style><a href=#the-style-attribute>style</a></code> attribute is somewhat discouraged in production environments, but
  it can be useful for rapid prototyping (where its rules can be directly moved into a separate
  style sheet later) and for providing specific styles in unusual cases where a separate style sheet
  would be inconvenient. Similarly, the <code><a href=#the-style-element>style</a></code> element can be useful in syndication or
  for page-specific styles, but in general an external style sheet is likely to be more convenient
  when the styles apply to multiple pages.</p>

  <p>It is also worth noting that some elements that were previously presentational have been
  redefined in this specification to be media-independent: <code><a href=#the-b-element>b</a></code>, <code><a href=#the-i-element>i</a></code>,
  <code><a href=#the-hr-element>hr</a></code>, <code><a href=#the-s-element>s</a></code>, <code><a href=#the-small-element>small</a></code>, and <code><a href=#the-u-element>u</a></code>.</p>


  <h4 id=syntax-errors><span class=secno>1.12.2 </span>Syntax errors</h4>

  <p><i>This section is non-normative.</i></p>

  <p>The syntax of HTML is constrained to avoid a wide variety of problems.</p>

  <dl><dt>Unintuitive error-handling behavior</dt>

   <dd>

    <p>Certain invalid syntax constructs, when parsed, result in DOM trees that are highly
    unintuitive.</p>

    <div class=example>

     <p>For example, the following markup fragment results in a DOM with an <code><a href=#the-hr-element>hr</a></code> element
     that is an <em>earlier</em> sibling of the corresponding <code><a href=#the-table-element>table</a></code> element:</p>

     <pre class=bad>&lt;table&gt;&lt;hr&gt;...</pre>

    </div>

   </dd>


   <dt>Errors with optional error recovery</dt>

   <dd>

    <p>To allow user agents to be used in controlled environments without having to implement the
    more bizarre and convoluted error handling rules, user agents are permitted to fail whenever
    encountering a <a href=#parse-error>parse error</a>.</p>

   </dd>


   <dt>Errors where the error-handling behavior is not compatible with streaming user agents</dt>

   <dd>

    <p>Some error-handling behavior, such as the behavior for the <code title="">&lt;table&gt;&lt;hr&gt;...</code> example mentioned above, are incompatible with streaming
    user agents (user agents that process HTML files in one pass, without storing state). To avoid
    interoperability problems with such user agents, any syntax resulting in such behavior is
    considered invalid.</p>

   </dd>


   <dt>Errors that can result in infoset coercion</dt>

   <dd>

    <p>When a user agent based on XML is connected to an HTML parser, it is possible that certain
    invariants that XML enforces, such as comments never containing two consecutive hyphens, will be
    violated by an HTML file. Handling this can require that the parser coerce the HTML DOM into an
    XML-compatible infoset. Most syntax constructs that require such handling are considered
    invalid.</p>

   </dd>


   <dt>Errors that result in disproportionally poor performance</dt>

   <dd>

    <p>Certain syntax constructs can result in disproportionally poor performance. To discourage the
    use of such constructs, they are typically made non-conforming.</p>

    <div class=example>

     <p>For example, the following markup results in poor performance, since all the unclosed
     <code><a href=#the-i-element>i</a></code> elements have to be reconstructed in each paragraph, resulting in progressively
     more elements in each paragraph:</p>

     <pre class=bad>&lt;p&gt;&lt;i&gt;He dreamt.
&lt;p&gt;&lt;i&gt;He dreamt that he ate breakfast.
&lt;p&gt;&lt;i&gt;Then lunch.
&lt;p&gt;&lt;i&gt;And finally dinner.</pre>

     <p>The resulting DOM for this fragment would be:</p>

     <ul class=domTree><li class=t1><code><a href=#the-p-element>p</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t3><code>#text</code>: <span title="">He dreamt.</span></ul></ul><li class=t1><code><a href=#the-p-element>p</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t3><code>#text</code>: <span title="">He dreamt that he ate breakfast.</span></ul></ul></ul><li class=t1><code><a href=#the-p-element>p</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t3><code>#text</code>: <span title="">Then lunch.</span></ul></ul></ul></ul><li class=t1><code><a href=#the-p-element>p</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t1><code><a href=#the-i-element>i</a></code><ul><li class=t3><code>#text</code>: <span title="">And finally dinner.</span></ul></ul></ul></ul></ul></ul></div>

   </dd>


   <dt>Errors involving fragile syntax constructs</dt>

   <dd>

    <p>There are syntax constructs that, for historical reasons, are relatively fragile. To help
    reduce the number of users who accidentally run into such problems, they are made
    non-conforming.</p>

    <div class=example>

     <p>For example, the parsing of certain named character references in attributes happens even
     with the closing semicolon being omitted. It is safe to include an ampersand followed by
     letters that do not form a named character reference, but if the letters are changed to a
     string that <em>does</em> form a named character reference, they will be interpreted as that
     character instead.</p>

     <p>In this fragment, the attribute's value is "<code title="">?bill&amp;ted</code>":</p>

     <pre class=bad>&lt;a href="?bill&amp;ted"&gt;Bill and Ted&lt;/a&gt;</pre>

     <p>In the following fragment, however, the attribute's value is actually "<code title="">?art&copy;</code>", <em>not</em> the intended "<code title="">?art&amp;copy</code>",
     because even without the final semicolon, "<code title="">&amp;copy</code>" is handled the same
     as "<code title="">&amp;copy;</code>" and thus gets interpreted as "<code title="">&copy;</code>":</p>

     <pre class=bad>&lt;a href="?art&amp;copy"&gt;Art and Copy&lt;/a&gt;</pre>

     <p>To avoid this problem, all named character references are required to end with a semicolon,
     and uses of named character references without a semicolon are flagged as errors.</p>

     <p>Thus, the correct way to express the above cases is as
     follows:</p>

     <pre>&lt;a href="?bill&amp;ted"&gt;Bill and Ted&lt;/a&gt; &lt;!-- &amp;ted is ok, since it's not a named character reference --&gt;</pre>
     <pre>&lt;a href="?art&amp;amp;copy"&gt;Art and Copy&lt;/a&gt; &lt;!-- the &amp; has to be escaped, since &amp;copy <em>is</em> a named character reference --&gt;</pre>

    </div>

   </dd>


   <dt>Errors involving known interoperability problems in legacy user agents</dt>

   <dd>

    <p>Certain syntax constructs are known to cause especially subtle or serious problems in legacy
    user agents, and are therefore marked as non-conforming to help authors avoid them.</p>

    <div class=example>

     <p>For example, this is why the U+0060 GRAVE ACCENT character (`) is not allowed in unquoted
     attributes. In certain legacy user agents, <!-- namely IE --> it is sometimes treated as a
     quote character.</p>

    </div>

    <div class=example>

     <p>Another example of this is the DOCTYPE, which is required to trigger <a href=#no-quirks-mode>no-quirks
     mode</a>, because the behavior of legacy user agents in <a href=#quirks-mode>quirks mode</a> is often
     largely undocumented.</p>

    </div>

   </dd>


<!--ADD-TOPIC:Security-->
   <dt>Errors that risk exposing authors to security attacks</dt>

   <dd>

    <p>Certain restrictions exist purely to avoid known security problems.</p>

    <div class=example>

     <p>For example, the restriction on using UTF-7 exists purely to avoid authors falling prey to a
     known cross-site-scripting attack using UTF-7. <a href=#refsUTF7>[UTF7]</a></p>

    </div>

   </dd>
<!--REMOVE-TOPIC:Security-->


   <dt>Cases where the author's intent is unclear</dt>

   <dd>

    <p>Markup where the author's intent is very unclear is often made non-conforming. Correcting
    these errors early makes later maintenance easier.</p>

    <div class=example>

     <p>For example, it is unclear whether the author intended the following to be an
     <code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h1</a></code> heading or an <code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h2</a></code> heading:</p>

     <pre class=bad>&lt;h1&gt;Contact details&lt;/h2&gt;</pre>

    </div>

   </dd>


   <dt>Cases that are likely to be typos</dt>

   <dd>

    <p>When a user makes a simple typo, it is helpful if the error can be caught early, as this can
    save the author a lot of debugging time. This specification therefore usually considers it an
    error to use element names, attribute names, and so forth, that do not match the names defined
    in this specification.</p>

    <div class=example>

     <p>For example, if the author typed <code>&lt;capton&gt;</code> instead of
     <code>&lt;caption&gt;</code>, this would be flagged as an error and the author could correct the
     typo immediately.</p>

    </div>

   </dd>


   <dt>Errors that could interfere with new syntax in the future</dt>

   <dd>

    <p>In order to allow the language syntax to be extended in the future, certain otherwise
    harmless features are disallowed.</p>

    <div class=example>

     <p>For example, "attributes" in end tags are ignored currently, but they are invalid, in case a
     future change to the language makes use of that syntax feature without conflicting with
     already-deployed (and valid!) content.</p>

    </div>

   </dd>


  </dl><p>Some authors find it helpful to be in the practice of always quoting all attributes and always
  including all optional tags, preferring the consistency derived from such custom over the minor
  benefits of terseness afforded by making use of the flexibility of the HTML syntax. To aid such
  authors, conformance checkers can provide modes of operation wherein such conventions are
  enforced.</p>



  <h4 id=restrictions-on-content-models-and-on-attribute-values><span class=secno>1.12.3 </span>Restrictions on content models and on attribute values</h4>

  <p><i>This section is non-normative.</i></p>

  <p>Beyond the syntax of the language, this specification also places restrictions on how elements
  and attributes can be specified. These restrictions are present for similar reasons:</p>

  <dl><dt>Errors involving content with dubious semantics</dt>

   <dd>

    <p>To avoid misuse of elements with defined meanings, content models are defined that restrict
    how elements can be nested when such nestings would be of dubious value.</p>

    <p class=example>For example, this specification disallows nesting a <code><a href=#the-section-element>section</a></code>
    element inside a <code><a href=#the-kbd-element>kbd</a></code> element, since it is highly unlikely for an author to indicate
    that an entire section should be keyed in.</p>

   </dd>


   <dt>Errors that involve a conflict in expressed semantics</dt>

   <dd>

    <p>Similarly, to draw the author's attention to mistakes in the use of elements, clear
    contradictions in the semantics expressed are also considered conformance errors.</p>

    <div class=example>

     <p>In the fragments below, for example, the semantics are nonsensical: a separator cannot
     simultaneously be a cell, nor can a radio button be a progress bar.</p>

     <pre class=bad>&lt;hr role="cell"&gt;</pre>
     <pre class=bad>&lt;input type=radio role=progressbar&gt;</pre>

    </div>

    <p class=example>Another example is the restrictions on the content models of the
    <code><a href=#the-ul-element>ul</a></code> element, which only allows <code><a href=#the-li-element>li</a></code> element children. Lists by definition
    consist just of zero or more list items, so if a <code><a href=#the-ul-element>ul</a></code> element contains something
    other than an <code><a href=#the-li-element>li</a></code> element, it's not clear what was meant.</p>

   </dd>


   <dt>Cases where the default styles are likely to lead to confusion</dt>

   <dd>

    <p>Certain elements have default styles or behaviors that make certain combinations likely to
    lead to confusion. Where these have equivalent alternatives without this problem, the confusing
    combinations are disallowed.</p>

    <p class=example>For example, <code><a href=#the-div-element>div</a></code> elements are rendered as block boxes, and
    <code><a href=#the-span-element>span</a></code> elements as inline boxes. Putting a block box in an inline box is
    unnecessarily confusing; since either nesting just <code><a href=#the-div-element>div</a></code> elements, or nesting just
    <code><a href=#the-span-element>span</a></code> elements, or nesting <code><a href=#the-span-element>span</a></code> elements inside <code><a href=#the-div-element>div</a></code>
    elements all serve the same purpose as nesting a <code><a href=#the-div-element>div</a></code> element in a <code><a href=#the-span-element>span</a></code>
    element, but only the latter involves a block box in an inline box, the latter combination is
    disallowed.</p>

    <p class=example>Another example would be the way <a href=#interactive-content>interactive content</a> cannot be
    nested. For example, a <code><a href=#the-button-element>button</a></code> element cannot contain a <code><a href=#the-textarea-element>textarea</a></code>
    element. This is because the default behavior of such nesting interactive elements would be
    highly confusing to users. Instead of nesting these elements, they can be placed side by
    side.</p>

   </dd>


   <dt>Errors that indicate a likely misunderstanding of the specification</dt>

   <dd>

    <p>Sometimes, something is disallowed because allowing it would likely cause author
    confusion.</p>

    <p class=example>For example, setting the <code title=attr-fe-disabled><a href=#attr-fe-disabled>disabled</a></code>
    attribute to the value "<code title="">false</code>" is disallowed, because despite the
    appearance of meaning that the element is enabled, it in fact means that the element is
    <em>disabled</em> (what matters for implementations is the presence of the attribute, not its
    value).</p>

   </dd>


   <dt>Errors involving limits that have been imposed merely to simplify the language</dt>

   <dd>

    <p>Some conformance errors simplify the language that authors need to learn.</p>

    <p class=example>For example, the <code><a href=#the-area-element>area</a></code> element's <code title=attr-area-shape><a href=#attr-area-shape>shape</a></code> attribute, despite accepting both <code title=attr-area-shape-keyword-circ><a href=#attr-area-shape-keyword-circ>circ</a></code> and <code title=attr-area-shape-keyword-circle><a href=#attr-area-shape-keyword-circle>circle</a></code> values in practice as synonyms, disallows
    the use of the <code title=attr-area-shape-keyword-circ><a href=#attr-area-shape-keyword-circ>circ</a></code> value, so as to simplify
    tutorials and other learning aids. There would be no benefit to allowing both, but it would
    cause extra confusion when teaching the language.</p>

   </dd>


   <dt>Errors that involve peculiarities of the parser</dt>

   <dd>

    <p>Certain elements are parsed in somewhat eccentric ways (typically for historical reasons),
    and their content model restrictions are intended to avoid exposing the author to these
    issues.</p>

    <div class=example>

     <p>For example, a <code><a href=#the-form-element>form</a></code> element isn't allowed inside <a href=#phrasing-content>phrasing content</a>,
     because when parsed as HTML, a <code><a href=#the-form-element>form</a></code> element's start tag will imply a
     <code><a href=#the-p-element>p</a></code> element's end tag. Thus, the following markup results in two <a href=#paragraph title=paragraph>paragraphs</a>, not one:</p>

     <pre>&lt;p&gt;Welcome. &lt;form&gt;&lt;label&gt;Name:&lt;/label&gt; &lt;input&gt;&lt;/form&gt;</pre>

     <p>It is parsed exactly like the following:</p>

     <pre>&lt;p&gt;Welcome. &lt;/p&gt;&lt;form&gt;&lt;label&gt;Name:&lt;/label&gt; &lt;input&gt;&lt;/form&gt;</pre>

    </div>

   </dd>


   <dt>Errors that would likely result in scripts failing in hard-to-debug ways</dt>

   <dd>

    <p>Some errors are intended to help prevent script problems that would be hard to debug.</p>

    <p class=example>This is why, for instance, it is non-conforming to have two <code title=attr-id><a href=#the-id-attribute>id</a></code> attributes with the same value. Duplicate IDs lead to the wrong
    element being selected, with sometimes disastrous effects whose cause is hard to determine.</p>

   </dd>


   <dt>Errors that waste authoring time</dt>

   <dd>

    <p>Some constructs are disallowed because historically they have been the cause of a lot of
    wasted authoring time, and by encouraging authors to avoid making them, authors can save time in
    future efforts.</p>

    <p class=example>For example, a <code><a href=#the-script-element>script</a></code> element's <code title=attr-script-src><a href=#attr-script-src>src</a></code> attribute causes the element's contents to be ignored.
    However, this isn't obvious, especially if the element's contents appear to be executable script
    &mdash; which can lead to authors spending a lot of time trying to debug the inline script
    without realizing that it is not executing. To reduce this problem, this specification makes it
    non-conforming to have executable script in a <code><a href=#the-script-element>script</a></code> element when the <code title=attr-script-src><a href=#attr-script-src>src</a></code> attribute is present. This means that authors who are
    validating their documents are less likely to waste time with this kind of mistake.</p>

   </dd>


   <dt>Errors that involve areas that affect authors migrating to and from XHTML</dt>

   <dd>

    <p>Some authors like to write files that can be interpreted as both XML and HTML with similar
    results. Though this practice is discouraged in general due to the myriad of subtle
    complications involved (especially when involving scripting, styling, or any kind of automated
    serialization), this specification has a few restrictions intended to at least somewhat mitigate
    the difficulties. This makes it easier for authors to use this as a transitionary step when
    migrating between HTML and XHTML.</p>

    <p class=example>For example, there are somewhat complicated rules surrounding the <code title=attr-lang><a href=#attr-lang>lang</a></code> and <code title=attr-xml-lang><a href=#attr-xml-lang>xml:lang</a></code> attributes
    intended to keep the two synchronized.</p>

    <p class=example>Another example would be the restrictions on the values of <code title="">xmlns</code> attributes in the HTML serialization, which are intended to ensure that
    elements in conforming documents end up in the same namespaces whether processed as HTML or
    XML.</p>

   </dd>


   <dt>Errors that involve areas reserved for future expansion</dt>

   <dd>

    <p>As with the restrictions on the syntax intended to allow for new syntax in future revisions
    of the language, some restrictions on the content models of elements and values of attributes
    are intended to allow for future expansion of the HTML vocabulary.</p>

    <p class=example>For example, limiting the values of the <code title=attr-hyperlink-target><a href=#attr-hyperlink-target>target</a></code> attribute that start with an U+005F LOW LINE
    character (_) to only specific predefined values allows new predefined values to be introduced
    at a future time without conflicting with author-defined values.</p>

   </dd>


   <dt>Errors that indicate a mis-use of other specifications</dt>

   <dd>

    <p>Certain restrictions are intended to support the restrictions made by other
    specifications.</p>

    <p class=example>For example, requiring that attributes that take media queries use only
    <em>valid</em> media queries reinforces the importance of following the conformance rules of
    that specification.</p>

   </dd>

  </dl><h3 id=suggested-reading><span class=secno>1.13 </span>Suggested reading</h3>

  <p><i>This section is non-normative.</i></p>

  <p>The following documents might be of interest to readers of this specification.</p>

  <dl><dt><cite>Character Model for the World Wide Web 1.0: Fundamentals</cite> <a href=#refsCHARMOD>[CHARMOD]</a></dt>

   <dd><blockquote><p>This Architectural Specification provides authors of specifications, software
   developers, and content developers with a common reference for interoperable text manipulation on
   the World Wide Web, building on the Universal Character Set, defined jointly by the Unicode
   Standard and ISO/IEC 10646. Topics addressed include use of the terms 'character', 'encoding' and
   'string', a reference processing model, choice and identification of character encodings,
   character escaping, and string indexing.</blockquote></dd>

   <dt><cite>Unicode Security Considerations</cite> <a href=#refsUTR36>[UTR36]</a></dt>

   <dd><blockquote><p>Because Unicode contains such a large number of characters and incorporates
   the varied writing systems of the world, incorrect usage can expose programs or systems to
   possible security attacks. This is especially important as more and more products are
   internationalized. This document describes some of the security considerations that programmers,
   system analysts, standards developers, and users should take into account, and provides specific
   recommendations to reduce the risk of problems.</blockquote></dd>

   <dt><cite>Web Content Accessibility Guidelines (WCAG) 2.0</cite> <a href=#refsWCAG>[WCAG]</a></dt>

   <dd><blockquote><p>Web Content Accessibility Guidelines (WCAG) 2.0 covers a wide range of
   recommendations for making Web content more accessible. Following these guidelines will make
   content accessible to a wider range of people with disabilities, including blindness and low
   vision, deafness and hearing loss, learning disabilities, cognitive limitations, limited
   movement, speech disabilities, photosensitivity and combinations of these. Following these
   guidelines will also often make your Web content more usable to users in
   general.</blockquote></dd>

   <dt class=impl><cite>Authoring Tool Accessibility Guidelines (ATAG) 2.0</cite> <a href=#refsATAG>[ATAG]</a></dt>

   <dd class=impl><blockquote><p>This specification provides guidelines for designing Web content
   authoring tools that are more accessible for people with disabilities. An authoring tool that
   conforms to these guidelines will promote accessibility by providing an accessible user interface
   to authors with disabilities as well as by enabling, supporting, and promoting the production of
   accessible Web content by all authors.</blockquote></dd>

   <dt class=impl><cite>User Agent Accessibility Guidelines (UAAG) 2.0</cite> <a href=#refsUAAG>[UAAG]</a></dt>

   <dd class=impl><blockquote><p>This document provides guidelines for designing user agents that
   lower barriers to Web accessibility for people with disabilities. User agents include browsers
   and other types of software that retrieve and render Web content. A user agent that conforms to
   these guidelines will promote accessibility through its own user interface and through other
   internal facilities, including its ability to communicate with other technologies (especially
   assistive technologies). Furthermore, all users, not just users with disabilities, should find
   conforming user agents to be more usable.</blockquote></dd>

  </dl><h2 id=infrastructure><span class=secno>2 </span>Common infrastructure</h2>

  <h3 id=terminology><span class=secno>2.1 </span>Terminology</h3>

  <p>This specification refers to both HTML and XML attributes and IDL attributes, often in the same
  context. When it is not clear which is being referred to, they are referred to as <dfn title="">content attributes</dfn> for HTML and XML attributes, and <dfn title="">IDL
  attributes</dfn> for those defined on IDL interfaces. Similarly, the term "properties" is used for
  both JavaScript object properties and CSS properties. When these are ambiguous they are qualified
  as <dfn title="">object properties</dfn> and <dfn title="">CSS properties</dfn> respectively.</p>

  <p>Generally, when the specification states that a feature applies to <a href=#syntax>the HTML syntax</a>
  or <a href=#the-xhtml-syntax>the XHTML syntax</a>, it also includes the other. When a feature specifically only
  applies to one of the two languages, it is called out by explicitly stating that it does not apply
  to the other format, as in "for HTML, ... (this does not apply to XHTML)".</p>

  <p>This specification uses the term <dfn title="">document</dfn> to refer to any use of HTML,
  ranging from short static documents to long essays or reports with rich multimedia, as well as to
  fully-fledged interactive applications. The term is used to refer both to <code><a href=#document>Document</a></code>
  objects and their descendant DOM trees, and to serialised byte streams using the <a href=#syntax title="the
  HTML syntax">HTML syntax</a> or <a href=#the-xhtml-syntax title="the XHTML syntax">XHTML syntax</a>, depending
  on context.</p>

  <p>In the context of the DOM structures, the terms <a href=#html-documents title="HTML documents">HTML
  document</a> and <a href=#xml-documents title="XML documents">XML document</a> are used as defined in the DOM
  specification, and refer specifically to two different modes that <code><a href=#document>Document</a></code> objects
  can find themselves in. <a href=#refsDOM>[DOM]</a> (Such uses are always hyperlinked to their
  definition.)</p>

  <p>In the context of byte streams, the term HTML document refers to resources labeled as
  <code><a href=#text/html>text/html</a></code>, and the term XML document refers to resources labeled with an <a href=#xml-mime-type>XML
  MIME type</a>.</p>

  <p>The term <dfn id=xhtml-document>XHTML document</dfn> is used to refer to both <code><a href=#document>Document</a></code>s in the <a href=#xml-documents title="XML documents">XML document</a> mode that contains element nodes in the <a href=#html-namespace-0>HTML
  namespace</a>, and byte streams labeled with an <a href=#xml-mime-type>XML MIME type</a> that contain
  elements from the <a href=#html-namespace-0>HTML namespace</a>, depending on context.</p>

  <hr><p>For simplicity, terms such as <dfn title="">shown</dfn>, <dfn title="">displayed</dfn>, and
  <dfn title="">visible</dfn> might sometimes be used when referring to the way a document is
  rendered to the user. These terms are not meant to imply a visual medium; they must be considered
  to apply to other media in equivalent ways.</p>

  <div class=impl>

  <p>When an algorithm B says to return to another algorithm A, it implies that A called B. Upon
  returning to A, the implementation must continue from where it left off in calling B.</p>

  </div>

  <!-- should find somewhere more appropriate to put this -->
  <p>The term "transparent black" refers to the color with red, green, blue, and alpha channels all
  set to zero.</p>


  <h4 id=resources><span class=secno>2.1.1 </span>Resources</h4>

  <p>The specification uses the term <dfn title="">supported</dfn> when referring to whether a user
  agent has an implementation capable of decoding the semantics of an external resource. A format or
  type is said to be <i>supported</i> if the implementation can process an external resource of that
  format or type without critical aspects of the resource being ignored. Whether a specific resource
  is <i>supported</i> can depend on what features of the resource's format are in use.</p>

  <p class=example>For example, a PNG image would be considered to be in a supported format if its
  pixel data could be decoded and rendered, even if, unbeknownst to the implementation, the image
  also contained animation data.</p>

  <p class=example>An MPEG-4 video file would not be considered to be in a supported format if the
  compression format used was not supported, even if the implementation could determine the
  dimensions of the movie from the file's metadata.</p>

  <p>What some specifications, in particular the HTTP specification, refer to as a
  <i>representation</i> is referred to in this specification as a <dfn title="">resource</dfn>. <a href=#refsHTTP>[HTTP]</a></p>

  <p>The term <dfn id=mime-type>MIME type</dfn> is used to refer to what is sometimes called an <i>Internet media
  type</i> in protocol literature. The term <i>media type</i> in this specification is used to refer
  to the type of media intended for presentation, as used by the CSS specifications. <a href=#refsRFC2046>[RFC2046]</a> <a href=#refsMQ>[MQ]</a></p>

  <p>A string is a <dfn id=valid-mime-type>valid MIME type</dfn> if it matches the <code title="">media-type</code>
  rule defined in section 3.7 "Media Types" of RFC 2616. In particular, a <a href=#valid-mime-type>valid MIME
  type</a> may include MIME type parameters. <a href=#refsHTTP>[HTTP]</a></p>

  <p>A string is a <dfn id=valid-mime-type-with-no-parameters>valid MIME type with no parameters</dfn> if it matches the <code title="">media-type</code> rule defined in section 3.7 "Media Types" of RFC 2616, but does not
  contain any U+003B SEMICOLON characters (;). In other words, if it consists only of a type and
  subtype, with no MIME Type parameters. <a href=#refsHTTP>[HTTP]</a></p>

  <p>The term <dfn id=html-mime-type>HTML MIME type</dfn> is used to refer to the <a href=#mime-type>MIME type</a>
  <code><a href=#text/html>text/html</a></code>.</p>

  <p>A resource's <dfn id=critical-subresources>critical subresources</dfn> are those that the resource needs to have
  available to be correctly processed. Which resources are considered critical or not is defined by
  the specification that defines the resource's format.</p>

  <p>The term <dfn id=data-protocol title="data protocol"><code title="">data:</code> URL</dfn> refers to <a href=#url title=URL>URLs</a> that use the <code title="">data:</code> scheme. <a href=#refsRFC2397>[RFC2397]</a></p>


  <h4 id=xml><span class=secno>2.1.2 </span>XML</h4>

  <p id=html-namespace>To ease migration from HTML to XHTML, UAs conforming to this specification
  will place elements in HTML in the <code>http://www.w3.org/1999/xhtml</code> namespace, at least
  for the purposes of the DOM and CSS. The term "<dfn id=html-elements>HTML elements</dfn>", when used in this
  specification, refers to any element in that namespace, and thus refers to both HTML and XHTML
  elements.</p>

  <p>Except where otherwise stated, all elements defined or mentioned in this specification are in
  the <a href=#html-namespace-0>HTML namespace</a> ("<code>http://www.w3.org/1999/xhtml</code>"), and all attributes
  defined or mentioned in this specification have no namespace.</p>

  <p>The term <dfn id=element-type>element type</dfn> is used to refer to the set of elements that have a given
  local name and namespace. For example, <code><a href=#the-button-element>button</a></code> elements are elements with the element
  type <code><a href=#the-button-element>button</a></code>, meaning they have the local name "<code title="">button</code>" and
  (implicitly as defined above) the <a href=#html-namespace-0>HTML namespace</a>.</p>

  <p>Attribute names are said to be <dfn id=xml-compatible>XML-compatible</dfn> if they match the <a href=http://www.w3.org/TR/xml/#NT-Name><code title="">Name</code></a> production defined in XML
  and they contain no U+003A COLON characters (:). <a href=#refsXML>[XML]</a></p>

  <p>The term <dfn id=xml-mime-type>XML MIME type</dfn> is used to refer to the <a href=#mime-type title="MIME type">MIME
  types</a> <code title="">text/xml</code>, <code title="">application/xml</code>, and any
  <a href=#mime-type>MIME type</a> whose subtype ends with the four characters "<code title="">+xml</code>".
  <a href=#refsRFC3023>[RFC3023]</a></p>


  <h4 id=dom-trees><span class=secno>2.1.3 </span>DOM trees</h4>

  <p>The <dfn id=root-element-of-a-document-object>root element of a <code>Document</code> object</dfn> is that <code><a href=#document>Document</a></code>'s
  first element child, if any. If it does not have one then the <code><a href=#document>Document</a></code> has no root
  element.</p>

  <p>The term <dfn id=root-element>root element</dfn>, when not referring to a <code><a href=#document>Document</a></code> object's root
  element, means the furthest ancestor element node of whatever node is being discussed, or the node
  itself if it has no ancestors. When the node is a part of the document, then the node's <a href=#root-element>root
  element</a> is indeed the document's root element; however, if the node is not currently part
  of the document tree, the root element will be an orphaned node.</p>

  <p>When an element's <a href=#root-element>root element</a> is the <a href=#root-element-of-a-document-object>root element of a
  <code>Document</code> object</a>, it is said to be <dfn id=in-a-document>in a <code>Document</code></dfn>. An
  element is said to have been <dfn id=insert-an-element-into-a-document title="insert an element into a document">inserted into a
  document</dfn> when its <a href=#root-element>root element</a> changes and is now the document's <a href=#root-element>root
  element</a>. Analogously, an element is said to have been <dfn id=remove-an-element-from-a-document title="remove an element from a
  document">removed from a document</dfn> when its <a href=#root-element>root element</a> changes from being the
  document's <a href=#root-element>root element</a> to being another element.</p>

  <p>A node's <dfn id=home-subtree>home subtree</dfn> is the subtree rooted at that node's <a href=#root-element>root
  element</a>. When a node is <a href=#in-a-document>in a <code>Document</code></a>, its <a href=#home-subtree>home
  subtree</a> is that <code><a href=#document>Document</a></code>'s tree.</p>

  <p>The <code><a href=#document>Document</a></code> of a <code><a href=#node>Node</a></code> (such as an element) is the
  <code><a href=#document>Document</a></code> that the <code><a href=#node>Node</a></code>'s <code title=dom-Node-ownerDocument><a href=#dom-node-ownerdocument>ownerDocument</a></code> IDL attribute returns. When a
  <code><a href=#node>Node</a></code> is <a href=#in-a-document>in a <code>Document</code></a> then that <code><a href=#document>Document</a></code> is
  always the <code><a href=#node>Node</a></code>'s <code><a href=#document>Document</a></code>, and the <code><a href=#node>Node</a></code>'s <code title=dom-Node-ownerDocument><a href=#dom-node-ownerdocument>ownerDocument</a></code> IDL attribute thus always returns that
  <code><a href=#document>Document</a></code>.</p>

  <p>The <code><a href=#document>Document</a></code> of a content attribute is the <code><a href=#document>Document</a></code> of the
  attribute's element.</p>

  <p>The term <dfn id=tree-order>tree order</dfn> means a pre-order, depth-first traversal of DOM nodes involved
  (through the <code title=dom-Node-parentNode><a href=#dom-node-parentnode>parentNode</a></code>/<code title=dom-Node-childNodes><a href=#dom-node-childnodes>childNodes</a></code> relationship).</p>

  <p>When it is stated that some element or attribute is <dfn id=ignore title=ignore>ignored</dfn>, or
  treated as some other value, or handled as if it was something else, this refers only to the
  processing of the node after it is in the DOM. <span class=impl>A user agent must not mutate the
  DOM in such situations.</span></p>

  <p>A content attribute is said to <dfn title="">change</dfn> value only if its new value is
  different than its previous value; setting an attribute to a value it already has does not change
  it.</p>

  <p>The term <dfn title="">empty</dfn>, when used of an attribute value, <code><a href=#text>Text</a></code> node, or
  string, means that the length of the text is zero (i.e. not even containing spaces or <a href=#control-characters>control
  characters</a>).</p>


  <h4 id=scripting-0><span class=secno>2.1.4 </span>Scripting</h4>

  <p>The construction "a <code>Foo</code> object", where <code>Foo</code> is actually an interface,
  is sometimes used instead of the more accurate "an object implementing the interface
  <code>Foo</code>".</p>

  <p>An IDL attribute is said to be <dfn title="">getting</dfn> when its value is being retrieved
  (e.g. by author script), and is said to be <dfn title="">setting</dfn> when a new value is
  assigned to it.</p>

  <p>If a DOM object is said to be <dfn id=live>live</dfn>, then the attributes and methods on that object
  <span class=impl>must</span> operate on the actual underlying data, not a snapshot of the
  data.</p>

  <p>In the contexts of events, the terms <i>fire</i> and <i>dispatch</i> are used as defined in the
  DOM specification: <dfn id=concept-event-fire title=concept-event-fire>firing</dfn> an event means to create and <a href=#concept-event-dispatch title=concept-event-dispatch>dispatch</a> it, and <dfn id=concept-event-dispatch title=concept-event-dispatch>dispatching</dfn> an event means to follow the steps that propagate
  the event through the tree. The term <dfn id=concept-events-trusted title=concept-events-trusted>trusted event</dfn> is
  used to refer to events whose <code title=dom-event-isTrusted><a href=#dom-event-istrusted>isTrusted</a></code> attribute is
  initialised to true. <a href=#refsDOM>[DOM]</a></p>


  <h4 id=plugins><span class=secno>2.1.5 </span>Plugins</h4>

  <p>The term <dfn id=plugin>plugin</dfn> refers to a user-agent defined set of content handlers used by the
  user agent that can take part in the user agent's rendering of a <code><a href=#document>Document</a></code> object, but
  that neither act as <a href=#child-browsing-context title="child browsing context">child browsing contexts</a> of the
  <code><a href=#document>Document</a></code> nor introduce any <code><a href=#node>Node</a></code> objects to the <code><a href=#document>Document</a></code>'s
  DOM.</p>

  <p>Typically such content handlers are provided by third parties, though a user agent can also
  designate built-in content handlers as plugins.</p>

  <div class=impl>

  <p>A user agent must not consider the types <code>text/plain</code> and
  <code>application/octet-stream</code> as having a registered <a href=#plugin>plugin</a>.</p> <!-- because
  of the way <object> elements handles those types, if nothing else (it also doesn't make any sense
  to have a plugin registered for those types, of course) -->

  </div>

  <p class=example>One example of a plugin would be a PDF viewer that is instantiated in a
  <a href=#browsing-context>browsing context</a> when the user navigates to a PDF file. This would count as a plugin
  regardless of whether the party that implemented the PDF viewer component was the same as that
  which implemented the user agent itself. However, a PDF viewer application that launches separate
  from the user agent (as opposed to using the same interface) is not a plugin by this
  definition.</p>

  <p class=note>This specification does not define a mechanism for interacting with plugins, as it
  is expected to be user-agent- and platform-specific. Some UAs might opt to support a plugin
  mechanism such as the Netscape Plugin API; others might use remote content converters or have
  built-in support for certain types. Indeed, this specification doesn't require user agents to
  support plugins at all. <a href=#refsNPAPI>[NPAPI]</a></p>

  <p>A plugin can be <dfn id=concept-plugin-secure title=concept-plugin-secure>secured</dfn> if it honors the semantics of
  the <code title=attr-iframe-sandbox><a href=#attr-iframe-sandbox>sandbox</a></code> attribute.</p>

  <p class=example>For example, a secured plugin would prevent its contents from creating pop-up
  windows when the plugin is instantiated inside a sandboxed <code><a href=#the-iframe-element>iframe</a></code>.</p>

  <div class=impl>

  <p class=warning>Browsers should take extreme care when interacting with external content
  intended for <a href=#plugin title=plugin>plugins</a>. When third-party software is run with the same
  privileges as the user agent itself, vulnerabilities in the third-party software become as
  dangerous as those in the user agent.</p>

  <p>Since different users having differents sets of <a href=#plugin title=plugin>plugins</a> provides a
  fingerprinting vector that increases the chances of users being uniquely identified, user agents
  are encouraged to support the exact same set of <a href=#plugin title=plugin>plugins</a> for each
  user.
  <a href=#fingerprinting-vector class=fingerprint title="fingerprinting vector"><img src=http://images.whatwg.org/fingerprint.png width=46 alt="(This is a fingerprinting vector.)" height=64></a>
  </p>

  </div>



  <h4 id=encoding-terminology><span class=secno>2.1.6 </span>Character encodings</h4>

  <p>A <dfn id=encoding title=encoding>character encoding</dfn>, or just <i><a href=#encoding>encoding</a></i> where that is not
  ambiguous, is a defined way to convert between byte streams and Unicode strings, as defined in the
  WHATWG Encoding standard. An <a href=#encoding>encoding</a> has an <dfn id=encoding-name>encoding name</dfn> and one or more
  <dfn id=encoding-label title="encoding label">encoding labels</dfn>, referred to as the encoding's <i>name</i> and
  <i>labels</i> in the Encoding standard. <a href=#refsENCODING>[ENCODING]</a></p>

  <p>An <dfn id=ascii-compatible-character-encoding>ASCII-compatible character encoding</dfn> is a single-byte or variable-length
  <a href=#encoding>encoding</a> in which the bytes 0x09, 0x0A, 0x0C, 0x0D, 0x20 - 0x22, 0x26, 0x27, 0x2C -
  0x3F, 0x41 - 0x5A, and 0x61 - 0x7A<!-- is that list ok? do any character sets we want to support
  do things outside that range? -->, ignoring bytes that are the second and later bytes of multibyte
  sequences, all correspond to single-byte sequences that map to the same Unicode characters as
  those bytes in Windows-1252<!--ANSI_X3.4-1968 (US-ASCII)-->. <a href=#refsENCODING>[ENCODING]</a></p>

  <p class=note>This includes such encodings as Shift_JIS, HZ-GB-2312, and variants of ISO-2022,
  even though it is possible in these encodings for bytes like 0x70 to be part of longer sequences
  that are unrelated to their interpretation as ASCII. It excludes UTF-16 variants, as well as
  obsolete legacy encodings such as UTF-7, GSM03.38, and EBCDIC variants.</p>

  <!--
   We'll have to change that if anyone comes up with a way to have a document that is valid as two
   different encodings at once, with different <meta charset> elements applying in each case.
  -->

  <p>The term <dfn id=a-utf-16-encoding>a UTF-16 encoding</dfn> refers to any variant of UTF-16: UTF-16LE or UTF-16BE,
  regardless of the presence or absence of a BOM. <a href=#refsENCODING>[ENCODING]</a></p>

  <p>The term <dfn id=code-unit>code unit</dfn> is used as defined in the Web IDL specification: a 16 bit
  unsigned integer, the smallest atomic component of a <code>DOMString</code>. (This is a narrower
  definition than the one used in Unicode, and is not the same as a <i>code point</i>.) <a href=#refsWEBIDL>[WEBIDL]</a></p>

  <p>The term <dfn id=unicode-code-point>Unicode code point</dfn> means a <i title="">Unicode scalar value</i> where
  possible, and an isolated surrogate code point when not. When a conformance requirement is defined
  in terms of characters or Unicode code points, a pair of <a href=#code-unit title="code unit">code units</a>
  consisting of a high surrogate followed by a low surrogate must be treated as the single code
  point represented by the surrogate pair, but isolated surrogates must each be treated as the
  single code point with the value of the surrogate. <a href=#refsUNICODE>[UNICODE]</a></p>

  <p>In this specification, the term <dfn id=character>character</dfn>, when not qualified as <em>Unicode</em>
  character, is synonymous with the term <a href=#unicode-code-point>Unicode code point</a>.</p>

  <p>The term <dfn id=unicode-character>Unicode character</dfn> is used to mean a <i title="">Unicode scalar value</i>
  (i.e. any Unicode code point that is not a surrogate code point). <a href=#refsUNICODE>[UNICODE]</a></p>

  <p>The <dfn id=code-unit-length>code-unit length</dfn> of a string is the number of <a href=#code-unit title="code unit">code
  units</a> in that string.</p>

  <p class=note>This complexity results from the historical decision to define the DOM API in
  terms of 16 bit (UTF-16) <a href=#code-unit title="code unit">code units</a>, rather than in terms of <a href=#unicode-character title="Unicode character">Unicode characters</a>.</p>





  <h3 id=conformance-requirements><span class=secno>2.2 </span>Conformance requirements</h3>

  <p>All diagrams, examples, and notes in this specification are non-normative, as are all sections
  explicitly marked non-normative. Everything else in this specification is normative.</p>

  <p>The key words "MUST", "MUST NOT", <!--"REQUIRED",--> <!--"SHALL", "SHALL NOT",--> "SHOULD", "SHOULD
  NOT", <!--"RECOMMENDED", "NOT RECOMMENDED",--> "MAY", and "OPTIONAL" in the normative parts of
  this document are to be interpreted as described in RFC2119. The key word "OPTIONALLY" in the
  normative parts of this document is to be interpreted with the same normative meaning as "MAY" and
  "OPTIONAL". For readability, these words do not appear in all uppercase letters in this
  specification. <a href=#refsRFC2119>[RFC2119]</a></p>

  <div class=impl>

  <p>Requirements phrased in the imperative as part of algorithms (such as "strip any leading space
  characters" or "return false and abort these steps") are to be interpreted with the meaning of the
  key word ("must", "should", "may", etc) used in introducing the algorithm.</p>

  <div class=example>

   <p>For example, were the spec to say:</p>

   <pre>To eat an orange, the user must:
1. Peel the orange.
2. Separate each slice of the orange.
3. Eat the orange slices.</pre>

   <p>...it would be equivalent to the following:</p>

   <pre>To eat an orange:
1. The user must peel the orange.
2. The user must separate each slice of the orange.
3. The user must eat the orange slices.</pre>

   <p>Here the key word is "must".</p>

   <p>The former (imperative) style is generally preferred in this specification for stylistic
   reasons.</p>

  </div>

  <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any
  manner, so long as the end result is equivalent. (In particular, the algorithms defined in this
  specification are intended to be easy to follow, and not intended to be performant.)</p>

  </div>



  <div class=impl>

  <h4 id=conformance-classes><span class=secno>2.2.1 </span>Conformance classes</h4>

  <p>This specification describes the conformance criteria for <span class=impl>user agents
  (relevant to implementors) and</span> documents<span class=impl> (relevant to authors and
  authoring tool implementors)</span>.</p>

  <p><dfn id=conforming-documents>Conforming documents</dfn> are those that comply with all the conformance criteria for
  documents. For readability, some of these conformance requirements are phrased as conformance
  requirements on authors; such requirements are implicitly requirements on documents: by
  definition, all documents are assumed to have had an author. (In some cases, that author may
  itself be a user agent &mdash; such user agents are subject to additional rules, as explained
  below.)</p>

  <p class=example>For example, if a requirement states that "authors must not use the <code title="">foobar</code> element", it would imply that documents are not allowed to contain elements
  named <code title="">foobar</code>.</p>

  <p class="note impl">There is no implied relationship between document conformance requirements
  and implementation conformance requirements. User agents are not free to handle non-conformant
  documents as they please; the processing model described in this specification applies to
  implementations regardless of the conformity of the input documents.</p>

  <p>User agents fall into several (overlapping) categories with different conformance
  requirements.</p>

  <dl><dt id=interactive>Web browsers and other interactive user agents</dt>

   <dd>

    <p>Web browsers that support <a href=#the-xhtml-syntax>the XHTML syntax</a> must process elements and attributes
    from the <a href=#html-namespace-0>HTML namespace</a> found in XML documents as described in this specification,
    so that users can interact with them, unless the semantics of those elements have been
    overridden by other specifications.</p>

    <p class=example>A conforming XHTML processor would, upon finding an XHTML <code><a href=#the-script-element>script</a></code>
    element in an XML document, execute the script contained in that element. However, if the
    element is found within a transformation expressed in XSLT (assuming the user agent also
    supports XSLT), then the processor would instead treat the <code><a href=#the-script-element>script</a></code> element as an
    opaque element that forms part of the transform.</p>

    <p>Web browsers that support <a href=#syntax>the HTML syntax</a> must process documents labeled with an
    <a href=#html-mime-type>HTML MIME type</a> as described in this specification, so that users can interact with
    them.</p>

    <p>User agents that support scripting must also be conforming implementations of the IDL
    fragments in this specification, as described in the Web IDL specification. <a href=#refsWEBIDL>[WEBIDL]</a></p>

    <p class=note>Unless explicitly stated, specifications that override the semantics of HTML
    elements do not override the requirements on DOM objects representing those elements. For
    example, the <code><a href=#the-script-element>script</a></code> element in the example above would still implement the
    <code><a href=#htmlscriptelement>HTMLScriptElement</a></code> interface.</p>

   </dd>

   <dt id=non-interactive>Non-interactive presentation user agents</dt>

   <dd>

    <p>User agents that process HTML and XHTML documents purely to render non-interactive versions
    of them must comply to the same conformance criteria as Web browsers, except that they are
    exempt from requirements regarding user interaction.</p>

    <p class=note>Typical examples of non-interactive presentation user agents are printers
    (static UAs) and overhead displays (dynamic UAs). It is expected that most static
    non-interactive presentation user agents will also opt to <a href=#non-scripted>lack scripting
    support</a>.</p>

    <p class=example>A non-interactive but dynamic presentation UA would still execute scripts,
    allowing forms to be dynamically submitted, and so forth. However, since the concept of "focus"
    is irrelevant when the user cannot interact with the document, the UA would not need to support
    any of the focus-related DOM APIs.</p>

   </dd>

   <dt id=renderingUA>Visual user agents that support the suggested default rendering</dt>

   <dd>

    <p>User agents, whether interactive or not, may be designated (possibly as a user option) as
    supporting the suggested default rendering defined by this specification.</p>

    <p>This is not required. In particular, even user agents that do implement the suggested default
    rendering are encouraged to offer settings that override this default to improve the experience
    for the user, e.g. changing the color contrast, using different focus styles, or otherwise
    making the experience more accessible and usable to the user.</p>

    <p>User agents that are designated as supporting the suggested default rendering must, while so
    designated, implement the rules in <a href=#rendering>the rendering section</a> that that
    section defines as the behavior that user agents are <em>expected</em> to implement.</p>

   </dd>

   <dt id=non-scripted>User agents with no scripting support</dt>

   <dd>

    <p>Implementations that do not support scripting (or which have their scripting features
    disabled entirely) are exempt from supporting the events and DOM interfaces mentioned in this
    specification. For the parts of this specification that are defined in terms of an events model
    or in terms of the DOM, such user agents must still act as if events and the DOM were
    supported.</p>

    <p class=note>Scripting can form an integral part of an application. Web browsers that do not
    support scripting, or that have scripting disabled, might be unable to fully convey the author's
    intent.</p>

   </dd>


   <dt>Conformance checkers</dt>

   <dd id=conformance-checkers>

    <p>Conformance checkers must verify that a document conforms to the applicable conformance
    criteria described in this specification. Automated conformance checkers are exempt from
    detecting errors that require interpretation of the author's intent (for example, while a
    document is non-conforming if the content of a <code><a href=#the-blockquote-element>blockquote</a></code> element is not a quote,
    conformance checkers running without the input of human judgement do not have to check that
    <code><a href=#the-blockquote-element>blockquote</a></code> elements only contain quoted material).</p>

    <p>Conformance checkers must check that the input document conforms when parsed without a
    <a href=#browsing-context>browsing context</a> (meaning that no scripts are run, and that the parser's
    <a href=#scripting-flag>scripting flag</a> is disabled), and should also check that the input document conforms
    when parsed with a <a href=#browsing-context>browsing context</a> in which scripts execute, and that the scripts
    never cause non-conforming states to occur other than transiently during script execution
    itself. (This is only a "SHOULD" and not a "MUST" requirement because it has been proven to be
    impossible. <a href=#refsCOMPUTABLE>[COMPUTABLE]</a>)</p>

    <p>The term "HTML validator" can be used to refer to a conformance checker that itself conforms
    to the applicable requirements of this specification.</p>

    <div class=note>

     <p>XML DTDs cannot express all the conformance requirements of this specification. Therefore, a
     validating XML processor and a DTD cannot constitute a conformance checker. Also, since neither
     of the two authoring formats defined in this specification are applications of SGML, a
     validating SGML system cannot constitute a conformance checker either.</p>

     <p>To put it another way, there are three types of conformance criteria:</p>

     <ol><li>Criteria that can be expressed in a DTD.</li>

      <li>Criteria that cannot be expressed by a DTD, but can still be checked by a machine.</li>

      <li>Criteria that can only be checked by a human.</li>

     </ol><p>A conformance checker must check for the first two. A simple DTD-based validator only checks
     for the first class of errors and is therefore not a conforming conformance checker according
     to this specification.</p>

    </div>
   </dd>


   <dt>Data mining tools</dt>

   <dd id=data-mining>

    <p>Applications and tools that process HTML and XHTML documents for reasons other than to either
    render the documents or check them for conformance should act in accordance with the semantics
    of the documents that they process.</p>

    <p class=example>A tool that generates <a href=#outline title=outline>document outlines</a> but
    increases the nesting level for each paragraph and does not increase the nesting level for each
    section would not be conforming.</p>

   </dd>


   <dt id=editors>Authoring tools and markup generators</dt>

   <dd>

    <p>Authoring tools and markup generators must generate <a href=#conforming-documents>conforming documents</a>.
    Conformance criteria that apply to authors also apply to authoring tools, where appropriate.</p>

    <p>Authoring tools are exempt from the strict requirements of using elements only for their
    specified purpose, but only to the extent that authoring tools are not yet able to determine
    author intent. However, authoring tools must not automatically misuse elements or encourage
    their users to do so.</p>

    <p class=example>For example, it is not conforming to use an <code><a href=#the-address-element>address</a></code> element for
    arbitrary contact information; that element can only be used for marking up contact information
    for the author of the document or section. However, since an authoring tool is likely unable to
    determine the difference, an authoring tool is exempt from that requirement. This does not mean,
    though, that authoring tools can use <code><a href=#the-address-element>address</a></code> elements for any block of italics text
    (for instance); it just means that the authoring tool doesn't have to verify that when the user
    uses a tool for inserting contact information for a section, that the user really is doing that
    and not inserting something else instead.</p>

    <p class=note>In terms of conformance checking, an editor has to output documents that conform
    to the same extent that a conformance checker will verify.</p>

    <p>When an authoring tool is used to edit a non-conforming document, it may preserve the
    conformance errors in sections of the document that were not edited during the editing session
    (i.e. an editing tool is allowed to round-trip erroneous content). However, an authoring tool
    must not claim that the output is conformant if errors have been so preserved.</p>

    <p>Authoring tools are expected to come in two broad varieties: tools that work from structure
    or semantic data, and tools that work on a What-You-See-Is-What-You-Get media-specific editing
    basis (WYSIWYG).</p>

    <p>The former is the preferred mechanism for tools that author HTML, since the structure in the
    source information can be used to make informed choices regarding which HTML elements and
    attributes are most appropriate.</p>

    <p>However, WYSIWYG tools are legitimate. WYSIWYG tools should use elements they know are
    appropriate, and should not use elements that they do not know to be appropriate. This might in
    certain extreme cases mean limiting the use of flow elements to just a few elements, like
    <code><a href=#the-div-element>div</a></code>, <code><a href=#the-b-element>b</a></code>, <code><a href=#the-i-element>i</a></code>, and <code><a href=#the-span-element>span</a></code> and making liberal use
    of the <code title=attr-style><a href=#the-style-attribute>style</a></code> attribute.</p>

    <p>All authoring tools, whether WYSIWYG or not, should make a best effort attempt at enabling
    users to create well-structured, semantically rich, media-independent content.</p>

   </dd>

  </dl><p id=hardwareLimitations>User agents may impose implementation-specific limits on otherwise
  unconstrained inputs, e.g. to prevent denial of service attacks, to guard against running out of
  memory, or to work around platform-specific limitations.
  <a href=#fingerprinting-vector class=fingerprint title="fingerprinting vector"><img src=http://images.whatwg.org/fingerprint.png width=46 alt="(This is a fingerprinting vector.)" height=64></a>
  </p>

  <p>For compatibility with existing content and prior specifications, this specification describes
  two authoring formats: one based on XML (referred to as <a href=#the-xhtml-syntax>the XHTML syntax</a>), and one
  using a <a href=#writing>custom format</a> inspired by SGML (referred to as <a href=#syntax>the HTML
  syntax</a>). Implementations must support at least one of these two formats, although
  supporting both is encouraged.</p>

  <p>Some conformance requirements are phrased as requirements on elements, attributes, methods or
  objects. Such requirements fall into two categories: those describing content model restrictions,
  and those describing implementation behavior. Those in the former category are requirements on
  documents and authoring tools. Those in the second category are requirements on user agents.
  Similarly, some conformance requirements are phrased as requirements on authors; such requirements
  are to be interpreted as conformance requirements on the documents that authors produce. (In other
  words, this specification does not distinguish between conformance criteria on authors and
  conformance criteria on documents.)</p>

  </div>


  <div class=impl>

  <h4 id=dependencies><span class=secno>2.2.2 </span>Dependencies</h4>

  <p>This specification relies on several other underlying specifications.</p>

  <dl><dt>Unicode and Encoding</dt>

   <dd>

    <p>The Unicode character set is used to represent textual data, and the WHATWG Encoding standard
    defines requirements around <a href=#encoding title=encoding>character encodings</a>. <a href=#refsUNICODE>[UNICODE]</a></p>

    <p class=note>This specification <a href=#encoding-terminology>introduces terminology</a>
    based on the terms defined in those specifications, as described earlier.</p>

    <p>The following terms are used as defined in the WHATWG Encoding standard: <a href=#refsENCODING>[ENCODING]</a></p>

    <ul class=brief><li><dfn id=getting-an-encoding>Getting an encoding</dfn>

     <li>The <dfn id=encoder>encoder</dfn> and <dfn id=decoder>decoder</dfn> algorithms for various encodings, including
     the <dfn id=utf-8-encoder>UTF-8 encoder</dfn> and <dfn id=utf-8-decoder>UTF-8 decoder</dfn>

     <li>The generic <dfn id=decode>decode</dfn> algorithm which takes a byte stream and an encoding and
     returns a character stream

     <li>The <dfn id=utf-8-decode>UTF-8 decode</dfn> algorithm which takes a byte stream and returns a character
     stream, additionally stripping one leading UTF-8 Byte Order Mark (BOM), if any

    </ul><p class=note>The <a href=#utf-8-decoder>UTF-8 decoder</a> is distinct from the <i>UTF-8 decode
    algorithm</i>. The latter first strips a Byte Order Mark (BOM), if any, and then invokes the
    former.</p>

    <p>For readability, character encodings are sometimes referenced in this specification with a
    case that differs from the canonical case given in the WHATWG Encoding standard. (For example,
    "UTF-16LE" instead of "utf-16le".)</p>

   </dd>


   <dt>XML</dt>

   <dd>

    <p>Implementations that support <a href=#the-xhtml-syntax>the XHTML syntax</a> must support some version of XML,
    as well as its corresponding namespaces specification, because that syntax uses an XML
    serialization with namespaces. <a href=#refsXML>[XML]</a> <a href=#refsXMLNS>[XMLNS]</a></p>

   </dd>


   <dt>URLs</dt>

   <dd>

    <p>The following terms are defined in the WHATWG URL standard: <a href=#refsURL>[URL]</a></p>

    <ul class=brief><li><dfn id=url>URL</dfn>
     <li><dfn id=absolute-url>Absolute URL</dfn>
     <li><dfn id=relative-url>Relative URL</dfn>
     <li><dfn id=concept-url-scheme-relative title=concept-url-scheme-relative>Relative schemes</dfn>
     <li>The <dfn id=url-parser>URL parser</dfn>
     <li><dfn id=parsed-url>Parsed URL</dfn>
     <li>The <dfn id=concept-url-scheme title=concept-url-scheme>scheme</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-scheme-data title=concept-url-scheme-data>scheme data</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-username title=concept-url-username>username</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-password title=concept-url-password>password</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-host title=concept-url-host>host</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-port title=concept-url-port>port</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-path title=concept-url-path>path</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-query title=concept-url-query>query</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li>The <dfn id=concept-url-fragment title=concept-url-fragment>fragment</dfn> component of a <a href=#parsed-url>parsed URL</a>
     <li><dfn id=concept-url-parse-error title=concept-url-parse-error>Parse errors</dfn> from the <a href=#url-parser>URL parser</a>
     <li>The <dfn id=concept-url-serializer title=concept-url-serializer>URL serializer</dfn>
     <li><dfn id=default-encode-set>Default encode set</dfn>
     <li><dfn id=percent-encode>Percent encode</dfn>
     <li><dfn id=utf-8-percent-encode>UTF-8 percent encode</dfn>
     <li><dfn id=percent-decode>Percent decode</dfn>
     <li><dfn id=decoder-error>Decoder error</dfn>
     <li>The <dfn id=domain-label-to-ascii>domain label to ASCII</dfn> algorithm</li>
     <li>The <dfn id=domain-label-to-unicode>domain label to Unicode</dfn> algorithm</li>
     <li><dfn id=urlutils><code>URLUtils</code></dfn> interface
     <li><dfn id=urlutilsreadonly><code>URLUtilsReadOnly</code></dfn> interface
     <li><dfn id=dom-url-href title=dom-url-href><code>href</code> attribute</dfn>
     <li><dfn id=dom-url-protocol title=dom-url-protocol><code>protocol</code> attribute</dfn>
     <li>The <dfn id=concept-uu-get-the-base title=concept-uu-get-the-base>get the base</dfn> hook for <code><a href=#urlutils>URLUtils</a></code>
     <li>The <dfn id=concept-uu-update title=concept-uu-update>update steps</dfn> hook for <code><a href=#urlutils>URLUtils</a></code>
     <li>The <dfn id=concept-uu-set-the-input title=concept-uu-set-the-input>set the input</dfn> algorithm for <code><a href=#urlutils>URLUtils</a></code>
     <li>The <dfn id=concept-uu-query-encoding title=concept-uu-query-encoding>query encoding</dfn> of an <code><a href=#urlutils>URLUtils</a></code> object
     <li>The <dfn id=concept-uu-input title=concept-uu-input>input</dfn> of an <code><a href=#urlutils>URLUtils</a></code> object
     <li>The <dfn id=concept-uu-url title=concept-uu-url>url</dfn> of an <code><a href=#urlutils>URLUtils</a></code> object
    </ul></dd>


   <dt>Cookies</dt>

   <dd>

    <p>The following terms are defined in the Cookie specification: <a href=#refsCOOKIES>[COOKIES]</a></p>

    <ul class=brief><li><dfn id=cookie-string>cookie-string</dfn>
     <li><dfn id=receives-a-set-cookie-string>receives a set-cookie-string</dfn>
    </ul></dd>


   <dt>Fetch</dt>

   <dd>

    <p>The following terms are defined in the WHATWG Fetch specification: <a href=#refsFETCH>[FETCH]</a></p>

    <ul class=brief><li><dfn id=cross-origin-request>cross-origin request</dfn>
     <li><dfn id=cross-origin-request-status>cross-origin request status</dfn>
     <li><dfn id=custom-request-headers>custom request headers</dfn>
     <li><dfn id=simple-cross-origin-request>simple cross-origin request</dfn>
     <li><dfn id=redirect-steps>redirect steps</dfn>
     <li><dfn id=omit-credentials-flag>omit credentials flag</dfn>
     <li><dfn id=resource-sharing-check>resource sharing check</dfn>
    </ul><p class=note>This specification does not yet use the "fetch" algorithm from the WHATWG Fetch
    specification. It will be updated to do so in due course.</p>

   </dd>


<!--TOPIC:DOM APIs-->

   <dt>Web IDL</dt>

   <dd>

    <p>The IDL fragments in this specification must be interpreted as required for conforming IDL
    fragments, as described in the Web IDL specification. <a href=#refsWEBIDL>[WEBIDL]</a></p>

    <p>The terms <dfn id=supported-property-indices>supported property indices</dfn>, <dfn id=determine-the-value-of-an-indexed-property>determine the value of an indexed
    property</dfn>, <dfn id=support-named-properties>support named properties</dfn>, <dfn id=supported-property-names>supported property names</dfn>,
    <dfn id=unenumerable>unenumerable</dfn>, <dfn id=determine-the-value-of-a-named-property>determine the value of a named property</dfn>, <dfn id=platform-array-objects>platform array
    objects</dfn>, and <dfn id=dfn-read-only-array title=dfn-read-only-array>read only</dfn> (when applied to arrays)
    are used as defined in the Web IDL specification. The algorithm to <dfn id=convert-a-domstring-to-a-sequence-of-unicode-characters>convert a DOMString to a
    sequence of Unicode characters</dfn> is similarly that defined in the Web IDL specification.</p>

    <p>When this specification requires a user agent to <dfn id=create-a-date-object>create a <code>Date</code> object</dfn>
    representing a particular time (which could be the special value Not-a-Number), the milliseconds
    component of that time, if any, must be truncated to an integer, and the time value of the newly
    created <code>Date</code> object must represent the resulting truncated time.</p>

    <p class=example>For instance, given the time 23045 millionths of a second after 01:00 UTC on
    January 1st 2000, i.e. the time 2000-01-01T00:00:00.023045Z, then the <code>Date</code> object
    created representing that time would represent the same time as that created representing the
    time 2000-01-01T00:00:00.023Z, 45 millionths earlier. If the given time is NaN, then the result
    is a <code>Date</code> object that represents a time value NaN (indicating that the object does
    not represent a specific instant of time).</p>

   </dd>


   <dt>JavaScript</dt>

   <dd>

    <p>Some parts of the language described by this specification only support JavaScript as the
    underlying scripting language. <a href=#refsECMA262>[ECMA262]</a></p>

    <p class=note>The term "JavaScript" is used to refer to ECMA262, rather than the official term
    ECMAScript, since the term JavaScript is more widely known. Similarly, the <a href=#mime-type>MIME
    type</a> used to refer to JavaScript in this specification is <code title="">text/javascript</code>, since that is the most commonly used type, <a href=#willful-violation title="willful
    violation">despite it being an officially obsoleted type</a> according to RFC 4329. <a href=#refsRFC4329>[RFC4329]</a></p>

    <p>The term <dfn id=javascript-global-environment>JavaScript global environment</dfn> refers to the <i title="">global
    environment</i> concept defined in the ECMAScript specification.</p>

    <p>The ECMAScript <dfn id=js-syntaxerror title=js-SyntaxError><code>SyntaxError</code></dfn> exception is also
    defined in the ECMAScript specification. <a href=#refsECMA262>[ECMA262]</a></p>

    <p>The <dfn id=arraybuffer>ArrayBuffer</dfn> and related object types and underlying concepts from the
    ECMAScript Specification are used for several features in this specification. <a href=#refsECMA262>[ECMA262]</a></p>

    <p>The following helper IDL is used for referring to <code><a href=#arraybuffer>ArrayBuffer</a></code>-related types:</p>

    <pre class=idl>typedef (<dfn id=int8array>Int8Array</dfn> or <dfn id=uint8array>Uint8Array</dfn> or <dfn id=uint8clampedarray>Uint8ClampedArray</dfn> or
         <dfn id=int16array>Int16Array</dfn> or <dfn id=uint16array>Uint16Array</dfn> or
         <dfn id=int32array>Int32Array</dfn> or <dfn id=uint32array>Uint32Array</dfn> or
         <dfn id=float32array>Float32Array</dfn> or <dfn id=float64array>Float64Array</dfn> or
         <dfn id=dataview>DataView</dfn>) <dfn id=arraybufferview>ArrayBufferView</dfn>;</pre>

    <p class=note>In particular, the <code><a href=#uint8clampedarray>Uint8ClampedArray</a></code> type is used by some <a href=#imagedata title=ImageData>2D canvas APIs</a>, and the <a href=#network><code>WebSocket</code>
    API</a> uses <code><a href=#arraybuffer>ArrayBuffer</a></code> objects for handling binary frames.</p>

   </dd>


   <dt>DOM</dt>

   <dd>

    <p>The Document Object Model (DOM) is a representation &mdash; a model &mdash; of a document and
    its content. The DOM is not just an API; the conformance criteria of HTML implementations are
    defined, in this specification, in terms of operations on the DOM. <a href=#refsDOM>[DOM]</a></p>

    <p>Implementations must support DOM and the events defined in DOM Events, because this
    specification is defined in terms of the DOM, and some of the features are defined as extensions
    to the DOM interfaces. <a href=#refsDOM>[DOM]</a> <a href=#refsDOMEVENTS>[DOMEVENTS]</a></p>

    <p>In particular, the following features are defined in the DOM specification: <a href=#refsDOM>[DOM]</a></p> <!-- aka DOM Core or DOMCORE -->

    <ul class=brief><li><dfn id=attr><code>Attr</code></dfn> interface</li>
     <li><dfn id=comment-0><code>Comment</code></dfn> interface</li>
     <li><dfn id=domimplementation><code>DOMImplementation</code></dfn> interface</li>
     <li><dfn id=dom-document title="DOM Document"><code>Document</code></dfn> interface</li>
     <li><dfn id=documentfragment><code>DocumentFragment</code></dfn> interface</li>
     <li><dfn id=documenttype><code>DocumentType</code></dfn> interface</li>
     <li><dfn id=domexception><code>DOMException</code></dfn> interface</li>
     <li><dfn id=childnode><code>ChildNode</code></dfn> interface</li>
     <li><dfn id=element><code>Element</code></dfn> interface</li>
     <li><dfn id=node><code>Node</code></dfn> interface</li>
     <li><dfn id=nodelist><code>NodeList</code></dfn> interface</li>
     <li><dfn id=processinginstruction><code>ProcessingInstruction</code></dfn> interface</li>
     <li><dfn id=text><code>Text</code></dfn> interface</li>

     <li><dfn id=htmlcollection><code>HTMLCollection</code></dfn> interface</li>
     <li><dfn id=dom-htmlcollection-item title=dom-HTMLCollection-item><code>item()</code></dfn> method</li>
     <li>The terms <dfn id=collections>collections</dfn> and <dfn id=represented-by-the-collection>represented by the collection</dfn></li>

     <li><dfn id=domtokenlist><code>DOMTokenList</code></dfn> interface</li>
     <li><dfn id=domsettabletokenlist><code>DOMSettableTokenList</code></dfn> interface</li>

     <li><dfn id=dom-domimplementation-createdocument title=dom-DOMImplementation-createDocument><code>createDocument()</code></dfn> method</li>
     <li><dfn id=dom-domimplementation-createhtmldocument title=dom-DOMImplementation-createHTMLDocument><code>createHTMLDocument()</code></dfn> method</li>
     <li><dfn id=dom-document-createelement title=dom-Document-createElement><code>createElement()</code></dfn> method</li>
     <li><dfn id=dom-document-createelementns title=dom-Document-createElementNS><code>createElementNS()</code></dfn> method</li>
     <li><dfn id=dom-document-getelementbyid title=dom-Document-getElementById><code>getElementById()</code></dfn> method</li>
     <li><dfn id=dom-node-insertbefore title=dom-Node-insertBefore><code>insertBefore()</code></dfn> method</li>

     <li><dfn id=dom-node-ownerdocument title=dom-Node-ownerDocument><code>ownerDocument</code></dfn> attribute</li>
     <li><dfn id=dom-node-childnodes title=dom-Node-childNodes><code>childNodes</code></dfn> attribute</li>
     <li><dfn id=dom-node-localname title=dom-Node-localName><code>localName</code></dfn> attribute</li>
     <li><dfn id=dom-node-parentnode title=dom-Node-parentNode><code>parentNode</code></dfn> attribute</li>
     <li><dfn id=dom-node-namespaceuri title=dom-Node-namespaceURI><code>namespaceURI</code></dfn> attribute</li>
     <li><dfn id=dom-element-tagname title=dom-Element-tagName><code>tagName</code></dfn> attribute</li>
     <li><dfn id=dom-element-id title=dom-Element-id><code>id</code></dfn> attribute</li>
     <li><dfn id=textcontent><code>textContent</code></dfn> attribute</li>

     <li>The <dfn id=concept-node-insert title=concept-node-insert>insert</dfn>, <dfn id=concept-node-append title=concept-node-append>append</dfn>, <dfn id=concept-node-remove title=concept-node-remove>remove</dfn>, <dfn id=concept-node-replace title=concept-node-replace>replace</dfn>, and <dfn id=concept-node-adopt title=concept-node-adopt>adopt</dfn> algorithms for nodes</li>
     <li>The <dfn id=nodes-are-inserted>nodes are inserted</dfn> and <dfn id=nodes-are-removed>nodes are removed</dfn> concepts</li>
     <li>An element's <dfn id=concept-node-adopt-ext title=concept-node-adopt-ext>adopting steps</dfn></li>
     <li>The <dfn id=attribute-list>attribute list</dfn> concept.</li>
     <li>The <dfn id=concept-cd-data title=concept-cd-data>data</dfn> of a text node.</li>

     <li><dfn id=event><code>Event</code></dfn> interface</li>
     <li><dfn id=eventtarget><code>EventTarget</code></dfn> interface</li>
     <li><dfn id=eventinit><code>EventInit</code></dfn> dictionary type</li>
     <li><dfn id=dom-event-target title=dom-Event-target><code>target</code></dfn> attribute</li>
     <li><dfn id=dom-event-istrusted title=dom-Event-isTrusted><code>isTrusted</code></dfn> attribute</li>
     <li>The <dfn id=concept-event-type title=concept-event-type>type</dfn> of an event</li>
     <li>The concept of an <dfn id=concept-event-listener title=concept-event-listener>event listener</dfn> and the <a href=#concept-event-listener title=concept-event-listener>event listeners</a> associated with an <code><a href=#eventtarget>EventTarget</a></code></li>
     <li>The concept of a <dfn id=target-override>target override</dfn></li>
     <li>The concept of a regular <dfn id=event-parent>event parent</dfn> and a <dfn id=cross-boundary-event-parent>cross-boundary event parent</dfn></li> <!-- see bug 18780 -->

     <li>The <dfn id="document's-character-encoding" title="document's character encoding">encoding</dfn> (herein the <i>character encoding</i>) and <dfn id=concept-document-content-type title=concept-document-content-type>content type</dfn> of a <code><a href=#document>Document</a></code></li>
     <li>The distinction between <dfn id=xml-documents>XML documents</dfn> and <dfn id=html-documents>HTML documents</dfn></li>
     <li>The terms <dfn id=quirks-mode>quirks mode</dfn>, <dfn id=limited-quirks-mode>limited-quirks mode</dfn>, and <dfn id=no-quirks-mode>no-quirks mode</dfn></li>
     <li>The algorithm to <dfn id=concept-node-clone title=concept-node-clone>clone</dfn> a <code><a href=#node>Node</a></code>, and the concept of <dfn id=concept-node-clone-ext title=concept-node-clone-ext>cloning steps</dfn> used by that algorithm</li>
     <li>The concept of <dfn id=base-url-change-steps>base URL change steps</dfn> and the definition of what happens when an element is <dfn id=affected-by-a-base-url-change>affected by a base URL change</dfn></li>
     <li>The concept of an element's <dfn id=concept-id title=concept-id>unique identifier (ID)</dfn></li>

     <li>The concept of a DOM <dfn id=concept-range title=concept-range>range</dfn>, and the terms <dfn id=concept-range-start title=concept-range-start>start</dfn>, <dfn id=concept-range-end title=concept-range-end>end</dfn>, and <dfn id=concept-range-bp title=concept-range-bp>boundary point</dfn> as applied to ranges.</li>

     <li><dfn id=mutationobserver><code>MutationObserver</code></dfn> interface</li>
     <li>The <dfn id=concept-mo-invoke title=concept-mo-invoke>invoke <code>MutationObserver</code> objects</dfn> algorithm</li>

     <li><dfn id=promise>Promise</dfn> interface</li>
     <li>The <dfn id=concept-resolver title=concept-resolver>resolver</dfn> concept</li>
     <li>The <dfn id=concept-resolver-fulfill title=concept-resolver-fulfill>fulfill</dfn> and <dfn id=concept-resolver-reject title=concept-resolver-reject>reject</dfn> algorithms</li>

    </ul><p>The term <dfn id=throw>throw</dfn> in this specification is used as defined in the DOM specification.
    The following <code><a href=#domexception>DOMException</a></code> types are defined in the DOM specification: <a href=#refsDOM>[DOM]</a></p>

    <ol class=brief><li value=1><dfn id=indexsizeerror><code>IndexSizeError</code></dfn></li>
     <li value=3><dfn id=hierarchyrequesterror><code>HierarchyRequestError</code></dfn></li>
     <li value=4><dfn id=wrongdocumenterror><code>WrongDocumentError</code></dfn></li>
     <li value=5><dfn id=invalidcharactererror><code>InvalidCharacterError</code></dfn></li>
     <li value=7><dfn id=nomodificationallowederror><code>NoModificationAllowedError</code></dfn></li>
     <li value=8><dfn id=notfounderror><code>NotFoundError</code></dfn></li>
     <li value=9><dfn id=notsupportederror><code>NotSupportedError</code></dfn></li>
     <li value=11><dfn id=invalidstateerror><code>InvalidStateError</code></dfn></li>
     <li value=12><dfn id=syntaxerror><code>SyntaxError</code></dfn></li>
     <li value=13><dfn id=invalidmodificationerror><code>InvalidModificationError</code></dfn></li>
     <li value=14><dfn id=namespaceerror><code>NamespaceError</code></dfn></li>
     <li value=15><dfn id=invalidaccesserror><code>InvalidAccessError</code></dfn></li>
     <li value=18><dfn id=securityerror><code>SecurityError</code></dfn></li>
     <li value=19><dfn id=networkerror><code>NetworkError</code></dfn></li>
     <li value=20><dfn id=aborterror><code>AbortError</code></dfn></li>
     <li value=21><dfn id=urlmismatcherror><code>URLMismatchError</code></dfn></li>
     <li value=22><dfn id=quotaexceedederror><code>QuotaExceededError</code></dfn></li>
     <li value=23><dfn id=timeouterror><code>TimeoutError</code></dfn></li>
     <li value=24><dfn id=invalidnodetypeerror><code>InvalidNodeTypeError</code></dfn></li>
     <li value=25><dfn id=datacloneerror><code>DataCloneError</code></dfn></li>
    </ol><p class=example>For example, to <i>throw a <code><a href=#timeouterror>TimeoutError</a></code> exception</i>, a user
    agent would construct a <code><a href=#domexception>DOMException</a></code> object whose type was the string "<code title="">TimeoutError</code>" (and whose code was the number 23, for legacy reasons) and
    actually throw that object as an exception.</p>

    <p>The following features are defined in the DOM Events specification: <a href=#refsDOMEVENTS>[DOMEVENTS]</a></p>

    <ul class=brief><li><dfn id=mouseevent><code>MouseEvent</code></dfn> interface</li>
     <li><dfn id=mouseeventinit><code>MouseEventInit</code></dfn> dictionary type</li>

     <li>The <dfn id=focusevent><code>FocusEvent</code></dfn> interface and its <dfn id=dom-focusevent-relatedtarget title=dom-FocusEvent-relatedTarget><code>relatedTarget</code></dfn> attribute</li>

     <li>The <dfn id=uievent><code>UIEvent</code></dfn> interface's <dfn id=dom-uievent-detail title=dom-UIEvent-detail><code>detail</code></dfn> attribute</li>

     <li><dfn id=event-click title=event-click><code>click</code></dfn> event</li>
     <li><dfn id=event-dblclick title=event-dblclick><code>dblclick</code></dfn> event</li>
     <li><dfn id=event-mousedown title=event-mousedown><code>mousedown</code></dfn> event</li>
     <li><dfn id=event-mouseenter title=event-mouseenter><code>mouseenter</code></dfn> event</li>
     <li><dfn id=event-mouseleave title=event-mouseleave><code>mouseleave</code></dfn> event</li>
     <li><dfn id=event-mousemove title=event-mousemove><code>mousemove</code></dfn> event</li>
     <li><dfn id=event-mouseout title=event-mouseout><code>mouseout</code></dfn> event</li>
     <li><dfn id=event-mouseover title=event-mouseover><code>mouseover</code></dfn> event</li>
     <li><dfn id=event-mouseup title=event-mouseup><code>mouseup</code></dfn> event</li>
     <li><dfn id=event-mousewheel title=event-mousewheel><code>mousewheel</code></dfn> event</li>

     <li><dfn id=event-keydown title=event-keydown><code>keydown</code></dfn> event</li>
     <li><dfn id=event-keyup title=event-keyup><code>keyup</code></dfn> event</li>
     <li><dfn id=event-keypress title=event-keypress><code>keypress</code></dfn> event</li>

    </ul><p>The following features are defined in the Touch Events specification: <a href=#refsTOUCH>[TOUCH]</a></p>

    <ul class=brief><li><dfn id=touch><code>Touch</code></dfn> interface</li>

     <li><dfn id=touch-point>Touch point</dfn> concept</li>

    </ul><p>This specification sometimes uses the term <dfn title="">name</dfn> to refer to the event's
    <code title=dom-event-type>type</code>; as in, "an event named <code title="">click</code>"
    or "if the event name is <code title="">keypress</code>". The terms "name" and "type" for
    events are synonymous.</p>

    <p>The following features are defined in the DOM Parsing and Serialization specification: <a href=#refsDOMPARSING>[DOMPARSING]</a></p>

    <ul class=brief><li><dfn id=dom-innerhtml title=dom-innerHTML><code>innerHTML</code></dfn></li>
     <li><dfn id=dom-outerhtml title=dom-outerHTML><code>outerHTML</code></dfn></li>
    </ul><p class=note>User agents are also encouraged to implement the features described in the
    <cite>HTML Editing APIs</cite> and <cite><code>UndoManager</code> and DOM Transaction</cite>
    specifications.
    <a href=#refsEDITING>[EDITING]</a>
    <a href=#refsUNDO>[UNDO]</a>
    </p>

    <p>The following parts of the Fullscreen specification are referenced from this specification,
    in part to define the rendering of <code><a href=#the-dialog-element>dialog</a></code> elements, and also to define how the
    Fullscreen API interacts with the sandboxing features in HTML: <a href=#refsFULLSCREEN>[FULLSCREEN]</a></p>

    <ul class=brief><li>The <dfn id=top-layer>top layer</dfn> concept</li>
     <li><dfn id=dom-element-requestfullscreen title=dom-element-requestFullscreen><code>requestFullscreen()</code></dfn>
     <li>The <dfn id=fullscreen-enabled-flag>fullscreen enabled flag</dfn></li>
     <li>The <dfn id=fully-exit-fullscreen>fully exit fullscreen</dfn> algorithm</li>
    </ul></dd>



   <dt>File API</dt>

   <dd>

    <p>This specification uses the following features defined in the File API specification: <a href=#refsFILEAPI>[FILEAPI]</a></p>

    <ul class=brief><li><dfn id=blob><code>Blob</code></dfn></li>
     <li><dfn id=file><code>File</code></dfn></li>
     <li><dfn id=filelist><code>FileList</code></dfn></li>
     <li><dfn id=dom-blob-close title=dom-Blob-close><code>Blob.close()</code></dfn></li>
     <li><dfn id=dom-blob-type title=dom-Blob-type><code>Blob.type</code></dfn></li>
     <li>The concept of <dfn id=file-error-read title=file-error-read>read errors</dfn></li>
    </ul></dd>


   <dt>XMLHttpRequest</dt>

   <dd>

    <p>This specification references the XMLHttpRequest specification to describe how the two
    specifications interact and to use its <code><a href=#progressevent>ProgressEvent</a></code> features. The following
    features and terms are defined in the XMLHttpRequest specification: <a href=#refsXHR>[XHR]</a></p>

    <ul class=brief><li><dfn id=xmlhttprequest><code>XMLHttpRequest</code></dfn>
     <li><dfn id=progressevent><code>ProgressEvent</code></dfn>
     <li><dfn id=fire-a-progress-event title="fire a progress event">Fire a progress event named <var title="">e</var></dfn>

    </ul></dd>


<!--TOPIC:HTML-->

   <dt>Media Queries</dt>

   <dd>

    <p>Implementations must support the Media Queries language. <a href=#refsMQ>[MQ]</a></p>

   </dd>


   <dt>CSS modules</dt>

   <dd>

    <p>While support for CSS as a whole is not required of implementations of this specification
    (though it is encouraged, at least for Web browsers), some features are defined in terms of
    specific CSS requirements.</p>

    <p>In particular, some features require that a string be <dfn id=parsed-as-a-css-color-value>parsed as a CSS &lt;color&gt;
    value</dfn>. When parsing a CSS value, user agents are required by the CSS specifications to
    apply some error handling rules. These apply to this specification also. <a href=#refsCSSCOLOR>[CSSCOLOR]</a> <a href=#refsCSS>[CSS]</a></p>

    <p class=example>For example, user agents are required to close all open constructs upon
    finding the end of a style sheet unexpectedly. Thus, when parsing the string "<code title="">rgb(0,0,0</code>" (with a missing close-parenthesis) for a color value, the close
    parenthesis is implied by this error handling rule, and a value is obtained (the color 'black').
    However, the similar construct "<code title="">rgb(0,0,</code>" (with both a missing parenthesis
    and a missing "blue" value) cannot be parsed, as closing the open construct does not result in a
    viable value.</p>

    <p>The term <dfn id=css-element-reference-identifier>CSS element reference identifier</dfn> is used as defined in the <cite>CSS
    Image Values and Replaced Content</cite> specification to define the API that declares
    identifiers for use with the CSS 'element()' function. <a href=#refsCSSIMAGES>[CSSIMAGES]</a></p>

    <p>Similarly, the term <dfn id=provides-a-paint-source>provides a paint source</dfn> is used as defined in the <cite>CSS
    Image Values and Replaced Content</cite> specification to define the interaction of certain HTML
    elements with the CSS 'element()' function. <a href=#refsCSSIMAGES>[CSSIMAGES]</a></p>

    <p>The term <dfn id=default-object-size>default object size</dfn> is also defined in the <cite>CSS Image Values and
    Replaced Content</cite> specification. <a href=#refsCSSIMAGES>[CSSIMAGES]</a></p>

    <p>Implementations that support scripting must support the CSS Object Model. The following
    features and terms are defined in the CSSOM specifications: <a href=#refsCSSOM>[CSSOM]</a> <a href=#refsCSSOMVIEW>[CSSOMVIEW]</a>

    <ul class=brief><li><dfn id=screen><code>Screen</code></dfn></li>
     <li><dfn id=linkstyle><code>LinkStyle</code></dfn></li>
     <li><dfn id=cssstyledeclaration><code>CSSStyleDeclaration</code></dfn></li>
     <li><dfn id=dom-cssstyledeclaration-csstext title=dom-CSSStyleDeclaration-cssText><code>cssText</code></dfn> attribute of <code><a href=#cssstyledeclaration>CSSStyleDeclaration</a></code></li>
     <li><dfn id=stylesheet><code>StyleSheet</code></dfn></li>
     <li>The terms <dfn id=create-a-css-style-sheet>create a CSS style sheet</dfn>, <dfn id=remove-a-css-style-sheet>remove a CSS style sheet</dfn>, and <dfn id=associated-css-style-sheet>associated CSS style sheet</dfn></li>
     <li><dfn id=css-style-sheet title="CSS style sheet">CSS style sheets</dfn> and their properties:
         <dfn id=concept-css-style-sheet-type title=concept-css-style-sheet-type>type</dfn>,
         <dfn id=concept-css-style-sheet-location title=concept-css-style-sheet-location>location</dfn>,
         <dfn id=concept-css-style-sheet-parent-css-style-sheet title=concept-css-style-sheet-parent-CSS-style-sheet>parent CSS style sheet</dfn>,
         <dfn id=concept-css-style-sheet-owner-node title=concept-css-style-sheet-owner-node>owner node</dfn>,
         <dfn id=concept-css-style-sheet-owner-css-rule title=concept-css-style-sheet-owner-CSS-rule>owner CSS rule</dfn>,
         <dfn id=concept-css-style-sheet-media title=concept-css-style-sheet-media>media</dfn>,
         <dfn id=concept-css-style-sheet-title title=concept-css-style-sheet-title>title</dfn>,
         <dfn id=concept-css-style-sheet-alternate-flag title=concept-css-style-sheet-alternate-flag>alternate flag</dfn>,
         <dfn id=concept-css-style-sheet-disabeld-flag title=concept-css-style-sheet-disabeld-flag>disabled flag</dfn>,
         <dfn id=concept-css-style-sheet-css-rules title=concept-css-style-sheet-CSS-rules>CSS rules</dfn>,
         <dfn id=concept-css-style-sheet-origin-clean-flag title=concept-css-style-sheet-origin-clean-flag>origin-clean flag</dfn>
     </li>
     <li><dfn id=alternative-style-sheet-sets>Alternative style sheet sets</dfn> and the <dfn id=preferred-style-sheet-set>preferred style sheet set</dfn></li>
     <li><dfn id=serializing-a-css-value>Serializing a CSS value</dfn></li>
     <li><dfn id=scroll-an-element-into-view>Scroll an element into view</dfn></li>
     <li><dfn id=scroll-to-the-beginning-of-the-document>Scroll to the beginning of the document</dfn></li>
     <li>The <dfn id=event-resize title=event-resize><code>resize</code></dfn> event</li>
     <li>The <dfn id=event-scroll title=event-scroll><code>scroll</code></dfn> event</li>
    </ul><p>The term <dfn id=environment-encoding>environment encoding</dfn> is defined in the <cite>CSS Syntax</cite>
    specifications. <a href=#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

    <p>The term <dfn id=css-styling-attribute>CSS styling attribute</dfn> is defined in the <cite>CSS Style Attributes</cite>
    specification. <a href=#refsCSSATTR>[CSSATTR]</a></p>

    <p>The <code><a href=#canvasrenderingcontext2d>CanvasRenderingContext2D</a></code> object's use of fonts depends on the features
    described in the CSS <cite>Fonts</cite> and <cite>Font Load Events</cite> specifications, including in particular
    <dfn id=fontloader><code>FontLoader</code></dfn>. <a href=#refsCSSFONTS>[CSSFONTS]</a> <a href=#refsCSSFONTLOAD>[CSSFONTLOAD]</a></p>

   </dd>


<!--TOPIC:Canvas-->

   <dt>SVG</dt>

   <dd>

    <p>The following interface is defined in the SVG specification: <a href=#refsSVG>[SVG]</a></p>

    <ul class=brief><li><dfn id=svgmatrix><code>SVGMatrix</code></dfn>
    </ul><!-- mention that the parser supports it? --></dd>


   <dt>WebGL</dt>

   <dd>

    <p>The following interface is defined in the WebGL specification: <a href=#refsWEBGL>[WEBGL]</a></p>

    <ul class=brief><li><dfn id=webglrenderingcontext><code>WebGLRenderingContext</code></dfn>
    </ul></dd>


<!--TOPIC:HTML-->

   <!-- mention that the parser supports mathml? -->


<!--TOPIC:Video Text Tracks-->

   <dt>WebVTT</dt>

   <dd>

    <p>Implementations may support <dfn id=webvtt>WebVTT</dfn> as a text track format for subtitles, captions,
    chapter titles, metadata, etc, for media resources. <a href=#refsWEBVTT>[WEBVTT]</a></p>

    <p>The following terms, used in this specification, are defined in the WebVTT specification:</p>

    <ul class=brief><li><dfn id=webvtt-file>WebVTT file</dfn>
     <li><dfn id=webvtt-file-using-cue-text>WebVTT file using cue text</dfn>
     <li><dfn id=webvtt-file-using-chapter-title-text>WebVTT file using chapter title text</dfn>
     <li><dfn id=webvtt-file-using-only-nested-cues>WebVTT file using only nested cues</dfn>
     <li><dfn id=webvtt-parser>WebVTT parser</dfn>
     <li>The <dfn id=rules-for-updating-the-display-of-webvtt-text-tracks>rules for updating the display of WebVTT text tracks</dfn>
     <li>The <dfn id=rules-for-interpreting-webvtt-cue-text>rules for interpreting WebVTT cue text</dfn>
     <li>The WebVTT <dfn id=text-track-cue-writing-direction>text track cue writing direction</dfn>
    </ul></dd>


<!--TOPIC:WebSocket API-->

   <dt>The WebSocket protocol</dt>

   <dd>

    <p>The following terms are defined in the WebSocket protocol specification: <a href=#refsWSP>[WSP]</a></p>

    <ul class=brief><li><dfn id=establish-a-websocket-connection>establish a WebSocket connection</dfn>
     <li><dfn id=the-websocket-connection-is-established>the WebSocket connection is established</dfn>
     <li><dfn id="validate-the-server's-response">validate the server's response</dfn>
     <li><dfn id=extensions-in-use>extensions in use</dfn>
     <li><dfn id=subprotocol-in-use>subprotocol in use</dfn>
     <li><dfn id=headers-to-send-appropriate-cookies>headers to send appropriate cookies</dfn>
     <li><dfn id="cookies-set-during-the-server's-opening-handshake">cookies set during the server's opening handshake</dfn>
     <li><dfn id=a-websocket-message-has-been-received>a WebSocket message has been received</dfn>
     <li><dfn id=send-a-websocket-message>send a WebSocket Message</dfn>
     <li><dfn id=fail-the-websocket-connection>fail the WebSocket connection</dfn>
     <li><dfn id=close-the-websocket-connection>close the WebSocket connection</dfn>
     <li><dfn id=start-the-websocket-closing-handshake>start the WebSocket closing handshake</dfn>
     <li><dfn id=the-websocket-closing-handshake-is-started>the WebSocket closing handshake is started</dfn>
     <li><dfn id=the-websocket-connection-is-closed>the WebSocket connection is closed</dfn> (possibly <i title="">cleanly</i>)
     <li><dfn id=the-websocket-connection-close-code>the WebSocket connection close code</dfn>
     <li><dfn id=the-websocket-connection-close-reason>the WebSocket connection close reason</dfn>

    </ul></dd>


<!--TOPIC:HTML-->

   <dt>ARIA</dt>

   <dd>

    <p>The terms <dfn id=strong-native-semantics>strong native semantics</dfn> is used as defined in the ARIA specification.
    The term <dfn id=default-implicit-aria-semantics>default implicit ARIA semantics</dfn> has the same meaning as the term <i>implicit
    WAI-ARIA semantics</i> as used in the ARIA specification. <a href=#refsARIA>[ARIA]</a></p>

    <p>The <dfn id=attr-aria-role title=attr-aria-role><code>role</code></dfn> and <code title="">aria-*</code>
    attributes are defined in the ARIA specification. <a href=#refsARIA>[ARIA]</a></p>


   </dd>


  </dl><p>This specification does not <em>require</em> support of any particular network protocol, style
  sheet language, scripting language, or any of the DOM specifications beyond those required in the
  list above. However, the language described by this specification is biased towards CSS as the
  styling language, JavaScript as the scripting language, and HTTP as the network protocol, and
  several features assume that those languages and protocols are in use.</p>

  <p>A user agent that implements the HTTP protocol must implement the Web Origin Concept
  specification and the HTTP State Management Mechanism specification (Cookies) as well. <a href=#refsHTTP>[HTTP]</a> <a href=#refsORIGIN>[ORIGIN]</a> <a href=#refsCOOKIES>[COOKIES]</a></p>

  <p class=note>This specification might have certain additional requirements on character
  encodings, image formats, audio formats, and video formats in the respective sections.</p>

  </div>



  <h4 id=extensibility-0><span class=secno>2.2.3 </span>Extensibility</h4>

  <p>Vendor-specific proprietary user agent extensions to this specification are strongly
  discouraged. Documents must not use such extensions, as doing so reduces interoperability and
  fragments the user base, allowing only users of specific user agents to access the content in
  question.</p>

  <div class=impl>

  <p>If such extensions are nonetheless needed, e.g. for experimental purposes, then vendors are
  strongly urged to use one of the following extension mechanisms:</p>

  <ul><li><p>For markup-level features that can be limited to the XML serialization and need not be
   supported in the HTML serialization, vendors should use the namespace mechanism to define custom
   namespaces in which the non-standard elements and attributes are supported.</p>

   <li>

    <p>For markup-level features that are intended for use with <a href=#syntax>the HTML syntax</a>,
    extensions should be limited to new attributes of the form "<code title="">x-<var title="">vendor</var>-<var title="">feature</var></code>", where <var title="">vendor</var> is a
    short string that identifies the vendor responsible for the extension, and <var title="">feature</var> is the name of the feature. New element names should not be created.
    Using attributes for such extensions exclusively allows extensions from multiple vendors to
    co-exist on the same element, which would not be possible with elements. Using the "<code title="">x-<var title="">vendor</var>-<var title="">feature</var></code>" form allows extensions
    to be made without risk of conflicting with future additions to the specification.</p>

    <div class=example>

     <p>For instance, a browser named "FerretBrowser" could use "ferret" as a vendor prefix, while a
     browser named "Mellblom Browser" could use "mb". If both of these browsers invented extensions
     that turned elements into scratch-and-sniff areas, an author experimenting with these features
     could write:</p>

     <pre>&lt;p&gt;This smells of lemons!
&lt;span x-ferret-smellovision x-ferret-smellcode="LEM01"
      x-mb-outputsmell x-mb-smell="lemon juice"&gt;&lt;/span&gt;&lt;/p&gt;</pre>

    </div>

   </li>

  </ul><p>Attribute names beginning with the two characters "<code title="">x-</code>" are reserved for
  user agent use and are guaranteed to never be formally added to the HTML language. For
  flexibility, attributes names containing underscores (the U+005F LOW LINE character) are also
  reserved for experimental purposes and are guaranteed to never be formally added to the HTML
  language.</p>

  <p class=note>Pages that use such attributes are by definition non-conforming.</p>

  <p>For DOM extensions, e.g. new methods and IDL attributes, the new members should be prefixed by
  vendor-specific strings to prevent clashes with future versions of this specification.</p>

  <p>For events, experimental event types should be prefixed with vendor-specific strings.</p>

  <div class=example>

   <p>For example, if a user agent called "Pleas<!--e h-->old" were to add an event to indicate when
   the user is going up in an elevator, it could use the prefix "<code title="">pleasold</code>" and
   thus name the event "<code title="">pleasoldgoingup</code>", possibly with an event handler
   attribute named "<code title="">onpleasoldgoingup</code>".</p>

  </div>

  <p>All extensions must be defined so that the use of extensions neither contradicts nor causes the
  non-conformance of functionality defined in the specification.</p> <!-- thanks to QA Framework -->

  <div class=example>

   <p>For example, while strongly discouraged from doing so, an implementation "Foo Browser" could
   add a new IDL attribute "<code title="">fooTypeTime</code>" to a control's DOM interface that
   returned the time it took the user to select the current value of a control (say). On the other
   hand, defining a new control that appears in a form's <code title=dom-form-elements><a href=#dom-form-elements>elements</a></code> array would be in violation of the above requirement,
   as it would violate the definition of <code title=dom-form-elements><a href=#dom-form-elements>elements</a></code> given in
   this specification.</p>

  </div>

  <p>When adding new <a href=#reflect title=reflect>reflecting</a> IDL attributes corresponding to content
  attributes of the form "<code title="">x-<var title="">vendor</var>-<var title="">feature</var></code>", the IDL attribute should be named "<code title=""><var title="">vendor</var><var title="">Feature</var></code>" (i.e. the "<code title="">x</code>" is
  dropped from the IDL attribute's name).</p>

  </div>

  <hr><p>When vendor-neutral extensions to this specification are needed, either this specification can
  be updated accordingly, or an extension specification can be written that overrides the
  requirements in this specification. When someone applying this specification to their activities
  decides that they will recognise the requirements of such an extension specification, it becomes
  an <dfn id=other-applicable-specifications title="other applicable specifications">applicable specification</dfn> for the purposes of
  conformance requirements in this specification.</p>

  <p class=note>Someone could write a specification that defines any arbitrary byte stream as
  conforming, and then claim that their random junk is conforming. However, that does not mean that
  their random junk actually is conforming for everyone's purposes: if someone else decides that
  that specification does not apply to their work, then they can quite legitimately say that the
  aforementioned random junk is just that, junk, and not conforming at all. As far as conformance
  goes, what matters in a particular community is what that community <em>agrees</em> is
  applicable.</p>

  <div class=impl>

  <hr><p>User agents must treat elements and attributes that they do not understand as semantically
  neutral; leaving them in the DOM (for DOM processors), and styling them according to CSS (for CSS
  processors), but not inferring any meaning from them.</p>

<!--ADD-TOPIC:Security-->
  <p>When support for a feature is disabled (e.g. as an emergency measure to mitigate a security
  problem, or to aid in development, or for performance reasons), user agents must act as if they
  had no support for the feature whatsoever, and as if the feature was not mentioned in this
  specification. For example, if a particular feature is accessed via an attribute in a Web IDL
  interface, the attribute itself would be omitted from the objects that implement that interface
  &mdash; leaving the attribute on the object but making it return null or throw an exception is
  insufficient.</p>
<!--REMOVE-TOPIC:Security-->

  </div>


  <div class=impl>

  <h4 id=interactions-with-xpath-and-xslt><span class=secno>2.2.4 </span>Interactions with XPath and XSLT</h4>

  <p id=xpath-1.0-processors>Implementations of XPath 1.0 that operate on <a href=#html-documents>HTML
  documents</a> parsed or created in the manners described in this specification (e.g. as part of
  the <code title="">document.evaluate()</code> API) must act as if the following edit was applied
  to the XPath 1.0 specification.</p>

  <p>First, remove this paragraph:</p>

  <blockquote cite=http://www.w3.org/TR/1999/REC-xpath-19991116#node-tests>

   <p>A <a href=http://www.w3.org/TR/REC-xml-names#NT-QName>QName</a> in the node test is expanded
   into an <a href=http://www.w3.org/TR/1999/REC-xpath-19991116#dt-expanded-name>expanded-name</a>
   using the namespace declarations from the expression context. This is the same way expansion is
   done for element type names in start and end-tags except that the default namespace declared with
   <code title="">xmlns</code> is not used: if the <a href=http://www.w3.org/TR/REC-xml-names#NT-QName>QName</a> does not have a prefix, then the
   namespace URI is null (this is the same way attribute names are expanded). It is an error if the
   <a href=http://www.w3.org/TR/REC-xml-names#NT-QName>QName</a> has a prefix for which there is
   no namespace declaration in the expression context.</p>

  </blockquote>

  <p>Then, insert in its place the following:</p>

  <blockquote cite="http://www.w3.org/Bugs/Public/show_bug.cgi?id=7059#c37">

   <p>A QName in the node test is expanded into an expanded-name using the namespace declarations
   from the expression context. If the QName has a prefix, then there must be a<!-- added 2009-10-27
   - http://www.w3.org/Bugs/Public/show_bug.cgi?id=8062 --> namespace declaration for this prefix in
   the expression context, and the corresponding<!-- typo fixed 2009-10-27 -
   http://www.w3.org/Bugs/Public/show_bug.cgi?id=8063 --> namespace URI is the one that is
   associated with this prefix. It is an error if the QName has a prefix for which there is no
   namespace declaration in the expression context. </p>

   <p>If the QName has no prefix and the principal node type of the axis is element, then the
   default element namespace is used. Otherwise if the QName has no prefix, the namespace URI is
   null. The default element namespace is a member of the context for the XPath expression. The
   value of the default element namespace when executing an XPath expression through the DOM3 XPath
   API is determined in the following way:</p>

   <ol><li>If the context node is from an HTML DOM, the default element namespace is
    "http://www.w3.org/1999/xhtml".</li>

    <li>Otherwise, the default element namespace URI is null.</li>

   </ol><p class=note>This is equivalent to adding the default element namespace feature of XPath 2.0
   to XPath 1.0, and using the HTML namespace as the default element namespace for HTML documents.
   It is motivated by the desire to have implementations be compatible with legacy HTML content
   while still supporting the changes that this specification introduces to HTML regarding the
   namespace used for HTML elements, and by the desire to use XPath 1.0 rather than XPath 2.0.</p>

  </blockquote>

  <p class=note>This change is a <a href=#willful-violation>willful violation</a> of the XPath 1.0 specification,
  motivated by desire to have implementations be compatible with legacy content while still
  supporting the changes that this specification introduces to HTML regarding which namespace is
  used for HTML elements. <a href=#refsXPATH10>[XPATH10]</a></p> <!-- note: version matters for
  this ref -->

  <hr><p id=dom-based-xslt-1.0-processors>XSLT 1.0 processors outputting to a DOM when the output
  method is "html" (either explicitly or via the defaulting rule in XSLT 1.0) are affected as
  follows:</p>

  <p>If the transformation program outputs an element in no namespace, the processor must, prior to
  constructing the corresponding DOM element node, change the namespace of the element to the
  <a href=#html-namespace-0>HTML namespace</a>, <a href=#converted-to-ascii-lowercase title="converted to ASCII lowercase">ASCII-lowercase</a> the
  element's local name, and <a href=#converted-to-ascii-lowercase title="converted to ASCII lowercase">ASCII-lowercase</a> the
  names of any non-namespaced attributes on the element.</p>

  <p class=note>This requirement is a <a href=#willful-violation>willful violation</a> of the XSLT 1.0
  specification, required because this specification changes the namespaces and case-sensitivity
  rules of HTML in a manner that would otherwise be incompatible with DOM-based XSLT
  transformations. (Processors that serialise the output are unaffected.) <a href=#refsXSLT10>[XSLT10]</a></p> <!-- note: version matters for this ref -->

  <hr><p>This specification does not specify precisely how XSLT processing interacts with the <a href=#html-parser>HTML
  parser</a> infrastructure (for example, whether an XSLT processor acts as if it puts any
  elements into a <a href=#stack-of-open-elements>stack of open elements</a>). However, XSLT processors must <a href=#stop-parsing>stop
  parsing</a> if they successfully complete, and must set the <a href=#current-document-readiness>current document
  readiness</a> first to "<code title="">interactive</code>"<!-- this synchronously fires an
  event --> and then to "<code title="">complete</code>"<!-- this also synchronously fires an event
  --> if they are aborted.</p>

  <hr><p>This specification does not specify how XSLT interacts with the <a href=#navigate title=navigate>navigation</a> algorithm, how it fits in with the <a href=#event-loop>event loop</a>, nor
  how error pages are to be handled (e.g. whether XSLT errors are to replace an incremental XSLT
  output, or are rendered inline, etc).</p>

  <p class=note>There are also additional non-normative comments regarding the interaction of XSLT
  and HTML <a href=#scriptTagXSLT>in the <code>script</code> element section</a>, and of
  XSLT, XPath, and HTML <a href=#template-XSLT-XPath>in the <code>template</code> element
  section</a>.</p>

  </div>




  <h3 id=case-sensitivity-and-string-comparison><span class=secno>2.3 </span>Case-sensitivity and string comparison</h3>

  <p>Comparing two strings in a <dfn id=case-sensitive>case-sensitive</dfn> manner means comparing them exactly, code
  point for code point.</p>

  <p>Comparing two strings in an <dfn id=ascii-case-insensitive>ASCII case-insensitive</dfn> manner means comparing them
  exactly, code point for code point, except that the characters in the range U+0041 to U+005A (i.e.
  LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) and the corresponding characters in the range
  U+0061 to U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) are considered to also
  match.</p>

  <p>Comparing two strings in a <dfn id=compatibility-caseless>compatibility caseless</dfn> manner means using the Unicode
  <i>compatibility caseless match</i> operation to compare the two strings, with no language-specific tailoirings. <a href=#refsUNICODE>[UNICODE]</a></p>

  <p>Except where otherwise stated, string comparisons must be performed in a
  <a href=#case-sensitive>case-sensitive</a> manner.</p>


  <div class=impl>

  <p><dfn id=converted-to-ascii-uppercase title="converted to ASCII uppercase">Converting a string to ASCII uppercase</dfn> means
  replacing all characters in the range U+0061 to U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL
  LETTER Z) with the corresponding characters in the range U+0041 to U+005A (i.e. LATIN CAPITAL
  LETTER A to LATIN CAPITAL LETTER Z).</p>

  <p><dfn id=converted-to-ascii-lowercase title="converted to ASCII lowercase">Converting a string to ASCII lowercase</dfn> means
  replacing all characters in the range U+0041 to U+005A (i.e. LATIN CAPITAL LETTER A to LATIN
  CAPITAL LETTER Z) with the corresponding characters in the range U+0061 to U+007A (i.e. LATIN
  SMALL LETTER A to LATIN SMALL LETTER Z).</p>

  </div>


  <p>A string <var title="">pattern</var> is a <dfn id=prefix-match>prefix match</dfn> for a string <var title="">s</var> when <var title="">pattern</var> is not longer than <var title="">s</var> and
  truncating <var title="">s</var> to <var title="">pattern</var>'s length leaves the two strings as
  matches of each other.</p>



  <h3 id=common-microsyntaxes><span class=secno>2.4 </span>Common microsyntaxes</h3>

  <p>There are various places in HTML that accept particular data types, such as dates or numbers.
  This section describes what the conformance criteria for content in those formats is, and how to
  parse them.</p>

  <div class=impl>

  <p class=note>Implementors are strongly urged to carefully examine any third-party libraries
  they might consider using to implement the parsing of syntaxes described below. For example, date
  libraries are likely to implement error handling behavior that differs from what is required in
  this specification, since error-handling behavior is often not defined in specifications that
  describe date syntaxes similar to those used in this specification, and thus implementations tend
  to vary greatly in how they handle errors.</p>

  </div>


  <div class=impl>

  <h4 id=common-parser-idioms><span class=secno>2.4.1 </span>Common parser idioms</h4>

  </div>

  <p>The <dfn id=space-character title="space character">space characters</dfn>, for the purposes of this
  specification, are U+0020 SPACE, U+0009 CHARACTER TABULATION (tab), U+000A LINE FEED (LF), U+000C
  FORM FEED (FF), and U+000D CARRIAGE RETURN (CR).</p>

  <p>The <dfn id=white_space title=White_Space>White_Space characters</dfn> are those that have the Unicode
  property "White_Space" in the Unicode <code title="">PropList.txt</code> data file. <a href=#refsUNICODE>[UNICODE]</a></p>

  <p class=note>This should not be confused with the "White_Space" value (abbreviated "WS") of the
  "Bidi_Class" property in the <code title="">Unicode.txt</code> data file.</p>

  <p>The <dfn id=control-characters>control characters</dfn> are those whose Unicode "General_Category" property has the
  value "Cc" in the Unicode <code title="">UnicodeData.txt</code> data file. <a href=#refsUNICODE>[UNICODE]</a></p>

  <p>The <dfn id=uppercase-ascii-letters>uppercase ASCII letters</dfn> are the characters in the range U+0041 LATIN CAPITAL
  LETTER A to U+005A LATIN CAPITAL LETTER Z.</p>

  <p>The <dfn id=lowercase-ascii-letters>lowercase ASCII letters</dfn> are the characters in the range U+0061 LATIN SMALL
  LETTER A to U+007A LATIN SMALL LETTER Z.</p>

  <p>The <dfn id=ascii-digits>ASCII digits</dfn> are the characters in the range U+0030 DIGIT ZERO (0) to U+0039
  DIGIT NINE (9).</p>

  <p>The <dfn id=alphanumeric-ascii-characters>alphanumeric ASCII characters</dfn> are those that are either <a href=#uppercase-ascii-letters>uppercase ASCII
  letters</a>, <a href=#lowercase-ascii-letters>lowercase ASCII letters</a>, or <a href=#ascii-digits>ASCII digits</a>.</p>

  <p>The <dfn id=ascii-hex-digits>ASCII hex digits</dfn> are the characters in the ranges U+0030 DIGIT ZERO (0) to
  U+0039 DIGIT NINE (9), U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F, and U+0061
  LATIN SMALL LETTER A to U+0066 LATIN SMALL LETTER F.</p>

  <p>The <dfn id=uppercase-ascii-hex-digits>uppercase ASCII hex digits</dfn> are the characters in the ranges U+0030 DIGIT ZERO (0) to
  U+0039 DIGIT NINE (9) and U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F only.</p>

  <p>The <dfn id=lowercase-ascii-hex-digits>lowercase ASCII hex digits</dfn> are the characters in the ranges U+0030 DIGIT ZERO
  (0) to U+0039 DIGIT NINE (9) and U+0061 LATIN SMALL LETTER A to U+0066 LATIN SMALL LETTER F
  only.</p>

  <div class=impl>

  <p>Some of the micro-parsers described below follow the pattern of having an <var title="">input</var> variable that holds the string being parsed, and having a <var title="">position</var> variable pointing at the next character to parse in <var title="">input</var>.</p>

  <p>For parsers based on this pattern, a step that requires the user agent to <dfn id=collect-a-sequence-of-characters>collect a
  sequence of characters</dfn> means that the following algorithm must be run, with <var title="">characters</var> being the set of characters that can be collected:</p>

  <ol><li><p>Let <var title="">input</var> and <var title="">position</var> be the same variables as
   those of the same name in the algorithm that invoked these steps.</li>

   <li><p>Let <var title="">result</var> be the empty string.</li>

   <li><p>While <var title="">position</var> doesn't point past the end of <var title="">input</var>
   and the character at <var title="">position</var> is one of the <var title="">characters</var>,
   append that character to the end of <var title="">result</var> and advance <var title="">position</var> to the next character in <var title="">input</var>.</li>

   <li><p>Return <var title="">result</var>.</li>

  </ol><p>The step <dfn id=skip-whitespace>skip whitespace</dfn> means that the user agent must <a href=#collect-a-sequence-of-characters>collect a sequence of
  characters</a> that are <a href=#space-character title="space character">space characters</a>. The step
  <dfn id=skip-white_space-characters>skip White_Space characters</dfn> means that the user agent must <a href=#collect-a-sequence-of-characters>collect a sequence of
  characters</a> that are <a href=#white_space>White_Space</a> characters. In both cases, the collected
  characters are not used. <a href=#refsUNICODE>[UNICODE]</a></p>

  <p>When a user agent is to <dfn id=strip-line-breaks>strip line breaks</dfn> from a string, the user agent must remove
  any U+000A LINE FEED (LF) and U+000D CARRIAGE RETURN (CR) characters from that string.</p>

  <p>When a user agent is to <dfn id=strip-leading-and-trailing-whitespace>strip leading and trailing whitespace</dfn> from a string, the
  user agent must remove all <a href=#space-character title="space character">space characters</a> that are at the
  start or end of the string.</p>

  <p>When a user agent is to <dfn id=strip-and-collapse-whitespace>strip and collapse whitespace</dfn> in a string, it must replace
  any sequence of one or more consecutive <a href=#space-character title="space character">space characters</a> in
  that string with a single U+0020 SPACE character, and then <a href=#strip-leading-and-trailing-whitespace>strip leading and trailing
  whitespace</a> from that string.</p>

  <p>When a user agent has to <dfn id=strictly-split-a-string>strictly split a string</dfn> on a particular delimiter character
  <var title="">delimiter</var>, it must use the following algorithm:</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">tokens</var> be an ordered list of tokens, initially empty.</li>

   <li><p>While <var title="">position</var> is not past the end of <var title="">input</var>:</p>

    <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are not the <var title="">delimiter</var> character.</li>

     <li><p>Append the string collected in the previous step to <var title="">tokens</var>.</li>

     <li><p>Advance <var title="">position</var> to the next character in <var title="">input</var>.</li> <!-- skips past the delimiter -->

    </ol></li>

   <li><p>Return <var title="">tokens</var>.</li>

  </ol><p class=note>For the special cases of splitting a string <a href=#split-a-string-on-spaces title="split a string on
  spaces">on spaces</a> and <a href=#split-a-string-on-commas title="split a string on commas">on commas</a>, this
  algorithm does not apply (those algorithms also perform <a href=#strip-leading-and-trailing-whitespace title="strip leading and trailing
  whitespace">whitespace trimming</a>).</p>

  </div>



  <h4 id=boolean-attributes><span class=secno>2.4.2 </span>Boolean attributes</h4>

  <p>A number of attributes are <dfn id=boolean-attribute title="boolean attribute">boolean attributes</dfn>. The
  presence of a boolean attribute on an element represents the true value, and the absence of the
  attribute represents the false value.</p>

  <p>If the attribute is present, its value must either be the empty string or a value that is an
  <a href=#ascii-case-insensitive>ASCII case-insensitive</a> match for the attribute's canonical name, with no leading or
  trailing whitespace.</p>

  <p class=note>The values "true" and "false" are not allowed on boolean attributes. To represent
  a false value, the attribute has to be omitted altogether.</p>

  <div class=example>

   <p>Here is an example of a checkbox that is checked and disabled. The <code title=attr-input-checked><a href=#attr-input-checked>checked</a></code> and <code title=attr-fe-disabled><a href=#attr-fe-disabled>disabled</a></code>
   attributes are the boolean attributes.</p>

   <pre>&lt;label&gt;&lt;input type=checkbox checked name=cheese disabled&gt; Cheese&lt;/label&gt;</pre>

   <p>This could be equivalently written as this:

   <pre>&lt;label&gt;&lt;input type=checkbox checked=checked name=cheese disabled=disabled&gt; Cheese&lt;/label&gt;</pre>

   <p>You can also mix styles; the following is still equivalent:</p>

   <pre>&lt;label&gt;&lt;input type='checkbox' checked name=cheese disabled=""&gt; Cheese&lt;/label&gt;</pre>

  </div>



  <h4 id=keywords-and-enumerated-attributes><span class=secno>2.4.3 </span>Keywords and enumerated attributes</h4>

  <p>Some attributes are defined as taking one of a finite set of keywords. Such attributes are
  called <dfn id=enumerated-attribute title="enumerated attribute">enumerated attributes</dfn>. The keywords are each
  defined to map to a particular <em>state</em> (several keywords might map to the same state, in
  which case some of the keywords are synonyms of each other; additionally, some of the keywords can
  be said to be non-conforming, and are only in the specification for historical reasons). In
  addition, two default states can be given. The first is the <i>invalid value default</i>, the
  second is the <i>missing value default</i>.</p>

  <p>If an enumerated attribute is specified, the attribute's value must be an <a href=#ascii-case-insensitive>ASCII
  case-insensitive</a> match for one of the given keywords that are not said to be
  non-conforming, with no leading or trailing whitespace.</p>

  <p>When the attribute is specified, if its value is an <a href=#ascii-case-insensitive>ASCII case-insensitive</a> match
  for one of the given keywords then that keyword's state is the state that the attribute
  represents. If the attribute value matches none of the given keywords, but the attribute has an
  <i>invalid value default</i>, then the attribute represents that state. Otherwise, if the
  attribute value matches none of the keywords but there is a <i>missing value default</i> state
  defined, then <em>that</em> is the state represented by the attribute. Otherwise, there is no
  default, and invalid values mean that there is no state represented.</p>

  <p>When the attribute is <em>not</em> specified, if there is a <i>missing value default</i> state
  defined, then that is the state represented by the (missing) attribute. Otherwise, the absence of
  the attribute means that there is no state represented.</p>

  <p class=note>The empty string can be a valid keyword.</p>


  <h4 id=numbers><span class=secno>2.4.4 </span>Numbers</h4>

  <h5 id=signed-integers><span class=secno>2.4.4.1 </span>Signed integers</h5>

  <p>A string is a <dfn id=valid-integer>valid integer</dfn> if it consists of one or more <a href=#ascii-digits>ASCII digits</a>,
  optionally prefixed with a U+002D HYPHEN-MINUS character (-).</p>

  <p>A <a href=#valid-integer>valid integer</a> without a U+002D HYPHEN-MINUS (-) prefix represents the number
  that is represented in base ten by that string of digits. A <a href=#valid-integer>valid integer</a>
  <em>with</em> a U+002D HYPHEN-MINUS (-) prefix represents the number represented in base ten by
  the string of digits that follows the U+002D HYPHEN-MINUS, subtracted from zero.</p>

  <div class=impl>

  <p>The <dfn id=rules-for-parsing-integers>rules for parsing integers</dfn> are as given in the following algorithm. When
  invoked, the steps must be followed in the order given, aborting at the first step that returns a
  value. This algorithm will return either an integer or an error.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">sign</var> have the value "positive".</li>

   <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, return an
    error.</li>

   <li>

    <p>If the character indicated by <var title="">position</var> (the first character) is a U+002D
    HYPHEN-MINUS character (-):</p>

    <ol><li>Let <var title="">sign</var> be "negative".</li>

     <li>Advance <var title="">position</var> to the next character.</li>

     <li>If <var title="">position</var> is past the end of <var title="">input</var>, return an
     error.</li>

    </ol><p>Otherwise, if the character indicated by <var title="">position</var> (the first character)
    is a U+002B PLUS SIGN character (+):</p>

    <ol><li>Advance <var title="">position</var> to the next character. (The "<code title="">+</code>"
     is ignored, but it is not conforming.)</li>

     <li>If <var title="">position</var> is past the end of <var title="">input</var>, return an
     error.</li>

    </ol></li>

   <li><p>If the character indicated by <var title="">position</var> is not an <a href=#ascii-digits title="ASCII
   digits">ASCII digit</a>, then return an error.</li>

   <!-- Ok. At this point we know we have a number. It might have
   trailing garbage which we'll ignore, but it's a number, and we
   won't return an error. -->

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>, and
   interpret the resulting sequence as a base-ten integer. Let <var title="">value</var> be that
   integer.</li>

   <li><p>If <var title="">sign</var> is "positive", return <var title="">value</var>, otherwise return the result of subtracting
   <var title="">value</var> from zero.</li>

  </ol></div>


  <h5 id=non-negative-integers><span class=secno>2.4.4.2 </span>Non-negative integers</h5>

  <p>A string is a <dfn id=valid-non-negative-integer>valid non-negative integer</dfn> if it consists of one or more <a href=#ascii-digits>ASCII
  digits</a>.</p>

  <p>A <a href=#valid-non-negative-integer>valid non-negative integer</a> represents the number that is represented in base ten
  by that string of digits.</p>

  <div class=impl>

  <p>The <dfn id=rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</dfn> are as given in the following algorithm.
  When invoked, the steps must be followed in the order given, aborting at the first step that
  returns a value. This algorithm will return either zero, a positive integer, or an error.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">value</var> be the result of parsing <var title="">input</var> using the
   <a href=#rules-for-parsing-integers>rules for parsing integers</a>.</li>

   <li><p>If <var title="">value</var> is an error, return an error.</li>

   <li><p>If <var title="">value</var> is less than zero, return an error.</li>

   <li><p>Return <var title="">value</var>.</li>

  </ol><!-- Implications: A leading + is ignored. A leading - is ignored if the value is zero. --></div>


  <h5 id=floating-point-numbers><span class=secno>2.4.4.3 </span>Floating-point numbers</h5>

  <p>A string is a <dfn id=valid-floating-point-number>valid floating-point number</dfn> if it consists of:</p>

  <ol class=brief><li>Optionally, a U+002D HYPHEN-MINUS character (-).</li>

   <li>One or both of the following, in the given order:

    <ol><li>A series of one or more <a href=#ascii-digits>ASCII digits</a>.</li>

     <li>

      <ol><li>A single U+002E FULL STOP character (.).</li>

       <li>A series of one or more <a href=#ascii-digits>ASCII digits</a>.</li>

      </ol></li>

    </ol></li>

   <li>Optionally:

    <ol><li>Either a U+0065 LATIN SMALL LETTER E character (e) or a U+0045 LATIN CAPITAL LETTER E
     character (E).</li>

     <li>Optionally, a U+002D HYPHEN-MINUS character (-) or U+002B PLUS SIGN character (+).</li>

     <li>A series of one or more <a href=#ascii-digits>ASCII digits</a>.</li>

    </ol></li>

  </ol><p>A <a href=#valid-floating-point-number>valid floating-point number</a> represents the number obtained by multiplying the
  significand by ten raised to the power of the exponent, where the significand is the first number,
  interpreted as base ten (including the decimal point and the number after the decimal point, if
  any, and interpreting the significand as a negative number if the whole string starts with a
  U+002D HYPHEN-MINUS character (-) and the number is not zero), and where the exponent is the
  number after the E, if any (interpreted as a negative number if there is a U+002D HYPHEN-MINUS
  character (-) between the E and the number and the number is not zero, or else ignoring a U+002B
  PLUS SIGN character (+) between the E and the number if there is one). If there is no E, then the
  exponent is treated as zero.</p>

  <p class=note>The Infinity and Not-a-Number (NaN) values are not <a href=#valid-floating-point-number title="valid
  floating-point number">valid floating-point numbers</a>.</p>

  <div class=impl>

  <p>The <dfn id=best-representation-of-the-number-as-a-floating-point-number title="best representation of the number as a floating-point number">best
  representation of the number <var title="">n</var> as a floating-point number</dfn> is the string
  obtained from applying the JavaScript operator ToString to <var title="">n</var>. The JavaScript
  operator ToString is not uniquely determined. When there are multiple possible strings that could
  be obtained from the JavaScript operator ToString for a particular value, the user agent must
  always return the same string for that value (though it may differ from the value used by other
  user agents).</p>

  <p>The <dfn id=rules-for-parsing-floating-point-number-values>rules for parsing floating-point number values</dfn> are as given in the following
  algorithm. This algorithm must be aborted at the first step that returns something. This algorithm
  will return either a number or an error.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">value</var> have the value 1.</li>

   <li><p>Let <var title="">divisor</var> have the value 1.</li>

   <li><p>Let <var title="">exponent</var> have the value 1.</li>

   <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, return an
   error.</li>

   <li>

    <p>If the character indicated by <var title="">position</var> is a U+002D HYPHEN-MINUS character
    (-):</p>

    <ol><li>Change <var title="">value</var> and <var title="">divisor</var> to &minus;1.</li>

     <li>Advance <var title="">position</var> to the next character.</li>

     <li>If <var title="">position</var> is past the end of <var title="">input</var>, return an
     error.</li>

    </ol><p>Otherwise, if the character indicated by <var title="">position</var> (the first character)
    is a U+002B PLUS SIGN character (+):</p>

    <ol><li>Advance <var title="">position</var> to the next character. (The "<code title="">+</code>"
     is ignored, but it is not conforming.)</li>

     <li>If <var title="">position</var> is past the end of <var title="">input</var>, return an
     error.</li>

    </ol></li>

   <li><p>If the character indicated by <var title="">position</var> is a U+002E FULL STOP (.), and
   that is not the last character in <var title="">input</var>, and the character after the
   character indicated by <var title="">position</var> is an <a href=#ascii-digits title="ASCII digits">ASCII
   digit</a>, then set <var title="">value</var> to zero and jump to the step labeled
   <i>fraction</i>.</p> <!-- we have to check there's a number so that ".e1" fails to parse but ".0"
   does not -->

   <li><p>If the character indicated by <var title="">position</var> is not an <a href=#ascii-digits title="ASCII
   digits">ASCII digit</a>, then return an error.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>, and
   interpret the resulting sequence as a base-ten integer. Multiply <var title="">value</var> by
   that integer.</li>

   <li>If <var title="">position</var> is past the end of <var title="">input</var>, jump to the
   step labeled <i>conversion</i>.</li>

   <li><p><i>Fraction</i>: If the character indicated by <var title="">position</var> is a U+002E
   FULL STOP (.), run these substeps:</p>

    <ol><li><p>Advance <var title="">position</var> to the next character.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, or if the
     character indicated by <var title="">position</var> is not an <a href=#ascii-digits title="ASCII digits">ASCII
     digit</a>, U+0065 LATIN SMALL LETTER E (e), or U+0045 LATIN CAPITAL LETTER E (E), then jump
     to the step labeled <i>conversion</i>.</li>

     <li><p>If the character indicated by <var title="">position</var> is a U+0065 LATIN SMALL
     LETTER E character (e) or a U+0045 LATIN CAPITAL LETTER E character (E), skip the remainder of
     these substeps.</p>

     <li><p><i>Fraction loop</i>: Multiply <var title="">divisor</var> by ten.</li>

     <li>Add the value of the character indicated by <var title="">position</var>, interpreted as a
     base-ten digit (0..9) and divided by <var title="">divisor</var>, to <var title="">value</var>.</li>

     <li><p>Advance <var title="">position</var> to the next character.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then jump
     to the step labeled <i>conversion</i>.</li>

     <li><p>If the character indicated by <var title="">position</var> is an <a href=#ascii-digits title="ASCII
     digits">ASCII digit</a>, jump back to the step labeled <i>fraction loop</i> in these
     substeps.</li>

    </ol></li>

   <li><p>If the character indicated by <var title="">position</var> is a U+0065 LATIN SMALL LETTER
   E character (e) or a U+0045 LATIN CAPITAL LETTER E character (E), run these substeps:</p>

    <ol><li><p>Advance <var title="">position</var> to the next character.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then jump
     to the step labeled <i>conversion</i>.</li>

     <li>

      <p>If the character indicated by <var title="">position</var> is a U+002D HYPHEN-MINUS
      character (-):</p>

      <ol><li>Change <var title="">exponent</var> to &minus;1.</li>

       <li>Advance <var title="">position</var> to the next character.</li>

       <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then
       jump to the step labeled <i>conversion</i>.</li>

      </ol><p>Otherwise, if the character indicated by <var title="">position</var> is a U+002B PLUS SIGN
      character (+):</p>

      <ol><li>Advance <var title="">position</var> to the next character.</li>

       <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then
       jump to the step labeled <i>conversion</i>.</li>

      </ol></li>

     <li><p>If the character indicated by <var title="">position</var> is not an <a href=#ascii-digits title="ASCII
     digits">ASCII digit</a>, then jump to the step labeled <i>conversion</i>.</li>

     <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>, and
     interpret the resulting sequence as a base-ten integer. Multiply <var title="">exponent</var>
     by that integer.</li>

     <li><p>Multiply <var title="">value</var> by ten raised to the <var title="">exponent</var>th
     power.</li>

    </ol></li>

   <li><p><i>Conversion</i>: Let <var title="">S</var> be the set of finite IEEE 754
   double-precision floating-point values except &minus;0, but with two special values added: 2<sup title="">1024</sup> and &minus;2<sup title="">1024</sup>.</li>

   <li><p>Let <var title="">rounded-value</var> be the number in <var title="">S</var> that is
   closest to <var title="">value</var>, selecting the number with an even significand if there are
   two equally close values. (The two special values 2<sup title="">1024</sup> and &minus;2<sup title="">1024</sup> are considered to have even significands for this purpose.)</li>

   <li><p>If <var title="">rounded-value</var> is 2<sup title="">1024</sup> or &minus;2<sup title="">1024</sup>, return an error.</li>

   <li><p>Return <var title="">rounded-value</var>.</li>

  </ol></div>


<div class=impl>
  <h5 id=percentages-and-dimensions><span class=secno>2.4.4.4 </span>Percentages and lengths</h5>

  <p>The <dfn id=rules-for-parsing-dimension-values>rules for parsing dimension values</dfn> are as given in the following algorithm. When
  invoked, the steps must be followed in the order given, aborting at the first step that returns a
  value. This algorithm will return either a number greater than or equal to 1.0, or an error; if a
  number is returned, then it is further categorised as either a percentage or a length.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, return an
   error.</li>

   <li><p>If the character indicated by <var title="">position</var> is a U+002B PLUS SIGN character
   (+), advance <var title="">position</var> to the next character.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are U+0030 DIGIT ZERO (0) characters,
   and discard them.</li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, return an
   error.</li>

   <li><p>If the character indicated by <var title="">position</var> is not one of U+0031 DIGIT ONE
   (1) to U+0039 DIGIT NINE (9), then return an error.</li>

   <!-- Ok. At this point we know we have a number. It might have trailing garbage which we'll
   ignore, but it's a number, and we won't return an error. -->

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>, and
   interpret the resulting sequence as a base-ten integer. Let <var title="">value</var> be that
   number.</li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, return <var title="">value</var> as a length.</li>

   <li>

    <p>If the character indicated by <var title="">position</var> is a U+002E FULL STOP character
    (.):</p>

    <ol><li><p>Advance <var title="">position</var> to the next character.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, or if the
     character indicated by <var title="">position</var> is not an <a href=#ascii-digits title="ASCII digits">ASCII
     digit</a>, then return <var title="">value</var> as a length.</li>

     <li><p>Let <var title="">divisor</var> have the value 1.</li>

     <li><p><i>Fraction loop</i>: Multiply <var title="">divisor</var> by ten.</li>

     <li>Add the value of the character indicated by <var title="">position</var>, interpreted as a
     base-ten digit (0..9) and divided by <var title="">divisor</var>, to <var title="">value</var>.</li>

     <li><p>Advance <var title="">position</var> to the next character.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then
     return <var title="">value</var> as a length.</li>

     <li><p>If the character indicated by <var title="">position</var> is an <a href=#ascii-digits title="ASCII
     digits">ASCII digit</a>, return to the step labeled <i>fraction loop</i> in these
     substeps.</li>

    </ol></li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, return <var title="">value</var> as a length.</li>

   <li><p>If the character indicated by <var title="">position</var> is a U+0025 PERCENT SIGN
   character (%), return <var title="">value</var> as a percentage.</li>

   <li><p>Return <var title="">value</var> as a length.</li>

  </ol></div>


  <h5 id=lists-of-integers><span class=secno>2.4.4.5 </span>Lists of integers</h5>

  <p>A <dfn id=valid-list-of-integers>valid list of integers</dfn> is a number of <a href=#valid-integer title="valid integer">valid
  integers</a> separated by U+002C COMMA characters, with no other characters (e.g. no <a href=#space-character title="space character">space characters</a>). In addition, there might be restrictions on the
  number of integers that can be given, or on the range of values allowed.</p>

  <div class=impl>

  <p>The <dfn id=rules-for-parsing-a-list-of-integers>rules for parsing a list of integers</dfn> are as follows:</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">numbers</var> be an initially empty list of integers. This list will be
   the result of this algorithm.</li>

   <li><p>If there is a character in the string <var title="">input</var> at position <var title="">position</var>, and it is either a U+0020 SPACE, U+002C COMMA, or U+003B SEMICOLON
   character, then advance <var title="">position</var> to the next character in <var title="">input</var>, or to beyond the end of the string if there are no more
   characters.</li>

   <li><p>If <var title="">position</var> points to beyond the end of <var title="">input</var>,
   return <var title="">numbers</var> and abort.</li>

   <li><p>If the character in the string <var title="">input</var> at position <var title="">position</var> is a U+0020 SPACE, U+002C COMMA, or U+003B SEMICOLON character, then
   return to step 4.</li>

   <li><p>Let <var title="">negated</var> be false.</li> <li><p>Let <var title="">value</var> be
   0.</li>

   <li><p>Let <var title="">started</var> be false. This variable is set to true when the parser
   sees a number or a U+002D HYPHEN-MINUS character (-).</li>

   <li><p>Let <var title="">got number</var> be false. This variable is set to true when the parser
   sees a number.</li>

   <li><p>Let <var title="">finished</var> be false. This variable is set to true to switch parser
   into a mode where it ignores characters until the next separator.</li>

   <li><p>Let <var title="">bogus</var> be false.</li>

   <li><p><i>Parser</i>: If the character in the string <var title="">input</var> at position <var title="">position</var> is:</p>

    <dl class=switch><dt>A U+002D HYPHEN-MINUS character</dt>

     <dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var title="">got number</var> is true, let <var title="">finished</var> be true.</li>

       <li>If <var title="">finished</var> is true, skip to the next step in the overall set of
       steps.</li>

       <li>If <var title="">started</var> is true, let <var title="">negated</var> be false.</li>

       <li>Otherwise, if <var title="">started</var> is false and if <var title="">bogus</var> is
       false, let <var title="">negated</var> be true.</li>

       <li>Let <var title="">started</var> be true.</li>

      </ol></dd>

     <dt>An <a href=#ascii-digits title="ASCII digits">ASCII digit</a></dt>

     <dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var title="">finished</var> is true, skip to the next step in the overall set of
       steps.</li>

       <li>Multiply <var title="">value</var> by ten.</li>

       <li>Add the value of the digit, interpreted in base ten, to <var title="">value</var>.</li>

       <li>Let <var title="">started</var> be true.</li>

       <li>Let <var title="">got number</var> be true.</li>

      </ol></dd>


     <dt>A U+0020 SPACE character</dt>
     <dt>A U+002C COMMA character</dt>
     <dt>A U+003B SEMICOLON character</dt>

     <dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var title="">got number</var> is false, return the <var title="">numbers</var> list
       and abort. This happens if an entry in the list has no digits, as in "<code title="">1,2,x,4</code>".</li>

       <li>If <var title="">negated</var> is true, then negate <var title="">value</var>.</li>

       <li>Append <var title="">value</var> to the <var title="">numbers</var> list.</li>

       <li>Jump to step 4 in the overall set of steps.</li>

      </ol></dd>


     <!-- <dt>A U+002E FULL STOP character</dt> -->
     <dt>A character in the range U+0001 to U+001F, <!-- space --> U+0021 to U+002B, <!-- comma --> U+002D to U+002F, <!-- digits --> U+003A, <!-- semicolon --> U+003C to U+0040, <!-- a-z --> U+005B to U+0060, <!-- A-Z --> U+007b to U+007F
        (i.e. any other non-alphabetic ASCII character)</dt>

 <!--
 Test: http://www.hixie.ch/tests/adhoc/html/flow/image-maps/004-demo.html
 IE6 on Wine treats the following characters like this also: U+1-U+1f, U+21-U+2b, U+2d-U+2f, U+3a,
 U+3c-U+40, U+5b-U+60, U+7b-U+82, U+84-U+89, U+8b, U+8d, U+8f-U+99, U+9b, U+9d, U+a0-U+bf, U+d7,
 U+f7, U+1f6-U+1f9, U+218-U+24f, U+2a9-U+385, U+387, U+38b, U+38d, U+3a2, U+3cf, U+3d7-U+3d9, U+3db,
 U+3dd, U+3df, U+3e1, U+3f4-U+400, U+40d, U+450, U+45d, U+482-U+48f, U+4c5-U+4c6, U+4c9-U+4ca,
 U+4cd-U+4cf, U+4ec-U+4ed, U+4f6-U+4f7, U+4fa-U+530, U+557-U+560, U+588-U+5cf, U+5eb-U+5ef,
 U+5f3-U+620, U+63b-U+640, U+64b-U+670, U+6b8-U+6b9, U+6bf, U+6cf, U+6d4, U+6d6-U+904, U+93a-U+957,
 U+962-U+984, U+98d-U+98e, U+991-U+992, U+9a9, U+9b1, U+9b3-U+9b5, U+9ba-U+9db, U+9de, U+9e2-U+9ef,
 U+9f2-U+a04, U+a0b-U+a0e, U+a11-U+a12, U+a29, U+a31, U+a34, U+a37, U+a3a-U+a58, U+a5d, U+a5f-U+a84,
 U+a8c, U+a8e, U+a92, U+aa9, U+ab1, U+ab4, U+aba-U+adf, U+ae1-U+b04, U+b0d-U+b0e, U+b11-U+b12,
 U+b29, U+b31, U+b34-U+b35, U+b3a-U+b5b, U+b5e, U+b62-U+b84, U+b8b-U+b8d, U+b91, U+b96-U+b98, U+b9b,
 U+b9d, U+ba0-U+ba2, U+ba5-U+ba7, U+bab-U+bad, U+bb6, U+bba-U+c04, U+c0d, U+c11, U+c29, U+c34,
 U+c3a-U+c5f, U+c62-U+c84, U+c8d, U+c91, U+ca9, U+cb4, U+cba-U+cdd, U+cdf, U+ce2-U+d04, U+d0d,
 U+d11, U+d29, U+d3a-U+d5f, U+d62-U+e00, U+e2f, U+e31, U+e34-U+e3f, U+e46-U+e80, U+e83, U+e85-U+e86,
 U+e89, U+e8b-U+e8c, U+e8e-U+e93, U+e98, U+ea0, U+ea4, U+ea6, U+ea8-U+ea9, U+eac, U+eaf-U+edb,
 U+ede-U+109f, U+10c6-U+10cf, U+10f7-U+10ff, U+115a-U+115e, U+11a3-U+11a7, U+11fa-U+1dff,
 U+1e9b-U+1e9f, U+1efa-U+1eff, U+1f16-U+1f17, U+1f1e-U+1f1f, U+1f46-U+1f47, U+1f4e-U+1f4f, U+1f58,
 U+1f5a, U+1f5c, U+1f5e, U+1f7e-U+1f7f, U+1fb5, U+1fbd-U+1fc1, U+1fc5, U+1fcd-U+1fcf, U+1fd4-U+1fd5,
 U+1fdc-U+1fdf, U+1fed-U+1ff1, U+1ff5, U+1ffd-U+249b, U+24ea-U+3004, U+3006-U+3040, U+3095-U+309a,
 U+309f-U+30a0, U+30fb, U+30ff-U+3104, U+312d-U+3130, U+318f-U+4dff, U+9fa6-U+abff, U+d7a4-U+d7ff,
 U+e000-U+f8ff, U+fa2e-U+faff, U+fb07-U+fb12, U+fb18-U+fb1e, U+fb37, U+fb3d, U+fb3f, U+fb42, U+fb45,
 U+fbb2-U+fbd2, U+fbe9, U+fce1, U+fd3e-U+fd4f, U+fd90-U+fd91, U+fdc8-U+fdef, U+fdfc-U+fe7f,
 U+fefd-U+ff20, U+ff3b-U+ff40, U+ff5b-U+ff65, U+ffa0, U+ffbf-U+ffc1, U+ffc8-U+ffc9, U+ffd0-U+ffd1,
 U+ffd8-U+ffd9, U+ffdd-U+ffff
 IE7 on Win2003 treats the following characters like this also instead: U+1-U+1f, U+21-U+2b,
 U+2d-U+2f, U+3a, U+3c-U+40, U+5b-U+60, U+7b-U+82, U+84-U+89, U+8b, U+8d, U+8f-U+99, U+9b, U+9d,
 U+a0-U+a9, U+ab-U+b4, U+b6-U+b9, U+bb-U+bf, U+d7, U+f7, U+220-U+221, U+234-U+24f, U+2ae-U+2af,
 U+2b9-U+2ba, U+2c2-U+2df, U+2e5-U+2ed, U+2ef-U+344, U+346-U+379, U+37b-U+385, U+387, U+38b, U+38d,
 U+3a2, U+3cf, U+3d8-U+3d9, U+3f4-U+3ff, U+482-U+48b, U+4c5-U+4c6, U+4c9-U+4ca, U+4cd-U+4cf,
 U+4f6-U+4f7, U+4fa-U+530, U+557-U+558, U+55a-U+560, U+588-U+5cf, U+5eb-U+5ef, U+5f3-U+620,
 U+63b-U+640, U+656-U+66f, U+6d4, U+6dd-U+6e0, U+6e9-U+6ec, U+6ee-U+6f9, U+6fd-U+70f, U+72d-U+72f,
 U+740-U+77f, U+7b1-U+900, U+904, U+93a-U+93c, U+94d - U+94f, U+951-U+957, U+964-U+980, U+984,
 U+98d-U+98e, U+991-U+992, U+9a9, U+9b1, U+9b3-U+9b5, U+9ba-U+9bd, U+9c5-U+9c6, U+9c9-U+9ca,
 U+9cd-U+9d6, U+9d8-U+9db, U+9de, U+9e4-U+9ef, U+9f2-U+a01, U+a03-U+a04, U+a0b-U+a0e, U+a11-U+a12,
 U+a29, U+a31, U+a34, U+a37, U+a3a-U+a3d, U+a43-U+a46, U+a49-U+a4a, U+a4d-U+a58, U+a5d, U+a5f-U+a6f,
 U+a75-U+a80, U+a84, U+a8c, U+a8e, U+a92, U+aa9, U+ab1, U+ab4, U+aba-U+abc, U+ac6, U+aca,
 U+acd-U+acf, U+ad1-U+adf, U+ae1-U+b00, U+b04, U+b0d-U+b0e, U+b11-U+b12, U+b29, U+b31, U+b34-U+b35,
 U+b3a-U+b3c, U+b44-U+b46, U+b49 - U+b4a, U+b4d-U+b55, U+b58-U+b5b, U+b5e, U+b62-U+b81, U+b84,
 U+b8b-U+b8d, U+b91, U+b96-U+b98, U+b9b, U+b9d, U+ba0 - U+ba2, U+ba5-U+ba7, U+bab-U+bad, U+bb6,
 U+bba-U+bbd, U+bc3-U+bc5, U+bc9, U+bcd-U+bd6, U+bd8-U+c00, U+c04, U+c0d, U+c11, U+c29, U+c34,
 U+c3a-U+c3d, U+c45, U+c49, U+c4d-U+c54, U+c57-U+c5f, U+c62-U+c81, U+c84, U+c8d, U+c91, U+ca9,
 U+cb4, U+cba-U+cbd, U+cc5, U+cc9, U+ccd-U+cd4, U+cd7-U+cdd, U+cdf, U+ce2-U+d01, U+d04, U+d0d,
 U+d11, U+d29, U+d3a-U+d3d, U+d44-U+d45, U+d49, U+d4d-U+d56, U+d58-U+d5f, U+d62-U+d81, U+d84,
 U+d97-U+d99, U+db2, U+dbc, U+dbe - U+dbf, U+dc7-U+dce, U+dd5, U+dd7, U+de0-U+df1, U+df4-U+e00,
 U+e3b-U+e3f, U+e4f-U+e80, U+e83, U+e85-U+e86, U+e89, U+e8b-U+e8c, U+e8e-U+e93, U+e98, U+ea0, U+ea4,
 U+ea6, U+ea8-U+ea9, U+eac, U+eba, U+ebe-U+ebf, U+ec5-U+ecc, U+ece-U+edb, U+ede-U+eff, U+f01-U+f3f,
 U+f48, U+f6b-U+f70, U+f82-U+f87, U+f8c-U+f8f, U+f98, U+fbd-U+fff, U+1022, U+1028, U+102b,
 U+1033-U+1035, U+1037, U+1039-U+104f, U+105a-U+109f, U+10c6-U+10cf, U+10f7-U+10ff, U+115a - U+115e,
 U+11a3-U+11a7, U+11fa-U+11ff, U+1207, U+1247, U+1249, U+124e-U+124f, U+1257, U+1259, U+125e-U+125f,
 U+1287, U+1289, U+128e-U+128f, U+12af, U+12b1, U+12b6-U+12b7, U+12bf, U+12c1, U+12c6-U+12c7,
 U+12cf, U+12d7, U+12ef, U+130f, U+1311, U+1316-U+1317, U+131f, U+1347, U+135b-U+139f,
 U+13f5-U+1400, U+166d-U+166e, U+1677-U+1680, U+169b - U+169f, U+16eb-U+177f, U+17c9-U+181f, U+1843,
 U+1878-U+187f, U+18aa-U+1dff, U+1e9c-U+1e9f, U+1efa-U+1eff, U+1f16-U+1f17, U+1f1e-U+1f1f,
 U+1f46-U+1f47, U+1f4e-U+1f4f, U+1f58, U+1f5a, U+1f5c, U+1f5e, U+1f7e-U+1f7f, U+1fb5, U+1fbd,
 U+1fbf-U+1fc1, U+1fc5, U+1fcd-U+1fcf, U+1fd4-U+1fd5, U+1fdc-U+1fdf, U+1fed-U+1ff1, U+1ff5,
 U+1ffd-U+207e, U+2080-U+2101, U+2103-U+2106, U+2108-U+2109, U+2114, U+2116-U+2118, U+211e-U+2123,
 U+2125, U+2127, U+2129, U+212e, U+2132, U+213a-U+215f, U+2184-U+3005, U+3008-U+3020, U+302a-U+3037,
 U+303b-U+3104, U+312d-U+3130, U+318f - U+319f, U+31b8-U+33ff, U+4db6-U+4dff, U+9fa6-U+9fff,
 U+a48d-U+abff, U+d7a4-U+d7ff, U+e000-U+f8ff, U+fa2e-U+faff, U+fb07-U+fb12, U+fb18-U+fb1c, U+fb1e,
 U+fb29, U+fb37, U+fb3d, U+fb3f, U+fb42, U+fb45, U+fbb2-U+fbd2, U+fd3e-U+fd4f, U+fd90-U+fd91,
 U+fdc8-U+fdef, U+fdfc-U+fe6f, U+fe73, U+fe75, U+fefd-U+ff20, U+ff3b-U+ff40, U+ff5b-U+ff9f,
 U+ffbf-U+ffc1, U+ffc8-U+ffc9, U+ffd0-U+ffd1, U+ffd8-U+ffd9, U+ffdd-U+ffff
-->

     <dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var title="">got number</var> is true, let <var title="">finished</var> be true.</li>

       <li>If <var title="">finished</var> is true, skip to the next step in the overall set of
       steps.</li>

       <li>Let <var title="">negated</var> be false.</li>

      </ol></dd>


     <dt>Any other character</dt>
     <!-- alphabetic a-z A-Z, and non-ASCII -->

     <dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var title="">finished</var> is true, skip to the next step in the overall set of
       steps.</li>

       <li>Let <var title="">negated</var> be false.</li>

       <li>Let <var title="">bogus</var> be true.</li>

       <li>If <var title="">started</var> is true, then return the <var title="">numbers</var> list,
       and abort. (The value in <var title="">value</var> is not appended to the list first; it is
       dropped.)</li>

      </ol></dd>

    </dl></li>

   <li><p>Advance <var title="">position</var> to the next character in <var title="">input</var>,
   or to beyond the end of the string if there are no more characters.</li>

   <li><p>If <var title="">position</var> points to a character (and not to beyond the end of <var title="">input</var>), jump to the big <i>Parser</i> step above.</li>

   <li><p>If <var title="">negated</var> is true, then negate <var title="">value</var>.</li>

   <li><p>If <var title="">got number</var> is true, then append <var title="">value</var> to the
   <var title="">numbers</var> list.</li>

   <li><p>Return the <var title="">numbers</var> list and abort.</li>

  </ol></div>


  <div class=impl>

  <h5 id=lists-of-dimensions><span class=secno>2.4.4.6 </span>Lists of dimensions</h5>

  <!-- no definition of a type since no conforming feature uses this syntax (it's only used in
  cols="" and rows="" on <frameset> elements -->

  <p>The <dfn id=rules-for-parsing-a-list-of-dimensions>rules for parsing a list of dimensions</dfn> are as follows. These rules return a list
  of zero or more pairs consisting of a number and a unit, the unit being one of <i>percentage</i>,
  <i>relative</i>, and <i>absolute</i>.</p>

  <ol><li><p>Let <var title="">raw input</var> be the string being parsed.</li>

   <li><p>If the last character in <var title="">raw input</var> is a U+002C COMMA character (,),
   then remove that character from <var title="">raw input</var>.</li>

   <li><p><a href=#split-a-string-on-commas title="split a string on commas">Split the string <var title="">raw input</var> on
   commas</a>. Let <var title="">raw tokens</var> be the resulting list of tokens.</li>

   <li><p>Let <var title="">result</var> be an empty list of number/unit pairs.</li>

   <li>

    <p>For each token in <var title="">raw tokens</var>, run the following substeps:</p>

    <ol><li><p>Let <var title="">input</var> be the token.</li>

     <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>,
     initially pointing at the start of the string.</li>

     <li><p>Let <var title="">value</var> be the number 0.</li>

     <li><p>Let <var title="">unit</var> be <i>absolute</i>.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, set <var title="">unit</var> to <i>relative</i> and jump to the last substep.</li>

     <li><p>If the character at <var title="">position</var> is an <a href=#ascii-digits title="ASCII
     digits">ASCII digit</a>, <a href=#collect-a-sequence-of-characters>collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII
     digits</a>, interpret the resulting sequence as an integer in base ten, and increment <var title="">value</var> by that integer.</li>

     <li>

      <p>If the character at <var title="">position</var> is a U+002E FULL STOP character (.), run
      these substeps:</p>

      <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> consisting of <a href=#space-character title="space
       character">space characters</a> and <a href=#ascii-digits>ASCII digits</a>. Let <var title="">s</var>
       be the resulting sequence.</li>

       <li><p>Remove all <a href=#space-character title="space character">space characters</a> in <var title="">s</var>.</li>

       <li>

        <p>If <var title="">s</var> is not the empty string, run these subsubsteps:</p>

        <ol><li><p>Let <var title="">length</var> be the number of characters in <var title="">s</var> (after the spaces were removed).</li>

         <li><p>Let <var title="">fraction</var> be the result of interpreting <var title="">s</var> as a base-ten integer, and then dividing that number by <span title="">10<sup title=""><var title="">length</var></sup></span>.</li>

         <li><p>Increment <var title="">value</var> by <var title="">fraction</var>.</li>

        </ol></li>

      </ol></li>

     <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

     <li>

      <p>If the character at <var title="">position</var> is a U+0025 PERCENT SIGN character (%),
      then set <var title="">unit</var> to <i>percentage</i>.</p>

      <p>Otherwise, if the character at <var title="">position</var> is a U+002A ASTERISK character
      (*), then set <var title="">unit</var> to <i>relative</i>.</p>

     </li>

     <!-- the remaining characters in /input/ are ignored -->

     <li><p>Add an entry to <var title="">result</var> consisting of the number given by <var title="">value</var> and the unit given by <var title="">unit</var>.</li>

    </ol></li>

   <li><p>Return the list <var title="">result</var>.</li>

  </ol></div>


  <h4 id=dates-and-times><span class=secno>2.4.5 </span>Dates and times</h4>

  <p>In the algorithms below, the <dfn id=number-of-days-in-month-month-of-year-year>number of days in month <var title="">month</var> of year
  <var title="">year</var></dfn> is: <em>31</em> if <var title="">month</var> is 1, 3, 5, 7, 8,
  10, or 12; <em>30</em> if <var title="">month</var> is 4, 6, 9, or 11; <em>29</em> if <var title="">month</var> is 2 and <var title="">year</var> is a number divisible by 400, or if <var title="">year</var> is a number divisible by 4 but not by 100; and <em>28</em> otherwise. This
  takes into account leap years in the Gregorian calendar. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>When <a href=#ascii-digits>ASCII digits</a> are used in the date and time syntaxes defined in this section,
  they express numbers in base ten.</p>

  <div class=impl>

  <p class=note>While the formats described here are intended to be subsets of the corresponding
  ISO8601 formats, this specification defines parsing rules in much more detail than ISO8601.
  Implementors are therefore encouraged to carefully examine any date parsing libraries before using
  them to implement the parsing rules described below; ISO8601 libraries might not parse dates and
  times in exactly the same manner. <a href=#refsISO8601>[ISO8601]</a></p>

  </div>

  <p>Where this specification refers to the <dfn id=proleptic-gregorian-calendar>proleptic Gregorian calendar</dfn>, it means the
  modern Gregorian calendar, extrapolated backwards to year 1. A date in the <a href=#proleptic-gregorian-calendar>proleptic
  Gregorian calendar</a>, sometimes explicitly referred to as a <dfn id=proleptic-gregorian-date>proleptic-Gregorian
  date</dfn>, is one that is described using that calendar even if that calendar was not in use at
  the time (or place) in question. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p class=note>The use of the Gregorian calendar as the wire format in this specification is an
  arbitrary choice resulting from the cultural biases of those involved in the decision. See also
  the section discussing <a href=#input-author-notes>date, time, and number formats</a> in forms
  <span class=impl>(for authors), <a href=#input-impl-notes>implemention notes regarding
  localization of form controls</a>,</span> and the <code><a href=#the-time-element>time</a></code> element.</p>


  <h5 id=months><span class=secno>2.4.5.1 </span>Months</h5>

  <p>A <dfn id=concept-month title=concept-month>month</dfn> consists of a specific <a href=#proleptic-gregorian-date>proleptic-Gregorian
  date</a> with no time-zone information and no date information beyond a year and a month. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>A string is a <dfn id=valid-month-string>valid month string</dfn> representing a year <var title="">year</var> and
  month <var title="">month</var> if it consists of the following components in the given order:</p>

  <ol><li>Four or more <a href=#ascii-digits>ASCII digits</a>, representing <var title="">year</var>, where <var title="">year</var>&nbsp;&gt;&nbsp;0</li>

   <li>A U+002D HYPHEN-MINUS character (-)</li>

   <li>Two <a href=#ascii-digits>ASCII digits</a>, representing the month <var title="">month</var>, in the range
   1&nbsp;&le;&nbsp;<var title="">month</var>&nbsp;&le;&nbsp;12</li>

  </ol><div class=impl>

  <p>The rules to <dfn id=parse-a-month-string>parse a month string</dfn> are as follows. This will return either a year and
  month, or nothing. If at any point the algorithm says that it "fails", this means that it is
  aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-month-component>Parse a month component</a> to obtain <var title="">year</var> and <var title="">month</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the
   end of <var title="">input</var>, then fail.</li>

   <li><p>Return <var title="">year</var> and <var title="">month</var>.</li>

  </ol><p>The rules to <dfn id=parse-a-month-component>parse a month component</dfn>, given an <var title="">input</var> string and
  a <var title="">position</var>, are as follows. This will return either a year and a month, or
  nothing. If at any point the algorithm says that it "fails", this means that it is aborted at that
  point and returns nothing.</p>

  <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not at least four characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">year</var>.</li>

   <li><p>If <var title="">year</var> is not a number greater than zero, then fail.</li>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var title="">position</var> forwards one character.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">month</var>.</li>

   <li><p>If <var title="">month</var> is not a number in the range 1&nbsp;&le;&nbsp;<var title="">month</var>&nbsp;&le;&nbsp;12, then fail.</li>

   <li><p>Return <var title="">year</var> and <var title="">month</var>.</li>

  </ol></div>


  <h5 id=dates><span class=secno>2.4.5.2 </span>Dates</h5>

  <p>A <dfn id=concept-date title=concept-date>date</dfn> consists of a specific <a href=#proleptic-gregorian-date>proleptic-Gregorian
  date</a> with no time-zone information, consisting of a year, a month, and a day. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>A string is a <dfn id=valid-date-string>valid date string</dfn> representing a year <var title="">year</var>, month
  <var title="">month</var>, and day <var title="">day</var> if it consists of the following
  components in the given order:</p>

  <ol><li>A <a href=#valid-month-string>valid month string</a>, representing <var title="">year</var> and <var title="">month</var></li>

   <li>A U+002D HYPHEN-MINUS character (-)</li>

   <li>Two <a href=#ascii-digits>ASCII digits</a>, representing <var title="">day</var>, in the range
   1&nbsp;&le;&nbsp;<var title="">day</var>&nbsp;&le;&nbsp;<var title="">maxday</var> where <var title="">maxday</var> is the <a href=#number-of-days-in-month-month-of-year-year title="number of days in month month of year year">number of
   days in the month <var title="">month</var> and year <var title="">year</var></a></li>

  </ol><div class=impl>

  <p>The rules to <dfn id=parse-a-date-string>parse a date string</dfn> are as follows. This will return either a date, or
  nothing. If at any point the algorithm says that it "fails", this means that it is aborted at that
  point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-date-component>Parse a date component</a> to obtain <var title="">year</var>, <var title="">month</var>, and <var title="">day</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Let <var title="">date</var> be the date with year <var title="">year</var>, month <var title="">month</var>, and day <var title="">day</var>.</li>

   <li><p>Return <var title="">date</var>.</li>

  </ol><p>The rules to <dfn id=parse-a-date-component>parse a date component</dfn>, given an <var title="">input</var> string and a
  <var title="">position</var>, are as follows. This will return either a year, a month, and a day,
  or nothing. If at any point the algorithm says that it "fails", this means that it is aborted at
  that point and returns nothing.</p>

  <ol><li><p><a href=#parse-a-month-component>Parse a month component</a> to obtain <var title="">year</var> and <var title="">month</var>. If this returns nothing, then fail.</li>

   <li><p>Let <var title="">maxday</var> be the <a href=#number-of-days-in-month-month-of-year-year>number of days in month <var title="">month</var> of year <var title="">year</var></a>.</li>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var title="">position</var> forwards one character.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">day</var>.</li>

   <li><p>If <var title="">day</var> is not a number in the range 1&nbsp;&le;&nbsp;<var title="">day</var>&nbsp;&le;&nbsp;<var title="">maxday</var>, then fail.</li>

   <li><p>Return <var title="">year</var>, <var title="">month</var>, and <var title="">day</var>.</li>

  </ol></div>


  <h5 id=yearless-dates><span class=secno>2.4.5.3 </span>Yearless dates</h5>

  <p>A <dfn id=concept-yearless-date title=concept-yearless-date>yearless date</dfn> consists of a Gregorian month and a
  day within that month, but with no associated year. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>A string is a <dfn id=valid-yearless-date-string>valid yearless date string</dfn> representing a month <var title="">month</var> and a day <var title="">day</var> if it consists of the following components
  in the given order:</p>

  <ol><li>Optionally, two U+002D HYPHEN-MINUS characters (-)</li>

   <li>Two <a href=#ascii-digits>ASCII digits</a>, representing the month <var title="">month</var>, in the range
   1&nbsp;&le;&nbsp;<var title="">month</var>&nbsp;&le;&nbsp;12</li>

   <li>A U+002D HYPHEN-MINUS character (-)</li>

   <li>Two <a href=#ascii-digits>ASCII digits</a>, representing <var title="">day</var>, in the range
   1&nbsp;&le;&nbsp;<var title="">day</var>&nbsp;&le;&nbsp;<var title="">maxday</var> where <var title="">maxday</var> is the <a href=#number-of-days-in-month-month-of-year-year title="number of days in month month of year year">number of
   days</a> in the month <var title="">month</var> and any arbitrary leap year (e.g. 4 or
   2000)</li>

  </ol><p class=note>In other words, if the <var title="">month</var> is "<code title="">02</code>",
  meaning February, then the day can be 29, as if the year was a leap year.</p>

  <div class=impl>

  <p>The rules to <dfn id=parse-a-yearless-date-string>parse a yearless date string</dfn> are as follows. This will return either a
  month and a day, or nothing. If at any point the algorithm says that it "fails", this means that
  it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-yearless-date-component>Parse a yearless date component</a> to obtain <var title="">month</var> and <var title="">day</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Return <var title="">month</var> and <var title="">day</var>.</li>

  </ol><p>The rules to <dfn id=parse-a-yearless-date-component>parse a yearless date component</dfn>, given an <var title="">input</var>
  string and a <var title="">position</var>, are as follows. This will return either a month and a
  day, or nothing. If at any point the algorithm says that it "fails", this means that it is aborted
  at that point and returns nothing.</p>

  <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are U+002D HYPHEN-MINUS characters (-).
   If the collected sequence is not exactly zero or two characters long, then fail.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">month</var>.</li>

   <li><p>If <var title="">month</var> is not a number in the range 1&nbsp;&le;&nbsp;<var title="">month</var>&nbsp;&le;&nbsp;12, then fail.</li>

   <li><p>Let <var title="">maxday</var> be the <a href=#number-of-days-in-month-month-of-year-year title="number of days in month month of year
   year">number of days</a> in month <var title="">month</var> of any arbitrary leap year (e.g. 4
   or 2000).</li>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var title="">position</var> forwards one character.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">day</var>.</li>

   <li><p>If <var title="">day</var> is not a number in the range 1&nbsp;&le;&nbsp;<var title="">day</var>&nbsp;&le;&nbsp;<var title="">maxday</var>, then fail.</li>

   <li><p>Return <var title="">month</var> and <var title="">day</var>.</li>

  </ol></div>


  <h5 id=times><span class=secno>2.4.5.4 </span>Times</h5>

  <p>A <dfn id=concept-time title=concept-time>time</dfn> consists of a specific time with no time-zone
  information, consisting of an hour, a minute, a second, and a fraction of a second.</p>

  <p>A string is a <dfn id=valid-time-string>valid time string</dfn> representing an hour <var title="">hour</var>, a
  minute <var title="">minute</var>, and a second <var title="">second</var> if it consists of the
  following components in the given order:</p>

  <ol><li>Two <a href=#ascii-digits>ASCII digits</a>, representing <var title="">hour</var>, in the range
   0&nbsp;&le;&nbsp;<var title="">hour</var>&nbsp;&le;&nbsp;23</li>

   <li>A U+003A COLON character (:)</li>

   <li>Two <a href=#ascii-digits>ASCII digits</a>, representing <var title="">minute</var>, in the range
   0&nbsp;&le;&nbsp;<var title="">minute</var>&nbsp;&le;&nbsp;59</li>

   <li>If <var title="">second</var> is non-zero, or optionally if <var title="">second</var> is
   zero:

    <ol><li>A U+003A COLON character (:)</li>

     <li>Two <a href=#ascii-digits>ASCII digits</a>, representing the integer part of <var title="">second</var>,
     in the range 0&nbsp;&le;&nbsp;<var title="">s</var>&nbsp;&le;&nbsp;59</li>

     <li>If <var title="">second</var> is not an integer, or optionally if <var title="">second</var> is an integer:

      <ol><li>A 002E FULL STOP character (.)</li>

       <li>One, two, or three <a href=#ascii-digits>ASCII digits</a>, representing the fractional part of <var title="">second</var></li>

      </ol></li>

    </ol></li>

  </ol><p class=note>The <var title="">second</var> component cannot be 60 or 61; leap seconds cannot
  be represented.</p>

  <div class=impl>

  <p>The rules to <dfn id=parse-a-time-string>parse a time string</dfn> are as follows. This will return either a time, or
  nothing. If at any point the algorithm says that it "fails", this means that it is aborted at that
  point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-time-component>Parse a time component</a> to obtain <var title="">hour</var>, <var title="">minute</var>, and <var title="">second</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Let <var title="">time</var> be the time with hour <var title="">hour</var>, minute <var title="">minute</var>, and second <var title="">second</var>.</li>

   <li><p>Return <var title="">time</var>.</li>

  </ol><p>The rules to <dfn id=parse-a-time-component>parse a time component</dfn>, given an <var title="">input</var> string and a
  <var title="">position</var>, are as follows. This will return either an hour, a minute, and a
  second, or nothing. If at any point the algorithm says that it "fails", this means that it is
  aborted at that point and returns nothing.</p>

  <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">hour</var>.</li>

   <li>If <var title="">hour</var> is not a number in the range 0&nbsp;&le;&nbsp;<var title="">hour</var>&nbsp;&le;&nbsp;23, then fail.</li>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is not a U+003A COLON character, then fail. Otherwise,
   move <var title="">position</var> forwards one character.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">minute</var>.</li>

   <li>If <var title="">minute</var> is not a number in the range 0&nbsp;&le;&nbsp;<var title="">minute</var>&nbsp;&le;&nbsp;59, then fail.</li>

   <li><p>Let <var title="">second</var> be a string with the value "0".</li>

   <li>

    <p>If <var title="">position</var> is not beyond the end of <var title="">input</var> and the
    character at <var title="">position</var> is a U+003A COLON, then run these substeps:</p>

    <ol><li><p>Advance <var title="">position</var> to the next character in <var title="">input</var>.</li>

     <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var>, or at
     the last character in <var title="">input</var>, or if the next <em>two</em> characters in <var title="">input</var> starting at <var title="">position</var> are not both <a href=#ascii-digits>ASCII
     digits</a>, then fail.</li>

     <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are either <a href=#ascii-digits>ASCII digits</a>
     or U+002E FULL STOP characters. If the collected sequence is three characters long, or if it is
     longer than three characters long and the third character is not a U+002E FULL STOP character,
     or if it has more than one U+002E FULL STOP character, then fail. Otherwise, let the collected
     string be <var title="">second</var> instead of its previous value.</li>

    </ol></li>

   <li><p>Interpret <var title="">second</var> as a base-ten number (possibly with a fractional
   part). Let <var title="">second</var> be that number instead of the string version.</li>

   <li><p>If <var title="">second</var> is not a number in the range 0&nbsp;&le;&nbsp;<var title="">second</var>&nbsp;&lt;&nbsp;60, then fail.</li>

   <li><p>Return <var title="">hour</var>, <var title="">minute</var>, and <var title="">second</var>.</li>

  </ol></div>


  <h5 id=local-dates-and-times><span class=secno>2.4.5.5 </span>Local dates and times</h5>

  <p>A <dfn id=concept-datetime-local title=concept-datetime-local>local date and time</dfn> consists of a specific
  <a href=#proleptic-gregorian-date>proleptic-Gregorian date</a>, consisting of a year, a month, and a day, and a time,
  consisting of an hour, a minute, a second, and a fraction of a second, but expressed without a
  time zone. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>A string is a <dfn id=valid-local-date-and-time-string>valid local date and time string</dfn> representing a date and time if it
  consists of the following components in the given order:</p>

  <ol><li>A <a href=#valid-date-string>valid date string</a> representing the date</li>

   <li>A U+0054 LATIN CAPITAL LETTER T character (T) or a U+0020 SPACE character</li>

   <li>A <a href=#valid-time-string>valid time string</a> representing the time</li>

  </ol><p>A string is a <dfn id=valid-normalised-local-date-and-time-string>valid normalised local date and time string</dfn> representing a date and
  time if it consists of the following components in the given order:</p>

  <ol><li>A <a href=#valid-date-string>valid date string</a> representing the date</li>

   <li>A U+0054 LATIN CAPITAL LETTER T character (T)</li>

   <li>A <a href=#valid-time-string>valid time string</a> representing the time, expressed as the shortest possible
   string for the given time (e.g. omitting the seconds component entirely if the given time is zero
   seconds past the minute)</li>

  </ol><div class=impl>

  <p>The rules to <dfn id=parse-a-local-date-and-time-string>parse a local date and time string</dfn> are as follows. This will return
  either a date and time, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-date-component>Parse a date component</a> to obtain <var title="">year</var>, <var title="">month</var>, and <var title="">day</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is neither a U+0054 LATIN CAPITAL LETTER T character
   (T) nor a U+0020 SPACE character, then fail. Otherwise, move <var title="">position</var>
   forwards one character.</li>

   <li><p><a href=#parse-a-time-component>Parse a time component</a> to obtain <var title="">hour</var>, <var title="">minute</var>, and <var title="">second</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Let <var title="">date</var> be the date with year <var title="">year</var>, month <var title="">month</var>, and day <var title="">day</var>.</li>

   <li><p>Let <var title="">time</var> be the time with hour <var title="">hour</var>, minute <var title="">minute</var>, and second <var title="">second</var>.</li>

   <li><p>Return <var title="">date</var> and <var title="">time</var>.</li>

  </ol></div>


  <h5 id=time-zones><span class=secno>2.4.5.6 </span>Time zones</h5>

  <p>A <dfn id=concept-timezone title=concept-timezone>time-zone offset</dfn> consists of a signed number of hours and
  minutes.</p>

  <p>A string is a <dfn id=valid-time-zone-offset-string>valid time-zone offset string</dfn> representing a time-zone offset if it
  consists of either:</p>


  <ul><li><p>A U+005A LATIN CAPITAL LETTER Z character (Z), allowed only if the time zone is
   UTC</li>

   <li>

    <p>Or, the following components, in the given order:</p>

    <ol><li>Either a U+002B PLUS SIGN character (+) or, if the time-zone offset is not zero, a U+002D
     HYPHEN-MINUS character (-), representing the sign of the time-zone offset</li>
     <!-- the -00:00 offset is disallowed because RFC3339 gives it a special semantic -->

     <li>Two <a href=#ascii-digits>ASCII digits</a>, representing the hours component <var title="">hour</var> of
     the time-zone offset, in the range 0&nbsp;&le;&nbsp;<var title="">hour</var>&nbsp;&le;&nbsp;23</li>

     <li>Optionally, a U+003A COLON character (:)</li>

     <li>Two <a href=#ascii-digits>ASCII digits</a>, representing the minutes component <var title="">minute</var> of the time-zone offset, in the range 0&nbsp;&le;&nbsp;<var title="">minute</var>&nbsp;&le;&nbsp;59</li>

    </ol></li>

  </ul><p class=note>This format allows for time-zone offsets from -23:59 to +23:59. Right now, in
  practice, the range of offsets of actual time zones is -12:00 to +14:00, and the minutes component
  of offsets of actual time zones is always either 00, 30, or 45. There is no guarantee that this
  will remain so forever, however, since time zones are used as political footballs and are thus
  subject to very whimsical policy decisions.</p>

  <p class=note>See also the usage notes and examples in the <a href=#concept-datetime title=concept-datetime>global
  date and time</a> section below for details on using time-zone offsets with historical times
  that predate the formation of formal time zones.</p>

  <div class=impl>

  <p>The rules to <dfn id=parse-a-time-zone-offset-string>parse a time-zone offset string</dfn> are as follows. This will return either
  a time-zone offset, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-time-zone-offset-component>Parse a time-zone offset component</a> to obtain <var title="">timezone<sub title="">hours</sub></var> and <var title="">timezone<sub title="">minutes</sub></var>. If this
   returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Return the time-zone offset that is <var title="">timezone<sub title="">hours</sub></var>
   hours and <var title="">timezone<sub title="">minutes</sub></var> minutes from UTC.</li>

  </ol><p>The rules to <dfn id=parse-a-time-zone-offset-component>parse a time-zone offset component</dfn>, given an <var title="">input</var>
  string and a <var title="">position</var>, are as follows. This will return either time-zone hours
  and time-zone minutes, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li>

    <p>If the character at <var title="">position</var> is a U+005A LATIN CAPITAL LETTER Z character
    (Z), then:</p>

    <ol><li><p>Let <var title="">timezone<sub title="">hours</sub></var> be 0.</li>

     <li><p>Let <var title="">timezone<sub title="">minutes</sub></var> be 0.</li>

     <li><p>Advance <var title="">position</var> to the next character in <var title="">input</var>.</li>

    </ol><p>Otherwise, if the character at <var title="">position</var> is either a U+002B PLUS SIGN (+)
    or a U+002D HYPHEN-MINUS (-), then:</p>

    <ol><li><p>If the character at <var title="">position</var> is a U+002B PLUS SIGN (+), let <var title="">sign</var> be "positive". Otherwise, it's a U+002D HYPHEN-MINUS (-); let <var title="">sign</var> be "negative".</li>

     <li><p>Advance <var title="">position</var> to the next character in <var title="">input</var>.</li>

     <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. Let
     <var title="">s</var> be the collected sequence.</li>

     <li>

      <p>If <var title="">s</var> is exactly two characters long, then run these substeps:</p>

      <ol><li><p>Interpret <var title="">s</var> as a base-ten integer. Let that number be the <var title="">timezone<sub title="">hours</sub></var>.</li>

       <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if
       the character at <var title="">position</var> is not a U+003A COLON character, then fail.
       Otherwise, move <var title="">position</var> forwards one character.</li>

       <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If
       the collected sequence is not exactly two characters long, then fail. Otherwise, interpret
       the resulting sequence as a base-ten integer. Let that number be the <var title="">timezone<sub title="">minutes</sub></var>.</li>

      </ol><p>If <var title="">s</var> is exactly four characters long, then run these substeps:</p>

      <ol><li><p>Interpret the first two characters of <var title="">s</var> as a base-ten integer. Let
       that number be the <var title="">timezone<sub title="">hours</sub></var>.</li>

       <li><p>Interpret the last two characters of <var title="">s</var> as a base-ten integer. Let
       that number be the <var title="">timezone<sub title="">minutes</sub></var>.</li>

      </ol><p>Otherwise, fail.</p>

     </li>

     <li>If <var title="">timezone<sub title="">hours</sub></var> is not a number in the range
     0&nbsp;&le;&nbsp;<var title="">timezone<sub title="">hours</sub></var>&nbsp;&le;&nbsp;23, then
     fail.</li>

     <li>If <var title="">sign</var> is "negative", then negate <var title="">timezone<sub title="">hours</sub></var>.</li>

     <li>If <var title="">timezone<sub title="">minutes</sub></var> is not a number in the range
     0&nbsp;&le;&nbsp;<var title="">timezone<sub title="">minutes</sub></var>&nbsp;&le;&nbsp;59,
     then fail.</li>

     <li>If <var title="">sign</var> is "negative", then negate <var title="">timezone<sub title="">minutes</sub></var>.</li>

    </ol><p>Otherwise, fail.</p>

   </li>

   <li><p>Return <var title="">timezone<sub title="">hours</sub></var> and <var title="">timezone<sub title="">minutes</sub></var>.</li>

  </ol></div>


  <h5 id=global-dates-and-times><span class=secno>2.4.5.7 </span>Global dates and times</h5>

  <p>A <dfn id=concept-datetime title=concept-datetime>global date and time</dfn> consists of a specific
  <a href=#proleptic-gregorian-date>proleptic-Gregorian date</a>, consisting of a year, a month, and a day, and a time,
  consisting of an hour, a minute, a second, and a fraction of a second, expressed with a time-zone
  offset, consisting of a signed number of hours and minutes. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>A string is a <dfn id=valid-global-date-and-time-string>valid global date and time string</dfn> representing a date, time, and a
  time-zone offset if it consists of the following components in the given order:</p>

  <ol><li>A <a href=#valid-date-string>valid date string</a> representing the date</li>

   <li>A U+0054 LATIN CAPITAL LETTER T character (T) or a U+0020 SPACE character</li>

   <li>A <a href=#valid-time-string>valid time string</a> representing the time</li>

   <li>A <a href=#valid-time-zone-offset-string>valid time-zone offset string</a> representing the time-zone offset</li>

  </ol><p>Times in dates before the formation of UTC in the mid twentieth century must be expressed and
  interpreted in terms of UT1 (contemporary Earth solar time at the 0&deg; longitude), not UTC (the
  approximation of UT1 that ticks in SI seconds). Time before the formation of time zones must be
  expressed and interpeted as UT1 times with explicit time zones that approximate the contemporary
  difference between the appropriate local time and the time observed at the location of Greenwich,
  London.</p>

  <div class=example>

   <p>The following are some examples of dates written as <a href=#valid-global-date-and-time-string title="valid global date and time
   string">valid global date and time strings</a>.</p>

   <dl><dt>"<code>0037-12-13 00:00Z</code>"</dt>

    <dd>Midnight in areas using London time on the birthday of Nero (the Roman Emperor). See below
    for further discussion on which date this actually corresponds to.</dd>

    <dt>"<code>1979-10-14T12:00:00.001-04:00</code>"</dt>

    <dd>One millisecond after noon on October 14th 1979, in the time zone in use on the east coast
    of the USA during daylight saving time.</dd>

    <dt>"<code>8592-01-01T02:09+02:09</code>"</dt>

    <dd>Midnight UTC on the 1st of January, 8592. The time zone associated with that time is two
    hours and nine minutes ahead of UTC, which is not currently a real time zone, but is nonetheless
    allowed.</dd>

   </dl><p>Several things are notable about these dates:</p>

   <ul><li>Years with fewer than four digits have to be zero-padded. The date "37-12-13" would not be a
    valid date.</li>

    <li>If the "<code title="">T</code>" is replaced by a space, it must be a single space
    character. The string "<code title="">2001-12-21&nbsp;&nbsp;12:00Z</code>" (with two spaces
    between the components) would not be parsed successfully.</li>

    <li>To unambiguously identify a moment in time prior to the introduction of the Gregorian
    calendar (insofar as moments in time before the formation of UTC can be unambiguously
    identified), the date has to be first converted to the Gregorian calendar from the calendar in
    use at the time (e.g. from the Julian calendar). The date of Nero's birth is the 15th of
    December 37, in the Julian Calendar, which is the 13th of December 37 in the <a href=#proleptic-gregorian-calendar>proleptic
    Gregorian calendar</a>.</li> <!-- This might not be true. I can't find a reference that gives
    his birthday with an explicit statement about the calendar being used. However, it seems
    unlikely that it would be given in the Gregorian calendar, so I assume sites use the Julian one.
    -->

    <li>The time and time-zone offset components are not optional.</li>

    <li>Dates before the year one can't be represented as a datetime in this version of HTML.</li>

    <li>Times of specific events in ancient times are, at best, approximations, since time was not
    well coordinated or measured until relatively recent decades.</li>

    <li>Time-zone offsets differ based on daylight savings time.</li>

   </ul></div>

  <p>A string is a <dfn id=valid-normalised-forced-utc-global-date-and-time-string>valid normalised forced-UTC global date and time string</dfn> representing a
  date, time, and a time-zone offset if it consists of the following components in the given
  order:</p>

  <ol><li>A <a href=#valid-date-string>valid date string</a> representing the date converted to the UTC time zone</li>

   <li>A U+0054 LATIN CAPITAL LETTER T character (T)</li>

   <li>A <a href=#valid-time-string>valid time string</a> representing the time converted to the UTC time zone and
   expressed as the shortest possible string for the given time (e.g. omitting the seconds component
   entirely if the given time is zero seconds past the minute)</li>

   <li>A U+005A LATIN CAPITAL LETTER Z character (Z)</li>

  </ol><div class=impl>

  <p>The rules to <dfn id=parse-a-global-date-and-time-string>parse a global date and time string</dfn> are as follows. This will return
  either a time in UTC, with associated time-zone offset information for round-tripping or display
  purposes, or nothing. If at any point the algorithm says that it "fails", this means that it is
  aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#parse-a-date-component>Parse a date component</a> to obtain <var title="">year</var>, <var title="">month</var>, and <var title="">day</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is neither a U+0054 LATIN CAPITAL LETTER T character
   (T) nor a U+0020 SPACE character, then fail. Otherwise, move <var title="">position</var>
   forwards one character.</li>

   <li><p><a href=#parse-a-time-component>Parse a time component</a> to obtain <var title="">hour</var>, <var title="">minute</var>, and <var title="">second</var>. If this returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var>, then
   fail.</li>

   <li><p><a href=#parse-a-time-zone-offset-component>Parse a time-zone offset component</a> to obtain <var title="">timezone<sub title="">hours</sub></var> and <var title="">timezone<sub title="">minutes</sub></var>. If this
   returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Let <var title="">time</var> be the moment in time at year <var title="">year</var>, month
   <var title="">month</var>, day <var title="">day</var>, hours <var title="">hour</var>, minute
   <var title="">minute</var>, second <var title="">second</var>, subtracting <var title="">timezone<sub title="">hours</sub></var> hours and <var title="">timezone<sub title="">minutes</sub></var> minutes. That moment in time is a moment in the UTC time
   zone.</li>

   <li><p>Let <var title="">timezone</var> be <var title="">timezone<sub title="">hours</sub></var>
   hours and <var title="">timezone<sub title="">minutes</sub></var> minutes from UTC.</li>

   <li><p>Return <var title="">time</var> and <var title="">timezone</var>.</li>

  </ol></div>


  <h5 id=weeks><span class=secno>2.4.5.8 </span>Weeks</h5>

  <p>A <dfn id=concept-week title=concept-week>week</dfn> consists of a week-year number and a week number
  representing a seven-day period starting on a Monday. Each week-year in this calendaring system
  has either 52 or 53 such seven-day periods, as defined below. The seven-day period starting on the
  Gregorian date Monday December 29th 1969 (1969-12-29) is defined as week number 1 in week-year
  1970. Consecutive weeks are numbered sequentially. The week before the number 1 week in a
  week-year is the last week in the previous week-year, and vice versa. <a href=#refsGREGORIAN>[GREGORIAN]</a></p>

  <p>A week-year with a number <var title="">year</var> has 53 weeks if it corresponds to either a
  year <var title="">year</var> in the <a href=#proleptic-gregorian-calendar>proleptic Gregorian calendar</a> that has a Thursday
  as its first day (January 1st), or a year <var title="">year</var> in the <a href=#proleptic-gregorian-calendar>proleptic
  Gregorian calendar</a> that has a Wednesday as its first day (January 1st) and where <var title="">year</var> is a number divisible by 400, or a number divisible by 4 but not by 100. All
  other week-years have 52 weeks.</p>

  <p>The <dfn id=week-number-of-the-last-day>week number of the last day</dfn> of a week-year with 53 weeks is 53; the week number
  of the last day of a week-year with 52 weeks is 52.</p>

  <p class=note>The week-year number of a particular day can be different than the number of the
  year that contains that day in the <a href=#proleptic-gregorian-calendar>proleptic Gregorian calendar</a>. The first week in a
  week-year <var title="">y</var> is the week that contains the first Thursday of the Gregorian year
  <var title="">y</var>.</p>

  <p class=note>For modern purposes, a <a href=#concept-week title=concept-week>week</a> as defined here is
  equivalent to ISO weeks as defined in ISO 8601. <a href=#refsISO8601>[ISO8601]</a></p>

  <p>A string is a <dfn id=valid-week-string>valid week string</dfn> representing a week-year <var title="">year</var>
  and week <var title="">week</var> if it consists of the following components in the given
  order:</p>

  <ol><li>Four or more <a href=#ascii-digits>ASCII digits</a>, representing <var title="">year</var>, where <var title="">year</var>&nbsp;&gt;&nbsp;0</li>

   <li>A U+002D HYPHEN-MINUS character (-)</li>

   <li>A U+0057 LATIN CAPITAL LETTER W character (W)</li>

   <li>Two <a href=#ascii-digits>ASCII digits</a>, representing the week <var title="">week</var>, in the range
   1&nbsp;&le;&nbsp;<var title="">week</var>&nbsp;&le;&nbsp;<var title="">maxweek</var>, where <var title="">maxweek</var> is the <a href=#week-number-of-the-last-day>week number of the last day</a> of week-year <var title="">year</var></li>

  </ol><div class=impl>

  <p>The rules to <dfn id=parse-a-week-string>parse a week string</dfn> are as follows. This will return either a week-year
  number and week number, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not at least four characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">year</var>.</li>

   <li><p>If <var title="">year</var> is not a number greater than zero, then fail.</li>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var title="">position</var> forwards one character.</li>

   <li><p>If <var title="">position</var> is beyond the end of <var title="">input</var> or if the
   character at <var title="">position</var> is not a U+0057 LATIN CAPITAL LETTER W character (W),
   then fail. Otherwise, move <var title="">position</var> forwards one character.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var title="">week</var>.</li>

   <li><p>Let <var title="">maxweek</var> be the <a href=#week-number-of-the-last-day>week number of the last day</a> of year
   <var title="">year</var>.</li>

   <li><p>If <var title="">week</var> is not a number in the range 1&nbsp;&le;&nbsp;<var title="">week</var>&nbsp;&le;&nbsp;<var title="">maxweek</var>, then fail.</li>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li><p>Return the week-year number <var title="">year</var> and the week number <var title="">week</var>.</li>

  </ol></div>


  <h5 id=durations><span class=secno>2.4.5.9 </span>Durations</h5>

  <!-- if you add support for year and month durations, then search for MONTHS throughout the spec
  (not just this section) for things that have to change -->

  <p>A <dfn id=concept-duration title=concept-duration>duration</dfn> consists of <!--MONTHS: either a number of
  months or--> a number of seconds.</p>

  <p class=note>Since months and seconds are not comparable (a month is not a precise number of
  seconds, but is instead a period whose exact length depends on the precise day from which it is
  measured) a <a href=#concept-duration title=concept-duration>duration</a> as defined in this specification cannot
  <!--MONTHS: consist of a mixture of both--> include months (or years, which are equivalent to
  twelve months). Only durations that describe a specific number of seconds can be described.</p>

  <p>A string is a <dfn id=valid-duration-string>valid duration string</dfn> representing a <a href=#concept-duration title=concept-duration>duration</a> <var title="">t</var> if it consists of either of the
  following:</p>

  <ul><li>

    <!-- The ISO format -->

    <!-- NOTE: ISO durations also have a number of formats we do not
         consider conforming:

         - a "week" format (e.g. P4W). This one is actually supported
           by the parser.

         - P<date>T<time>, with or without hyphens

         - All these formats, with commas instead of periods for the
           seconds decimal

    -->

    <p>A literal U+0050 LATIN CAPITAL LETTER P character followed by one or more of the following
    subcomponents, in the order given, where <!--the number of years, if any, multiplied by twelve,
    plus the number of months, if any, equals the number of months in <var title="">t</var>, if the
    duration is in months; or, if it is in seconds, -->the number of days, hours, minutes, and
    seconds corresponds to the same number of seconds as in <var title="">t</var>:</p>

    <ol><!--MONTHS:
     <li><p>One or more <span>ASCII digits</span> followed by a U+0059 LATIN CAPITAL LETTER Y
     character, representing a number of years.</p></li>

     <li><p>One or more <span>ASCII digits</span> followed by a U+004D LATIN CAPITAL LETTER M
     character, representing a number of months.</p></li>
--><li><p>One or more <a href=#ascii-digits>ASCII digits</a> followed by a U+0044 LATIN CAPITAL LETTER D
     character, representing a number of days.</li>

     <li>

      <p>A U+0054 LATIN CAPITAL LETTER T character followed by one or more of the following
      subcomponents, in the order given:</p>

      <ol><li><p>One or more <a href=#ascii-digits>ASCII digits</a> followed by a U+0048 LATIN CAPITAL LETTER H
       character, representing a number of hours.</li>

       <li><p>One or more <a href=#ascii-digits>ASCII digits</a> followed by a U+004D LATIN CAPITAL LETTER M
       character, representing a number of minutes.</li>

       <li>

        <p>The following components:</p>

        <ol><li><p>One or more <a href=#ascii-digits>ASCII digits</a>, representing a number of seconds.</li>

         <li><p>Optionally, a U+002E FULL STOP character (.) followed by one, two, or three
         <a href=#ascii-digits>ASCII digits</a>, representing a fraction of a second.</li>

         <li><p>A U+0053 LATIN CAPITAL LETTER S character.</li>

        </ol></li>

      </ol></li>

    </ol><p class=note>This, as with a number of other date- and time-related microsyntaxes defined in
    this specification, is based on one of the formats defined in ISO 8601. <a href=#refsISO8601>[ISO8601]</a></p>

   </li>

   <li>

    <p>One or more <a href=#duration-time-component title="duration time component">duration time components</a>, each with
    a different <a href=#duration-time-component-scale>duration time component scale</a>, in any order; the sum of the represented
    seconds being equal to the number of seconds in <var title="">t</var>.</p>

    <p>A <dfn id=duration-time-component>duration time component</dfn> is a string consisting of the following components:</p>

    <ol><li><p>Zero or more <a href=#space-character title="space character">space characters</a>.</li>

     <li><p>One or more <a href=#ascii-digits>ASCII digits</a>, representing a number of time units, scaled by
     the <a href=#duration-time-component-scale>duration time component scale</a> specified (see below) to represent a number of
     seconds.</li>

     <li><p>If the <a href=#duration-time-component-scale>duration time component scale</a> specified is 1 (i.e. the units are
     seconds), then, optionally, a U+002E FULL STOP character (.) followed by one, two, or three
     <a href=#ascii-digits>ASCII digits</a>, representing a fraction of a second.</li>

     <li><p>Zero or more <a href=#space-character title="space character">space characters</a>.</li>

     <li>

      <p>One of the following characters, representing the <dfn id=duration-time-component-scale>duration time component scale</dfn>
      of the time unit used in the numeric part of the <a href=#duration-time-component>duration time component</a>:</p>

      <dl><dt>U+0057 LATIN CAPITAL LETTER W character</dt>
       <dt>U+0077 LATIN SMALL LETTER W character</dt>

       <dd>Weeks. The scale is 604800.</dd>

       <dt>U+0044 LATIN CAPITAL LETTER D character</dt>
       <dt>U+0064 LATIN SMALL LETTER D character</dt>

       <dd>Days. The scale is 86400.</dd>

       <dt>U+0048 LATIN CAPITAL LETTER H character</dt>
       <dt>U+0068 LATIN SMALL LETTER H character</dt>

       <dd>Hours. The scale is 3600.</dd>

       <dt>U+004D LATIN CAPITAL LETTER M character</dt>
       <dt>U+006D LATIN SMALL LETTER M character</dt>

       <dd>Minutes. The scale is 60.</dd>

       <dt>U+0053 LATIN CAPITAL LETTER S character</dt>
       <dt>U+0073 LATIN SMALL LETTER S character</dt>

       <dd>Seconds. The scale is 1.</dd>

      </dl></li>

     <li><p>Zero or more <a href=#space-character title="space character">space
     characters</a>.</li>

    </ol><p class=note>This is not based on any of the formats in ISO 8601. It is intended to be a more
    human-readable alternative to the ISO 8601 duration format.</p>

   </li>

  </ul><div class=impl>

  <p>The rules to <dfn id=parse-a-duration-string>parse a duration string</dfn> are as follows. This will return either a <a href=#concept-duration title=concept-duration>duration</a> or nothing. If at any point the algorithm says that it
  "fails", this means that it is aborted at that point and returns nothing.</p>

  <ol><!--MONTHS: this algorithm actually already parses months adequately, though it would need
   tweaking if we introduced a "mo" unit for the non-ISO variant. See other "MONTHS" annotations
   below. --><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">months</var>, <var title="">seconds</var>, and <var title="">component
   count</var> all be zero.</li>

   <li>

    <p>Let <var title="">M-disambiguator</var> be <i>minutes</i>.</p>

    <!--MONTHS: this note would change-->
    <p class=note>This flag's other value is <i>months</i>. It is used to disambiguate the "M"
    unit in ISO8601 durations, which use the same unit for months and minutes. Months are not
    allowed, but are parsed for future compatibility and to avoid misinterpreting ISO8601 durations
    that would be valid in other contexts.</p>

   </li>

   <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

   <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then
   fail.</li>

   <li><p>If the character in <var title="">input</var> pointed to by <var title="">position</var>
   is a U+0050 LATIN CAPITAL LETTER P character, then advance <var title="">position</var> to the
   next character, set <var title="">M-disambiguator</var> to <i>months</i>, and <a href=#skip-whitespace>skip
   whitespace</a>.</li>

   <li>

    <p>Run the following substeps in a loop, until a step requiring the loop to be broken or the
    entire algorithm to fail is reached:</p>

    <ol><li><p>Let <var title="">units</var> be undefined. It will be assigned one of the following
     values: <i>years</i>, <i>months</i>, <i>weeks</i>, <i>days</i>, <i>hours</i>, <i>minutes</i>,
     and <i>seconds</i>.</li>

     <li><p>Let <var title="">next character</var> be undefined. It is used to process characters
     from the <var title="">input</var>.</li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then break
     the loop.</li>

     <li><p>If the character in <var title="">input</var> pointed to by <var title="">position</var>
     is a U+0054 LATIN CAPITAL LETTER T character, then advance <var title="">position</var> to the
     next character, set <var title="">M-disambiguator</var> to <i>minutes</i>, <a href=#skip-whitespace>skip
     whitespace</a>, and return to the top of the loop.</li>

     <li><p>Set <var title="">next character</var> to the character in <var title="">input</var>
     pointed to by <var title="">position</var>.</li>

     <li>

      <p>If <var title="">next character</var> is a U+002E FULL STOP character (.), then let <var title="">N</var> equal zero. (Do not advance <var title="">position</var>. That is taken care
      of below.)</p>

      <p>Otherwise, if <var title="">next character</var> is an <a href=#ascii-digits title="ASCII digits">ASCII
      digit</a>, then <a href=#collect-a-sequence-of-characters>collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII
      digits</a>, interpret the resulting sequence as a base-ten integer, and let <var title="">N</var> be that number.</p>

      <p>Otherwise <var title="">next character</var> is not part of a number; fail.</p>

     </li>

     <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then
     fail.</li>

     <li><p>Set <var title="">next character</var> to the character in <var title="">input</var>
     pointed to by <var title="">position</var>, and this time advance <var title="">position</var>
     to the next character. (If <var title="">next character</var> was a U+002E FULL STOP character
     (.) before, it will still be that character this time.)</li>

     <li>

      <p>If <var title="">next character</var> is a U+002E FULL STOP character (.), then run these
      substeps:</p>

      <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are <a href=#ascii-digits>ASCII digits</a>. Let
       <var title="">s</var> be the resulting sequence.</li>

       <li><p>If <var title="">s</var> is the empty string, then fail.</li>

       <li><p>Let <var title="">length</var> be the number of characters in <var title="">s</var>.</li>

       <li><p>Let <var title="">fraction</var> be the result of interpreting <var title="">s</var>
       as a base-ten integer, and then dividing that number by <span title="">10<sup title=""><var title="">length</var></sup></span>.</li>

       <li><p>Increment <var title="">N</var> by <var title="">fraction</var>.</li>

       <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

       <li><p>If <var title="">position</var> is past the end of <var title="">input</var>, then
       fail.</li>

       <li><p>Set <var title="">next character</var> to the character in <var title="">input</var>
       pointed to by <var title="">position</var>, and advance <var title="">position</var> to the
       next character.</li>

       <li><p>If <var title="">next character</var> is neither a U+0053 LATIN CAPITAL LETTER S
       character nor a U+0073 LATIN SMALL LETTER S character, then fail.</li>

       <li><p>Set <var title="">units</var> to <i>seconds</i>.</li>

      </ol><p>Otherwise, run these substeps:</p>

      <ol><li><p>If <var title="">next character</var> is a <a href=#space-character>space character</a>, then
       <a href=#skip-whitespace>skip whitespace</a>, set <var title="">next character</var> to the character in <var title="">input</var> pointed to by <var title="">position</var>, and advance <var title="">position</var> to the next character.</li>

       <li>

        <!--MONTHS: this would probably be where we would add more
        logic to support a new unit like 'mo' -->

        <p>If <var title="">next character</var> is a U+0059 LATIN CAPITAL LETTER Y character, or a
        U+0079 LATIN SMALL LETTER Y character, set <var title="">units</var> to <i>years</i> and set
        <var title="">M-disambiguator</var> to <i>months</i>.</p>

        <p>If <var title="">next character</var> is a U+004D LATIN CAPITAL LETTER M character or a
        U+006D LATIN SMALL LETTER M character, and <var title="">M-disambiguator</var> is
        <i>months</i>, then set <var title="">units</var> to <i>months</i>.</p>

        <p>If <var title="">next character</var> is a U+0057 LATIN CAPITAL LETTER W character or a
        U+0077 LATIN SMALL LETTER W character, set <var title="">units</var> to <i>weeks</i> and set
        <var title="">M-disambiguator</var> to <i>minutes</i>.</p>

        <p>If <var title="">next character</var> is a U+0044 LATIN CAPITAL LETTER D character or a
        U+0064 LATIN SMALL LETTER D character, set <var title="">units</var> to <i>days</i> and set
        <var title="">M-disambiguator</var> to <i>minutes</i>.</p>

        <p>If <var title="">next character</var> is a U+0048 LATIN CAPITAL LETTER H character or a
        U+0068 LATIN SMALL LETTER H character, set <var title="">units</var> to <i>hours</i> and set
        <var title="">M-disambiguator</var> to <i>minutes</i>.</p>

        <p>If <var title="">next character</var> is a U+004D LATIN CAPITAL LETTER M character or a
        U+006D LATIN SMALL LETTER M character, and <var title="">M-disambiguator</var> is
        <i>minutes</i>, then set <var title="">units</var> to <i>minutes</i>.</p>

        <p>If <var title="">next character</var> is a U+0053 LATIN CAPITAL LETTER S character or a
        U+0073 LATIN SMALL LETTER S character, set <var title="">units</var> to <i>seconds</i> and
        set <var title="">M-disambiguator</var> to <i>minutes</i>.</p>

        <p>Otherwise if <var title="">next character</var> is none of the above characters, then
        fail.</p>

       </li>

      </ol></li>

     <li><p>Increment <var title="">component count</var>.</li>

     <li><p>Let <var title="">multiplier</var> be 1.</li>

     <li><p>If <var title="">units</var> is <i>years</i>, multiply <var title="">multiplier</var> by
     12 and set <var title="">units</var> to <i>months</i>.</li>

     <li>

      <p>If <var title="">units</var> is <i>months</i>, add the product of <var title="">N</var> and
      <var title="">multiplier</var> to <var title="">months</var>.</p>

      <p>Otherwise, run these substeps:</p>

      <ol><li><p>If <var title="">units</var> is <i>weeks</i>, multiply <var title="">multiplier</var>
       by 7 and set <var title="">units</var> to <i>days</i>.</li>

       <li><p>If <var title="">units</var> is <i>days</i>, multiply <var title="">multiplier</var>
       by 24 and set <var title="">units</var> to <i>hours</i>.</li>

       <li><p>If <var title="">units</var> is <i>hours</i>, multiply <var title="">multiplier</var>
       by 60 and set <var title="">units</var> to <i>minutes</i>.</li>

       <li><p>If <var title="">units</var> is <i>minutes</i>, multiply <var title="">multiplier</var> by 60 and set <var title="">units</var> to <i>seconds</i>.</li>

       <li><p>Forcibly, <var title="">units</var> is now <i>seconds</i>. Add the product of <var title="">N</var> and <var title="">multiplier</var> to <var title="">seconds</var>.</li>

      </ol></li>

     <li><p><a href=#skip-whitespace>Skip whitespace</a>.</li>

    </ol></li>

   <li><p>If <var title="">component count</var> is zero,
   fail.</li>

   <!--MONTHS: if we add month support this is where you'd return them-->
   <li><p>If <var title="">months</var> is not zero, fail.</li>

   <li><p>Return the <a href=#concept-duration title=concept-duration>duration</a> consisting of <var title="">seconds</var> seconds.</li>

  </ol></div>


  <h5 id=vaguer-moments-in-time><span class=secno>2.4.5.10 </span>Vaguer moments in time</h5>

  <p>A string is a <dfn id=valid-date-string-with-optional-time>valid date string with optional time</dfn> if
  it is also one of the following:</p>

  <ul><li>A <a href=#valid-date-string>valid date string</a></li>

   <li>A <a href=#valid-global-date-and-time-string>valid global date and time string</a></li>

  </ul><div class=impl>

  <hr><p>The rules to <dfn id=parse-a-date-or-time-string>parse a date or time string</dfn> are as follows. The algorithm will return
  either a <a href=#concept-date title=concept-date>date</a>, a <a href=#concept-time title=concept-time>time</a>, a <a href=#concept-datetime title=concept-datetime>global date and time</a>, or nothing. If at any point the algorithm
  says that it "fails", this means that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Set <var title="">start position</var> to the same position as <var title="">position</var>.</li>

   <li><p>Set the <var title="">date present</var> and <var title="">time present</var> flags to
   true.</li>

   <li><p><a href=#parse-a-date-component>Parse a date component</a> to obtain <var title="">year</var>, <var title="">month</var>, and <var title="">day</var>. If this fails, then set the <var title="">date
   present</var> flag to false.</p>

   <li>

    <p>If <var title="">date present</var> is true, and <var title="">position</var> is not beyond
    the end of <var title="">input</var>, and the character at <var title="">position</var> is
    either a U+0054 LATIN CAPITAL LETTER T character (T) or a U+0020 SPACE character, then advance
    <var title="">position</var> to the next character in <var title="">input</var>.</p>

    <p>Otherwise, if <var title="">date present</var> is true, and either <var title="">position</var> is beyond the end of <var title="">input</var> or the character at <var title="">position</var> is neither a U+0054 LATIN CAPITAL LETTER T character (T) nor a U+0020
    SPACE character, then set <var title="">time present</var> to false.</p>

    <p>Otherwise, if <var title="">date present</var> is false, set <var title="">position</var>
    back to the same position as <var title="">start position</var>.</p>

   </li>

   <li><p>If the <var title="">time present</var> flag is true, then <a href=#parse-a-time-component>parse a time
   component</a> to obtain <var title="">hour</var>, <var title="">minute</var>, and <var title="">second</var>. If this returns nothing, then fail.</li>

   <li><p>If the <var title="">date present</var> and <var title="">time present</var> flags are
   both true, but <var title="">position</var> is beyond the end of <var title="">input</var>, then
   fail.</li>

   <li><p>If the <var title="">date present</var> and <var title="">time present</var> flags are
   both true, <a href=#parse-a-time-zone-offset-component>parse a time-zone offset component</a> to obtain <var title="">timezone<sub title="">hours</sub></var> and <var title="">timezone<sub title="">minutes</sub></var>. If this
   returns nothing, then fail.</p>

   <li><p>If <var title="">position</var> is <em>not</em> beyond the end of <var title="">input</var>, then fail.</li>

   <li>

    <p>If the <var title="">date present</var> flag is true and the <var title="">time present</var>
    flag is false, then let <var title="">date</var> be the date with year <var title="">year</var>,
    month <var title="">month</var>, and day <var title="">day</var>, and return <var title="">date</var>.</p>

    <p>Otherwise, if the <var title="">time present</var> flag is true and the <var title="">date
    present</var> flag is false, then let <var title="">time</var> be the time with hour <var title="">hour</var>, minute <var title="">minute</var>, and second <var title="">second</var>,
    and return <var title="">time</var>.</p>

    <p>Otherwise, let <var title="">time</var> be the moment in time at year <var title="">year</var>, month <var title="">month</var>, day <var title="">day</var>, hours <var title="">hour</var>, minute <var title="">minute</var>, second <var title="">second</var>,
    subtracting <var title="">timezone<sub title="">hours</sub></var> hours and <var title="">timezone<sub title="">minutes</sub></var> minutes, that moment in time being a moment
    in the UTC time zone; let <var title="">timezone</var> be <var title="">timezone<sub title="">hours</sub></var> hours and <var title="">timezone<sub title="">minutes</sub></var>
    minutes from UTC; and return <var title="">time</var> and <var title="">timezone</var>.</p>

   </li>

  </ol></div>


  <h4 id=colors><span class=secno>2.4.6 </span>Colors</h4>

  <p>A <dfn id=simple-color>simple color</dfn> consists of three 8-bit numbers in the range 0..255, representing the
  red, green, and blue components of the color respectively, in the sRGB color space. <a href=#refsSRGB>[SRGB]</a></p>

  <p>A string is a <dfn id=valid-simple-color>valid simple color</dfn> if it is exactly seven characters long, and the
  first character is a U+0023 NUMBER SIGN character (#), and the remaining six characters are all
  <a href=#ascii-hex-digits>ASCII hex digits</a>, with the first two digits representing the red component, the
  middle two digits representing the green component, and the last two digits representing the blue
  component, in hexadecimal.</p>

  <p>A string is a <dfn id=valid-lowercase-simple-color>valid lowercase simple color</dfn> if it is a <a href=#valid-simple-color>valid simple
  color</a> and doesn't use any characters in the range U+0041 LATIN CAPITAL LETTER A to U+0046
  LATIN CAPITAL LETTER F.</p>

  <div class=impl>

  <p>The <dfn id=rules-for-parsing-simple-color-values>rules for parsing simple color values</dfn> are as given in the following algorithm.
  When invoked, the steps must be followed in the order given, aborting at the first step that
  returns a value. This algorithm will return either a <a href=#simple-color>simple color</a> or an error.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>If <var title="">input</var> is not exactly seven characters long, then return an
   error.</li>

   <li><p>If the first character in <var title="">input</var> is not a U+0023 NUMBER SIGN character
   (#), then return an error.</li>

   <li><p>If the last six characters of <var title="">input</var> are not all <a href=#ascii-hex-digits>ASCII hex
   digits</a>, then return an error.</li>

   <li><p>Let <var title="">result</var> be a <a href=#simple-color>simple color</a>.</p>

   <li><p>Interpret the second and third characters as a hexadecimal number and let the result be
   the red component of <var title="">result</var>.</p>

   <li><p>Interpret the fourth and fifth characters as a hexadecimal number and let the result be
   the green component of <var title="">result</var>.</p>

   <li><p>Interpret the sixth and seventh characters as a hexadecimal number and let the result be
   the blue component of <var title="">result</var>.</p>

   <li><p>Return <var title="">result</var>.</p>

  </ol><p>The <dfn id=rules-for-serializing-simple-color-values>rules for serializing simple color values</dfn> given a <a href=#simple-color>simple color</a> are
  as given in the following algorithm:</p>

  <ol><li><p>Let <var title="">result</var> be a string consisting of a single U+0023 NUMBER SIGN
   character (#).</li>

   <li><p>Convert the red, green, and blue components in turn to two-digit hexadecimal numbers using
   <a href=#lowercase-ascii-hex-digits>lowercase ASCII hex digits</a>, zero-padding if necessary, and append these numbers to
   <var title="">result</var>, in the order red, green, blue.</p>

   <li><p>Return <var title="">result</var>, which will be a <a href=#valid-lowercase-simple-color>valid lowercase simple
   color</a>.</li>

  </ol><hr><p>Some obsolete legacy attributes parse colors in a more complicated manner, using the <dfn id=rules-for-parsing-a-legacy-color-value>rules
  for parsing a legacy color value</dfn>, which are given in the following algorithm. When invoked,
  the steps must be followed in the order given, aborting at the first step that returns a value.
  This algorithm will return either a <a href=#simple-color>simple color</a> or an error.</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>If <var title="">input</var> is the empty string, then return an error.</li>

   <li><p><a href=#strip-leading-and-trailing-whitespace>Strip leading and trailing whitespace</a> from <var title="">input</var>.</li>

   <li><p>If <var title="">input</var> is an <a href=#ascii-case-insensitive>ASCII case-insensitive</a> match for the
   string "<code title="">transparent</code>", then return an error.</li>

   <li>

    <p>If <var title="">input</var> is an <a href=#ascii-case-insensitive>ASCII case-insensitive</a> match for one of the
    keywords listed in the <a href=http://www.w3.org/TR/css3-color/#svg-color>SVG color
    keywords</a> <!-- or <a href="http://www.w3.org/TR/css3-color/#css2-system">CSS2 System
    Colors</a> --> section<!--s--> of the CSS3 Color specification, then return the <a href=#simple-color>simple
    color</a> corresponding to that keyword. <a href=#refsCSSCOLOR>[CSSCOLOR]</a></p>

    <p class=note><a href=http://www.w3.org/TR/css3-color/#css2-system>CSS2 System
    Colors</a> are not recognised.</p>

   </li>

   <li>

    <p>If <var title="">input</var> is four characters long, and the first character in <var title="">input</var> is a U+0023 NUMBER SIGN character (#), and the last three characters of
    <var title="">input</var> are all <a href=#ascii-hex-digits>ASCII hex digits</a>, then run these substeps:</p>

    <ol><li><p>Let <var title="">result</var> be a <a href=#simple-color>simple color</a>.</p>

     <li><p>Interpret the second character of <var title="">input</var> as a hexadecimal digit; let
     the red component of <var title="">result</var> be the resulting number multiplied by 17.</p>

     <li><p>Interpret the third character of <var title="">input</var> as a hexadecimal digit; let
     the green component of <var title="">result</var> be the resulting number multiplied by 17.</p>

     <li><p>Interpret the fourth character of <var title="">input</var> as a hexadecimal digit; let
     the blue component of <var title="">result</var> be the resulting number multiplied by 17.</p>

     <li><p>Return <var title="">result</var>.</p>

    </ol></li>

   <li><p>Replace any characters in <var title="">input</var> that have a Unicode code point greater
   than U+FFFF (i.e. any characters that are not in the basic multilingual plane) with the
   two-character string "<code title="">00</code>".</li>

   <li><p>If <var title="">input</var> is longer than 128 characters, truncate <var title="">input</var>, leaving only the first 128 characters.</li>

   <li><p>If the first character in <var title="">input</var> is a U+0023 NUMBER SIGN character (#),
   remove it.</li>

   <li><p>Replace any character in <var title="">input</var> that is not an <a href=#ascii-hex-digits title="ASCII hex
   digits">ASCII hex digit</a> with the character U+0030 DIGIT ZERO (0).</li>

   <li><p>While <var title="">input</var>'s length is zero or not a multiple of three, append a
   U+0030 DIGIT ZERO (0) character to <var title="">input</var>.</li>

   <li><p>Split <var title="">input</var> into three strings of equal length, to obtain three
   components. Let <var title="">length</var> be the length of those components (one third the
   length of <var title="">input</var>).</li>

   <li><p>If <var title="">length</var> is greater than 8, then remove the leading <span title=""><var title="">length</var>-8</span> characters in each component, and let <var title="">length</var> be 8.</li>

   <li><p>While <var title="">length</var> is greater than two and the first character in each
   component is a U+0030 DIGIT ZERO (0) character, remove that character and reduce <var title="">length</var> by one.</li>

   <li><p>If <var title="">length</var> is <em>still</em> greater than two, truncate each component,
   leaving only the first two characters in each.</li>

   <li><p>Let <var title="">result</var> be a <a href=#simple-color>simple color</a>.</p>

   <li><p>Interpret the first component as a hexadecimal number; let the red component of <var title="">result</var> be the resulting number.</li>

   <li><p>Interpret the second component as a hexadecimal number; let the green component of <var title="">result</var> be the resulting number.</li>

   <li><p>Interpret the third component as a hexadecimal number; let the blue component of <var title="">result</var> be the resulting number.</li>

   <li><p>Return <var title="">result</var>.</p>

  </ol></div>

  <hr><p class=note>The <a href=#canvas-context-2d title=canvas-context-2d>2D graphics context</a> has a separate
  color syntax that also handles opacity.</p>



  <h4 id=space-separated-tokens><span class=secno>2.4.7 </span>Space-separated tokens</h4>

  <p>A <dfn id=set-of-space-separated-tokens>set of space-separated tokens</dfn> is a string containing zero or more words (known as
  tokens) separated by one or more <a href=#space-character title="space character">space characters</a>, where
  words consist of any string of one or more characters, none of which are <a href=#space-character title="space
  character">space characters</a>.</p>

  <p>A string containing a <a href=#set-of-space-separated-tokens>set of space-separated tokens</a> may have leading or trailing
  <a href=#space-character title="space character">space characters</a>.</p>

  <p>An <dfn id=unordered-set-of-unique-space-separated-tokens>unordered set of unique space-separated tokens</dfn> is a <a href=#set-of-space-separated-tokens>set of space-separated
  tokens</a> where none of the tokens are duplicated.</p>

  <p>An <dfn id=ordered-set-of-unique-space-separated-tokens>ordered set of unique space-separated tokens</dfn> is a <a href=#set-of-space-separated-tokens>set of space-separated
  tokens</a> where none of the tokens are duplicated but where the order of the tokens is
  meaningful.</p>

  <p><a href=#set-of-space-separated-tokens title="set of space-separated tokens">Sets of space-separated tokens</a> sometimes
  have a defined set of allowed values. When a set of allowed values is defined, the tokens must all
  be from that list of allowed values; other values are non-conforming. If no such set of allowed
  values is provided, then all values are conforming.</p>

  <p class=note>How tokens in a <a href=#set-of-space-separated-tokens>set of space-separated tokens</a> are to be compared
  (e.g. case-sensitively or not) is defined on a per-set basis.</p>

  <div class=impl>

  <p>When a user agent has to <dfn id=split-a-string-on-spaces>split a string on spaces</dfn>, it must use the following
  algorithm:</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">tokens</var> be an ordered list of tokens, initially empty.</li>

   <li><p><a href=#skip-whitespace>Skip whitespace</a></li>

   <li><p>While <var title="">position</var> is not past the end of <var title="">input</var>:</p>

    <ol><li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are not <a href=#space-character title="space
     character">space characters</a>.</li>

     <li><p>Append the string collected in the previous step to <var title="">tokens</var>.</li>

     <li><p><a href=#skip-whitespace>Skip whitespace</a></li>

    </ol></li>

   <li><p>Return <var title="">tokens</var>.</li>

  </ol></div>


  <h4 id=comma-separated-tokens><span class=secno>2.4.8 </span>Comma-separated tokens</h4>

  <p>A <dfn id=set-of-comma-separated-tokens>set of comma-separated tokens</dfn> is a string containing zero or more tokens each
  separated from the next by a single U+002C COMMA character (,), where tokens consist of any string
  of zero or more characters, neither beginning nor ending with <a href=#space-character title="space character">space
  characters</a>, nor containing any U+002C COMMA characters (,), and optionally surrounded by
  <a href=#space-character title="space character">space characters</a>.</p>

  <p class=example>For instance, the string "<code title="">&nbsp;a&nbsp;,b,,d&nbsp;d&nbsp;</code>" consists of four tokens: "a", "b", the empty
  string, and "d&nbsp;d". Leading and trailing whitespace around each token doesn't count as part of
  the token, and the empty string can be a token.</p>

  <p><a href=#set-of-comma-separated-tokens title="set of comma-separated tokens">Sets of comma-separated tokens</a> sometimes
  have further restrictions on what consists a valid token. When such restrictions are defined, the
  tokens must all fit within those restrictions; other values are non-conforming. If no such
  restrictions are specified, then all values are conforming.</p>

  <div class=impl>

  <p>When a user agent has to <dfn id=split-a-string-on-commas>split a string on commas</dfn>, it must use the following
  algorithm:</p>

  <ol><li><p>Let <var title="">input</var> be the string being parsed.</li>

   <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Let <var title="">tokens</var> be an ordered list of tokens, initially empty.</li>

   <li><p><i>Token</i>: If <var title="">position</var> is past the end of <var title="">input</var>, jump to the last step.</li>

   <li><p><a href=#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are not U+002C COMMA characters (,).
   Let <var title="">s</var> be the resulting sequence (which might be the empty string).</li>

   <li><p><a href=#strip-leading-and-trailing-whitespace>Strip leading and trailing whitespace</a> from <var title="">s</var>.</li>

   <li><p>Append <var title="">s</var> to <var title="">tokens</var>.</li>

   <li><p>If <var title="">position</var> is not past the end of <var title="">input</var>, then
   the character at <var title="">position</var> is a U+002C COMMA character (,); advance <var title="">position</var> past that character.</li>

   <li><p>Jump back to the step labeled <i>token</i>.</li>

   <li><p>Return <var title="">tokens</var>.</li>

  </ol></div>




  <h4 id=syntax-references><span class=secno>2.4.9 </span>References</h4>

  <p>A <dfn id=valid-hash-name-reference>valid hash-name reference</dfn> to an element of type <var title="">type</var> is a
  string consisting of a U+0023 NUMBER SIGN character (#) followed by a string which exactly matches
  the value of the <code title="">name</code> attribute of an element with type <var title="">type</var> in the document.</p>

  <div class=impl>

  <p>The <dfn id=rules-for-parsing-a-hash-name-reference>rules for parsing a hash-name reference</dfn> to an element of type <var title="">type</var> are as follows:</p>

  <ol><li><p>If the string being parsed does not contain a U+0023 NUMBER SIGN character, or if the
   first such character in the string is the last character in the string, then return null and
   abort these steps.</li>

   <li><p>Let <var title="">s</var> be the string from the character immediately after the first
   U+0023 NUMBER SIGN character in the string being parsed up to the end of that string.</li>

   <li><p>Return the first element of type <var title="">type</var> that has an <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute whose value is a <a href=#case-sensitive>case-sensitive</a> match for <var title="">s</var> or a <code title="">name</code> attribute whose value is a <a href=#compatibility-caseless>compatibility
   caseless</a> match for <var title="">s</var>.</li>

   <!--
   IE is also doing case-insensitive id="" matching.
   Tests:
   http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5%22%20src%3Dimage%3E
   ...except that doesn't explain why this fails:
   http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%26%23xFB01%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5F%26%23x0131%3B%26%23x0307%3B%22%20src%3Dimage%3E
   maybe they just don't know about combining dot above?
   -->

  </ol></div>


  <h4 id=mq><span class=secno>2.4.10 </span>Media queries</h4>

  <p>A string is a <dfn id=valid-media-query>valid media query</dfn> if it matches the <code title="">media_query_list</code> production of the Media Queries specification. <a href=#refsMQ>[MQ]</a></p>

  <p>A string <dfn id=matches-the-environment>matches the environment</dfn> of the user if it is the empty string, a string
  consisting of only <a href=#space-character title="space character">space characters</a>, or is a media query
  that matches the user's environment according to the definitions given in the Media Queries
  specification. <a href=#refsMQ>[MQ]</a></p>




  <h3 id=urls><span class=secno>2.5 </span>URLs</h3>

  <h4 id=terminology-0><span class=secno>2.5.1 </span>Terminology</h4>

  <p>A <a href=#url>URL</a> is a <dfn id=valid-url>valid URL</dfn> if it conforms to the authoring conformance
  requirements in the WHATWG URL standard. <a href=#refsURL>[URL]</a></p>

  <p>A string is a <dfn id=valid-non-empty-url>valid non-empty URL</dfn> if it is a <a href=#valid-url>valid URL</a> but it is not
  the empty string.</p>

  <p>A string is a <dfn id=valid-url-potentially-surrounded-by-spaces>valid URL potentially surrounded by spaces</dfn> if, after <a href=#strip-leading-and-trailing-whitespace title="strip leading and trailing whitespace">stripping leading and trailing whitespace</a>
  from it, it is a <a href=#valid-url>valid URL</a>.</p>

  <p>A string is a <dfn id=valid-non-empty-url-potentially-surrounded-by-spaces>valid non-empty URL potentially surrounded by spaces</dfn> if, after <a href=#strip-leading-and-trailing-whitespace title="strip leading and trailing whitespace">stripping leading and trailing whitespace</a>
  from it, it is a <a href=#valid-non-empty-url>valid non-empty URL</a>.</p>

  <p>This specification defines the URL <dfn id=about:legacy-compat><code>about:legacy-compat</code></dfn> as a reserved,
  though unresolvable, <code title="">about:</code> URL, for use in <a href=#syntax-doctype title=syntax-doctype>DOCTYPE</a>s in <a href=#html-documents>HTML documents</a> when needed for
  compatibility with XML tools. <a href=#refsABOUT>[ABOUT]</a></p>

  <p>This specification defines the URL <dfn id=about:srcdoc><code>about:srcdoc</code></dfn> as a reserved, though
  unresolvable, <code title="">about:</code> URL, that is used as <a href="#the-document's-address">the document's
  address</a> of <a href=#an-iframe-srcdoc-document title="an iframe srcdoc document"><code>iframe</code> <code title=attr-iframe-srcdoc>srcdoc</code> documents</a>. <a href=#refsABOUT>[ABOUT]</a></p>

  <p>The <dfn id=fallback-base-url>fallback base URL</dfn> of a <code><a href=#document>Document</a></code> object is the <a href=#absolute-url>absolute
  URL</a> obtained by running these substeps:</p>

  <ol><li><p>If the <code><a href=#document>Document</a></code> is <a href=#an-iframe-srcdoc-document>an <code>iframe</code> <code title=attr-iframe-srcdoc>srcdoc</code> document</a>, then return the <a href=#document-base-url>document base
   URL</a> of the <code><a href=#document>Document</a></code>'s <a href=#browsing-context>browsing context</a>'s <a href=#browsing-context-container>browsing context
   container</a>'s <code><a href=#document>Document</a></code> and abort these steps.</li>

   <li>

    <!-- http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/ -->

    <!-- this should be tested in the case of a browsing context that was navigated to about:blank
    after having been elsewhere, as opposed to the about:blank used at the time of the browsing
    context's creation. -->

    <p>If <a href="#the-document's-address">the document's address</a> is <code><a href=#about:blank>about:blank</a></code>, and the
    <code><a href=#document>Document</a></code>'s <a href=#browsing-context>browsing context</a> has a <a href=#creator-browsing-context>creator browsing
    context</a>, then return the <a href=#document-base-url>document base URL</a> of the <a href=#creator-document>creator
    <code>Document</code></a>, and abort these steps.</p>

   </li>

   <!-- http://www.hixie.ch/tests/adhoc/dom/level0/history/pushState/001/ -->

   <li><p>Return <a href="#the-document's-address">the document's address</a>.</li>

  </ol><p>The <dfn id=document-base-url>document base URL</dfn> of a <code><a href=#document>Document</a></code> object is the <a href=#absolute-url>absolute
  URL</a> obtained by running these substeps:</p>

  <ol><li><p>If there is no <code><a href=#the-base-element>base</a></code> element that has an <code title=attr-base-href><a href=#attr-base-href>href</a></code> attribute in the <code><a href=#document>Document</a></code>, then the
   <a href=#document-base-url>document base URL</a> is the <code><a href=#document>Document</a></code>'s <a href=#fallback-base-url>fallback base URL</a>;
   abort these steps.</li>

   <li><p>Otherwise, the <a href=#document-base-url>document base URL</a> is the <a href=#frozen-base-url>frozen base URL</a> of the
   first <code><a href=#the-base-element>base</a></code> element in the <code><a href=#document>Document</a></code> that has an <code title=attr-base-href><a href=#attr-base-href>href</a></code> attribute, in <a href=#tree-order>tree order</a>.</li>

  </ol><div class=impl>

  <h4 id=resolving-urls><span class=secno>2.5.2 </span>Resolving URLs</h4>

  <p>Resolving a URL is the process of taking a <a href=#relative-url>relative URL</a> and obtaining the
  <a href=#absolute-url>absolute URL</a> that it implies.</p>

  <p>To <dfn id=resolve-a-url>resolve a URL</dfn> to an <a href=#absolute-url>absolute URL</a> relative to either another
  <a href=#absolute-url>absolute URL</a> or an element, the user agent must use the following steps. Resolving a
  URL can result in an error, in which case the URL is not resolvable.</p>

  <ol><li><p>Let <var title="">url</var> be the <a href=#url>URL</a> being resolved.</li>

   <li>

    <p>Let <var title="">encoding</var> be determined as follows:</p>

    <dl class=switch><dt>If the URL had a character encoding defined when the URL was created or defined or when
     this algorithm was invoked</dt>

     <dd>The URL character encoding is as defined.</dd>


     <dt>If the URL came from a script (e.g. as an argument to a method)</dt>

     <dd>The URL character encoding is the <a href=#api-url-character-encoding>API URL character encoding</a> specified by the
     script's <a href=#settings-object>settings object</a>.</dd>


     <dt>If the URL came from a DOM node (e.g. from an element)</dt>

     <dd>The node has a <code><a href=#document>Document</a></code>, and the URL character encoding is the
     <a href="#document's-character-encoding">document's character encoding</a>.</dd>


    </dl></li>

   <li><p>If <var title="">encoding</var> is <a href=#a-utf-16-encoding>a UTF-16 encoding</a>, then change the value
   of <var title="">encoding</var> to UTF-8.</li>

   <li>

    <p>If the algorithm was invoked with an <a href=#absolute-url>absolute URL</a> to use as the base URL, let
    <var title="">base</var> be that <a href=#absolute-url>absolute URL</a>.</p>

    <p>Otherwise, let <var title="">base</var> be <a href="#the-element's-base-url">the element's base URL</a>.</p>

   </li>

   <li><p>Apply the <a href=#url-parser>URL parser</a> to <var title="">url</var>, with <var title="">base</var> as the base URL, with <var title="">encoding</var> as the encoding.</li>

   <li><p>If this returns failure, then abort these steps with an error.</li>

   <li><p>Let <var title="">parsed URL</var> be the result of the <a href=#url-parser>URL parser</a>.</li>

   <li><p>Let <var title="">serialised URL</var> be the result of apply the <a href=#concept-url-serializer title=concept-url-serializer>URL
   serializer</a> to <var title="">parsed URL</var>.</li>

   <li><p>Return <var title="">serialised URL</var> as the <dfn id=resulting-absolute-url>resulting absolute URL</dfn> and
   <var title="">parsed URL</var> as the <dfn id=resulting-parsed-url>resulting parsed URL</dfn>.</li>

  </ol><p>Given an element, <dfn id="the-element's-base-url">the element's base URL</dfn> is the <i>base URI of the element</i>, as
  defined by the XML Base specification, with <i>the base URI of the document entity</i> being
  defined as the <a href=#document-base-url>document base URL</a> of the <code><a href=#document>Document</a></code> that owns the element.
  <a href=#refsXMLBASE>[XMLBASE]</a></p>

  <p>For the purposes of the XML Base specification, user agents must act as if all
  <code><a href=#document>Document</a></code> objects represented XML documents.</p>

  <p class=note>It is possible for <code title=attr-xml-base><a href=#the-xml:base-attribute-(xml-only)>xml:base</a></code> attributes to be
  present even in HTML fragments, as such attributes can be added dynamically using script. (Such
  scripts would not be conforming, however, as <code title=attr-xml-base><a href=#the-xml:base-attribute-(xml-only)>xml:base</a></code>
  attributes are not allowed in <a href=#html-documents>HTML documents</a>.)</p>

  </div>



  <div class=impl>

  <h4 id=dynamic-changes-to-base-urls><span class=secno>2.5.3 </span>Dynamic changes to base URLs</h4>

  <p>When an <code title=attr-xml-base><a href=#the-xml:base-attribute-(xml-only)>xml:base</a></code> attribute is set, changed, or removed, the
  attribute's element, and all descendant elements, are <a href=#affected-by-a-base-url-change>affected by a base URL
  change</a>.</p>

  <p>When a document's <a href=#document-base-url>document base URL</a> changes, all elements in that document are
  <a href=#affected-by-a-base-url-change>affected by a base URL change</a>.</p>

  <p>The following are <a href=#base-url-change-steps>base URL change steps</a>, which run when an element is
  <a href=#affected-by-a-base-url-change>affected by a base URL change</a> (as defined by the DOM specification):</p>

  <dl class=switch><dt>If the element creates a <a href=#hyperlink>hyperlink</a></dt>

   <dd>

    <p>If the <a href=#absolute-url>absolute URL</a> identified by the hyperlink is being shown to the user, or
    if any data derived from that URL is affecting the display, then the <code title=attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code> attribute should be <a href=#resolve-a-url title="resolve a
    url">re-resolved</a> relative to the element and the UI updated appropriately.</p>

    <p class=example>For example, the CSS <code title=selector-link><a href=#selector-link>:link</a></code>/<code title=selector-visited><a href=#selector-visited>:visited</a></code> pseudo-classes might have been affected.</p>

    <p>If the hyperlink has a <code title=attr-hyperlink-ping><a href=#ping>ping</a></code> attribute and its <a href=#absolute-url title="absolute URL">absolute URL(s)</a> are being shown to the user, then the <code title=attr-hyperlink-ping><a href=#ping>ping</a></code> attribute's tokens should be <a href=#resolve-a-url title="resolve a
    url">re-resolved</a> relative to the element and the UI updated appropriately.</p>

   </dd>

   <dt>If the element is a <code><a href=#the-q-element>q</a></code>, <code><a href=#the-blockquote-element>blockquote</a></code>, <code><a href=#the-ins-element>ins</a></code>, or
   <code><a href=#the-del-element>del</a></code> element with a <code title="">cite</code> attribute</dt>

   <dd>

    <p>If the <a href=#absolute-url>absolute URL</a> identified by the <code title="">cite</code> attribute is
    being shown to the user, or if any data derived from that URL is affecting the display, then the
    <a href=#url>URL</a> should be <a href=#resolve-a-url title="resolve a url">re-resolved</a> relative to the
    element and the UI updated appropriately.</p>

   </dd>

   <dt>Otherwise</dt>

   <dd>

    <p>The element is not directly affected.</p>

    <p class=example>For instance, changing the base URL doesn't affect the image displayed by
    <code><a href=#the-img-element>img</a></code> elements, although subsequent accesses of the <code title=dom-img-src><a href=#dom-img-src>src</a></code> IDL attribute from script will return a new <a href=#absolute-url>absolute
    URL</a> that might no longer correspond to the image being shown.</p>

   </dd>

  </dl></div>


  <div class=impl>

  <h3 id=fetching-resources><span class=secno>2.6 </span>Fetching resources</h3>

  <h4 id=terminology-1><span class=secno>2.6.1 </span>Terminology</h4>

  <p id=concept-http-equivalent>User agents can implement a variety of transfer protocols, but
  this specification mostly defines behavior in terms of HTTP. <a href=#refsHTTP>[HTTP]</a></p>

  <p>The <dfn id=concept-http-equivalent-get title=concept-http-equivalent-get>HTTP GET method</dfn> is equivalent to the default
  retrieval action of the protocol. For example, RETR in FTP. Such actions are idempotent and safe,
  in HTTP terms.</p>

  <p>The <dfn id=concept-http-equivalent-codes title=concept-http-equivalent-codes>HTTP response codes</dfn> are equivalent to
  statuses in other protocols that have the same basic meanings. For example, a "file not found"
  error is equivalent to a 404 code, a server error is equivalent to a 5xx code, and so on.</p>

  <p>The <dfn id=concept-http-equivalent-headers title=concept-http-equivalent-headers>HTTP headers</dfn> are equivalent to fields in
  other protocols that have the same basic meaning. For example, the HTTP authentication headers are
  equivalent to the authentication aspects of the FTP protocol.</p>

  <p>A <dfn id=referrer-source>referrer source</dfn> is either a <code><a href=#document>Document</a></code> or a <a href=#url>URL</a>.</p>


  <h4 id=processing-model><span class=secno>2.6.2 </span>Processing model</h4>

  <p>When a user agent is to <dfn id=fetch>fetch</dfn><!--FETCH--> a resource or <a href=#url>URL</a>, optionally
  <strong>from</strong> an origin <i title="">origin</i>, optionally <strong>using</strong> a
  specific <a href=#referrer-source>referrer source</a> as an <i>override referrer source</i>, and optionally with
  any of a <i>synchronous flag</i>, a <i>manual redirect flag</i>, a <i>force same-origin flag</i>,
  and a <i>block cookies flag</i>, the following steps must be run. (When a <em><a href=#url>URL</a></em> is to be
  fetched, the URL identifies a resource to be obtained.)</p>

  <!-- if invoked with the synchronous flag, make sure to release the storage mutex first -->

  <!-- synchronous flag is only to be used in algorithms that are themselves asynchronous! Only
  sync-XHR is allowed to make the mistake of screwing that up. :-P -->

  <!-- the force same-origin flag is for use in places where we'll be moving to CORS one day; when
  used, the algorithm must be invoked with a URL (not something else, like a POST request) whose
  origin is the same as the /origin/, which must also be present, and the algorithm must not be
  invoked with the manual redirect flag. -->

  <!-- "block cookies" is currently only used by XHR -->

  <ol><li><p>If there is a specific <i>override referrer source</i>, and it is a <a href=#url>URL</a>, then
   let <var title="">referrer</var> be the <i>override referrer source</i>, and jump to the step
   labeled <i>clean referrer</i>.</li>

   <li>

    <p>Let <var title="">document</var> be the appropriate <code><a href=#document>Document</a></code> as given by the
    following list:</p>

    <dl class=switch><dt>If there is a specific <i>override referrer source</i></dt>

     <dd>The <i>override referrer source</i>.</dd>


     <dt>When <a href=#navigate title=navigate>navigating</a></dt>

     <dd>The <a href=#active-document>active document</a> of the <a href=#source-browsing-context>source browsing context</a>.</dd>


     <dt>When fetching resources for an element</dt>

     <dd>The element's <code><a href=#document>Document</a></code>.</dd>


    </dl></li>

   <li>

    <p>While <var title="">document</var> is <a href=#an-iframe-srcdoc-document>an <code>iframe</code> <code title=attr-iframe-srcdoc>srcdoc</code> document</a>, let <var title="">document</var> be
    <var title="">document</var>'s <a href=#browsing-context>browsing context</a>'s <a href=#browsing-context-container>browsing context
    container</a>'s <code><a href=#document>Document</a></code> instead.</p>

   </li>

   <li>

    <p>If the <a href=#origin>origin</a> of <var title="">Document</var> is not a scheme/host/port tuple,
    then set <var title="">referrer</var> to the empty string and jump to the step labeled <i>clean
    referrer</i>.</p>

   </li>

   <li>

    <p>Let <var title="">referrer</var> be <a href="#the-document's-address">the document's address</a> of <var title="">document</var>.</p>

   </li>

   <li>

    <p><i>Clean referrer</i>: Apply the <a href=#url-parser>URL parser</a> to <var title="">referrer</var> and let <var title="">parsed referrer</var> be the <a href=#resulting-parsed-url>resulting parsed URL</a>.</p>

   </li>

   <li>

    <p>Let <var title="">referrer</var> be the result of applying the <a href=#concept-url-serializer title=concept-url-serializer>URL serializer</a> to <var title="">parsed referrer</var>,
    with the <i>exclude fragment flag</i> set.</p> <!-- RFC2616 says "The URI MUST NOT include a
    fragment." (section 14.36) -->

   </li>

   <li>

    <p>If <var title="">referrer</var> is not the empty string, is not a <a href=#data-protocol title="data
    protocol"><code title="">data:</code> URL</a>, and is not the <a href=#url>URL</a>
    "<code><a href=#about:blank>about:blank</a></code>", then generate the <i>address of the resource from which Request-URIs
    are obtained</i> as required by HTTP for the <code title=http-referer>Referer</code> (sic)
    header from <var title="">referrer</var>. <a href=#refsHTTP>[HTTP]</a></p>

    <p>Otherwise, the <code title=http-referer>Referer</code> (sic) header must be omitted,
    regardless of its value.</p>

   </li>

   <li><p>If the algorithm was not invoked with the <i>synchronous flag</i>, perform the remaining
   steps asynchronously.</li>

   <li><p>If the <code><a href=#document>Document</a></code> with which any <a href=#concept-task title=concept-task>tasks</a> <a href=#queue-a-task title="queue a task">queued</a> by this algorithm would be associated doesn't have an
   associated <a href=#browsing-context>browsing context</a>, then abort these steps.</li>

<!--(redundant with 'at a time convenient...' below)
   <li><p>Optionally, wait until the <code>Document</code> with which any <span
   title="concept-task">tasks</span> <span title="queue a task">queued</span> by this algorithm
   would be associated is <span title="active document">active</span>.</p></li>
-->

   <li>

    <p>This is the <i>main step</i>.</p>

    <p>If the resource is to be obtained from an <a href=#application-cache>application cache</a>, then use the data
    from that <a href=#application-cache>application cache</a>, as if it had been obtained in the manner appropriate
    given its <a href=#url>URL</a>.</p>

    <p>If the resource is identified by an <a href=#absolute-url>absolute URL</a>, and the resource is to be
    obtained using an idempotent action (such as an HTTP GET <a href=#concept-http-equivalent-get title=concept-http-equivalent-get>or equivalent</a>), and it is already being downloaded
    for other reasons (e.g. another invocation of this algorithm), and this request would be
    identical to the previous one (e.g. same <code title=http-accept>Accept</code> and <code title=http-origin>Origin</code> headers), and the user agent is configured such that it is to
    reuse the data from the existing download instead of initiating a new one, then use the results
    of the existing download instead of starting a new one.</p>

    <p>Otherwise, if the resource is identified by an <a href=#absolute-url>absolute URL</a> with a scheme that
    does not define a mechanism to obtain the resource (e.g. it is a <code title="">mailto:</code>
    URL) or that the user agent does not support, then act as if the resource was an HTTP 204 No
    Content response with no other metadata.</p>

    <p>Otherwise, if the resource is identified by the <a href=#url>URL</a>
    <dfn id=about:blank><code>about:blank</code></dfn>, then the resource is immediately available and consists of
    the empty string, with no metadata.</p>

    <p>Otherwise, at a time convenient to the user and the user agent, download (or otherwise
    obtain) the resource, applying the semantics of the relevant specifications (e.g. performing an
    HTTP GET or POST operation, or reading the file from disk, or expanding <a href=#data-protocol title="data
    protocol"><code title="">data:</code> URLs</a>, etc).</p>

    <p>For the purposes of the <code title=http-referer>Referer</code> (sic) header, use the
    <i>address of the resource from which Request-URIs are obtained</i> generated in the earlier
    step.</p>

    <p>For the purposes of the <code title=http-origin>Origin</code> header, if the <a href=#fetch title=fetch>fetching algorithm</a> was explicitly initiated from an <i title="">origin</i>, then <i title="">the origin that initiated the HTTP request</i> is <i title="">origin</i>. Otherwise, this is <i title="">a request from a "privacy-sensitive"
    context</i>. <a href=#refsORIGIN>[ORIGIN]</a></p>

   </li>

   <li>

    <p>If the algorithm was not invoked with the <i>block cookies flag</i>, and there are cookies to
    be set, then the user agent must run the following substeps:</p>

    <ol><li><p>Wait until ownership of the <a href=#storage-mutex>storage mutex</a> can be taken by this instance of
     the <a href=#fetch title=fetch>fetching</a> algorithm.</li>

     <li><p>Take ownership of the <a href=#storage-mutex>storage mutex</a>.</li>

     <li><p>Update the cookies. <a href=#refsCOOKIES>[COOKIES]</a>
     <a href=#fingerprinting-vector class=fingerprint title="fingerprinting vector"><img src=http://images.whatwg.org/fingerprint.png width=46 alt="(This is a fingerprinting vector.)" height=64></a>
     </li>

     <li><p>Release the <a href=#storage-mutex>storage mutex</a> so that it is once again free.</li>

    </ol></li>

   <li>

    <p>If the fetched resource is an HTTP redirect <a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes>or
    equivalent</a>, then:</p>

    <dl class=switch><dt>If the <i>force same-origin flag</i> is set and the <a href=#url>URL</a> of the target of the
     redirect does not have the <a href=#same-origin>same origin</a> as the <a href=#url>URL</a> for which the
     <a href=#fetch>fetch</a> algorithm was invoked</dt>

     <dd>

      <p>Abort these steps and return failure from this algorithm, as if the remote host could not
      be contacted.</p>

     </dd>

     <dt>If the <i>manual redirect flag</i> is set</dt>

     <dd>

      <p>Continue, using the fetched resource (the redirect) as the result of the algorithm. If the
      calling algorithm subsequently requires the user agent to <dfn id=transparently-follow-the-redirect>transparently follow the
      redirect</dfn>, then the user agent must resume this algorithm from the <i>main step</i>, but
      using the target of the redirect as the resource to fetch, rather than the original
      resource.</p>

     </dd>

     <dt>Otherwise</dt>

     <dd>

      <p>First, apply any relevant requirements for redirects (such as showing any appropriate
      prompts). Then, redo <i>main step</i>, but using the target of the redirect as the resource to
      fetch, rather than the original resource. For HTTP requests, the new request must include the
      same headers as the original request, except for headers for which other requirements are
      specified (such as the <code title=http-host>Host</code> header). <a href=#refsHTTP>[HTTP]</a></p>

      <p class=note>The HTTP specification requires that 301, 302, and 307 redirects, when applied
      to methods other than the safe methods, not be followed without user confirmation. That would
      be an appropriate prompt for the purposes of the requirement in the paragraph above. <a href=#refsHTTP>[HTTP]</a></p>

     </dd>

    </dl></li>

   <li>

    <p>If the algorithm was not invoked with the <i>synchronous flag</i>: When the resource is
    available, or if there is an error of some description, <a href=#queue-a-task>queue a task</a> that uses the
    resource as appropriate. If the resource can be processed incrementally, as, for instance, with
    a progressively interlaced JPEG or an HTML file, additional tasks may be queued to process the
    data as it is downloaded. The <a href=#task-source>task source</a> for these <a href=#concept-task title=concept-task>tasks</a> is the <a href=#networking-task-source>networking task source</a>.</p>

    <p>Otherwise, return the resource or error information to the calling algorithm.</p>

   </li>

  </ol><p>If the user agent can determine the actual length of the resource being <a href=#fetch title=fetch>fetched</a> for an instance of this algorithm, and if that length is finite, then
  that length is the file's <dfn id=concept-fetch-total title=concept-fetch-total>size</dfn>. Otherwise, the subject of
  the algorithm (that is, the resource being fetched) has no known <a href=#concept-fetch-total title=concept-fetch-total>size</a>. (For example, the HTTP <code title=http-content-length>Content-Length</code> header might provide this information.)</p>

  <p>The user agent must also keep track of the <dfn id=concept-fetch-loaded title=concept-fetch-loaded>number of bytes
  downloaded</dfn> for each instance of this algorithm. This number must exclude any out-of-band
  metadata, such as HTTP headers.</p>

  <p class=note>The <a href=#application-cache>application cache</a> processing model introduces some <a href=#changesToNetworkingModel>changes to the networking model</a> to handle the returning of
  cached resources.</p>

  <p class=note>The <a href=#navigate title=navigate>navigation</a> processing model handles redirects
  itself, overriding the redirection handling that would be done by the fetching algorithm.</p>

  <p class=note>Whether the <a href=#content-type-sniffing>type sniffing rules</a> apply to the
  fetched resource depends on the algorithm that invokes the rules &mdash; they are not always
  applicable.</p>


<!--ADD-TOPIC:Security-->
  <h4 id=encrypted-http-and-related-security-concerns><span class=secno>2.6.3 </span>Encrypted HTTP and related security concerns</h4>

  <p>Anything in this specification that refers to HTTP also applies to HTTP-over-TLS, as
  represented by <a href=#url title=url>URLs</a> representing the <code title="">https</code> scheme.
  <a href=#refsHTTPS>[HTTPS]</a></p>

  <p class=warning>User agents should report certificate errors to the user and must either refuse
  to download resources sent with erroneous certificates or must act as if such resources were in
  fact served with no encryption.</p>

  <p>User agents should warn the user that there is a potential problem whenever the user visits a
  page that the user has previously visited, if the page uses less secure encryption on the second
  visit.</p>

  <p>Not doing so can result in users not noticing man-in-the-middle attacks.</p>

  <div class=example>

   <p>If a user connects to a server with a self-signed certificate, the user agent could allow the
   connection but just act as if there had been no encryption. If the user agent instead allowed the
   user to override the problem and then displayed the page as if it was fully and safely encrypted,
   the user could be easily tricked into accepting man-in-the-middle connections.</p>

   <p>If a user connects to a server with full encryption, but the page then refers to an external
   resource that has an expired certificate, then the user agent will act as if the resource was
   unavailable, possibly also reporting the problem to the user. If the user agent instead allowed
   the resource to be used, then an attacker could just look for "secure" sites that used resources
   from a different host and only apply man-in-the-middle attacks to that host, for example taking
   over scripts in the page.</p>

   <p>If a user bookmarks a site that uses a CA-signed certificate, and then later revisits that
   site directly but the site has started using a self-signed certificate, the user agent could warn
   the user that a man-in-the-middle attack is likely underway, instead of simply acting as if the
   page was not encrypted.</p>

  </div>
<!--REMOVE-TOPIC:Security-->


  <h4 id=content-type-sniffing><span class=secno>2.6.4 </span>Determining the type of a resource</h4>

  <p>The <dfn id=content-type title=Content-Type>Content-Type metadata</dfn> of a resource must be obtained and
  interpreted in a manner consistent with the requirements of the MIME Sniffing specification. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p>The <dfn id=content-type-sniffing-0 title="Content-Type sniffing">sniffed type of a resource</dfn> must be found in a
  manner consistent with the requirements given in the MIME Sniffing specification for finding the
  <i>sniffed media type</i> of the relevant sequence of octets. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p>The <dfn id=content-type-sniffing:-image title="Content-Type sniffing: image">rules for sniffing images specifically</dfn> and
  the <dfn id=content-type-sniffing:-text-or-binary title="Content-Type sniffing: text or binary">rules for distinguishing if a resource is
  text or binary</dfn> are also defined in the MIME Sniffing specification. Both sets of rules
  return a <a href=#mime-type>MIME type</a> as their result. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p class=warning>It is imperative that the rules in the MIME Sniffing specification be followed
  exactly. When a user agent uses different heuristics for content type detection than the server
  expects, security problems can occur. For more details, see the MIME Sniffing specification. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>


  <h4 id=extracting-character-encodings-from-meta-elements><span class=secno>2.6.5 </span>Extracting character encodings from <code><a href=#the-meta-element>meta</a></code> elements</h4>

  <p>The <dfn id=algorithm-for-extracting-a-character-encoding-from-a-meta-element>algorithm for extracting a character encoding from a <code>meta</code> element</dfn>,
  given a string <var title="">s</var>, is as follows. It either returns a character encoding or
  nothing.</p>

  <ol><!-- http://www.hixie.ch/tests/adhoc/html/parsing/encoding/all.html --><li><p>Let <var title="">position</var> be a pointer into <var title="">s</var>, initially
   pointing at the start of the string.</li>

   <li><p><i>Loop</i>: Find the first seven characters in <var title="">s</var> after <var title="">position</var> that are an <a href=#ascii-case-insensitive>ASCII case-insensitive</a> match for the word "<code title="">charset</code>". If no such match is found, return nothing and abort these
   steps.</li>

   <li><p>Skip any <a href=#space-character title="space character">space characters</a> that immediately follow the
   word "<code title="">charset</code>" (there might not be any).</li>

   <li><p>If the next character is not a U+003D EQUALS SIGN (=), then move <var title="">position</var> to point just before that next character, and jump back to the step
   labeled <i>loop</i>.</li>

   <li><p>Skip any <a href=#space-character title="space character">space characters</a> that immediately follow the
   equals sign (there might not be any).</li>

   <li>

    <p>Process the next character as follows:</p>

    <dl class=switch><dt>If it is a U+0022 QUOTATION MARK character (") and there is a later U+0022 QUOTATION MARK character (") in <var title="">s</var></dt>
     <dt>If it is a U+0027 APOSTROPHE character (') and there is a later U+0027 APOSTROPHE character (') in <var title="">s</var></dt>
     <dd>Return the result of <a href=#getting-an-encoding>getting an encoding</a> from the substring that is between
     this character and the next earliest occurrence of this character.</dd>

     <dt>If it is an unmatched U+0022 QUOTATION MARK character (")</dt>
     <dt>If it is an unmatched U+0027 APOSTROPHE character (')</dt>
     <dt>If there is no next character</dt>
     <dd>Return nothing.</dd>

     <dt>Otherwise</dt>
     <dd>Return the result of <a href=#getting-an-encoding>getting an encoding</a> from the substring that consists of
     this character up to but not including the first <a href=#space-character>space character</a> or U+003B
     SEMICOLON character (;), or the end of <var title="">s</var>, whichever comes first.</dd>

    </dl></li>

  </ol><p class=note>This algorithm is distinct from those in the HTTP specification (for example, HTTP
  doesn't allow the use of single quotes and requires supporting a backslash-escape mechanism that
  is not supported by this algorithm<!-- not to mention not having any rules for error-handling,
  which is of course why we're having to define it ourselves -->). While the algorithm is used in
  contexts that, historically, were related to HTTP, the syntax as supported by implementations
  diverged some time ago. <a href=#refsHTTP>[HTTP]</a></p>

  </div>


  <h4 id=cors-settings-attributes><span class=secno>2.6.6 </span>CORS settings attributes</h4>

  <p>A <dfn id=cors-settings-attribute>CORS settings attribute</dfn> is an <a href=#enumerated-attribute>enumerated attribute</a>. The following
  table lists the keywords and states for the attribute &mdash; the keywords in the left column map
  to the states in the cell in the second column on the same row as the keyword.</p>

  <table><thead><tr><th> Keyword
     <th> State
     <th> Brief description
   <tbody><tr><td><dfn id=attr-crossorigin-anonymous-keyword title=attr-crossorigin-anonymous-keyword><code>anonymous</code></dfn>
     <td><dfn id=attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</dfn>
     <td>Cross-origin CORS requests for the element will have the <i><a href=#omit-credentials-flag>omit credentials flag</a></i> set.
    <tr><td><dfn id=attr-crossorigin-use-credentials-keyword title=attr-crossorigin-use-credentials-keyword><code>use-credentials</code></dfn>
     <td><dfn id=attr-crossorigin-use-credentials title=attr-crossorigin-use-credentials>Use Credentials</dfn>
     <td>Cross-origin CORS requests for the element will not have the <i><a href=#omit-credentials-flag>omit credentials flag</a></i> set.
  </table><p>The empty string is also a valid keyword, and maps to the <a href=#attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</a> state. The attribute's <i>invalid value
  default</i> is the <a href=#attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</a> state. For the
  purposes of <a href=#reflect title=reflect>reflection</a>, the canonical case for the <a href=#attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</a> state is the <code title=attr-crossorigin-anonymous-keyword><a href=#attr-crossorigin-anonymous-keyword>anonymous</a></code> keyword. The <i>missing value
  default</i>, used when the attribute is omitted, is the <dfn id=attr-crossorigin-none title=attr-crossorigin-none>No
  CORS</dfn> state.</p>


  <div class=impl>
  <h4 id=cors-enabled-fetch><span class=secno>2.6.7 </span>CORS-enabled fetch</h4>

  <p>When the user agent is required to perform a <dfn id=potentially-cors-enabled-fetch>potentially CORS-enabled fetch</dfn> of an
  <a href=#absolute-url>absolute URL</a> <var title="">URL</var> with a mode <var title="">mode</var> that is
  either "<a href=#attr-crossorigin-none title=attr-crossorigin-none>No CORS</a>", "<a href=#attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</a>", or "<a href=#attr-crossorigin-use-credentials title=attr-crossorigin-use-credentials>Use Credentials</a>", optionally using a
  <a href=#referrer-source>referrer source</a> <var title="">referrer source</var>, with an <a href=#origin>origin</a>
  <var title="">origin</var>, and with a default origin behaviour <var title="">default</var>
  which is either "<i>taint</i>" or "<i>fail</i>", it must run the first applicable set of steps
  from the following list. The default origin behaviour is only used if <var title="">mode</var> is
  "<a href=#attr-crossorigin-none title=attr-crossorigin-none>No CORS</a>". This algorithm wraps the <a href=#fetch>fetch</a>
  algorithm above, and labels the obtained resource as either <dfn id=cors-same-origin>CORS-same-origin</dfn> or
  <dfn id=cors-cross-origin>CORS-cross-origin</dfn>, or blocks the resource entirely.</p>

  <dl class=switch><dt>If the <var title="">URL</var> has the <a href=#same-origin>same origin</a> as <var title="">origin</var></dt>
   <dt>If the <var title="">URL</var> is a <a href=#data-protocol title="data protocol"><code title="">data:</code> URL</a></dt>
   <dt>If the <var title="">URL</var> is <code><a href=#about:blank>about:blank</a></code></dt>

   <dd>

    <p>Run these substeps:</p>

    <ol><li><p><a href=#fetch>Fetch</a><!--FETCH--> <var title="">URL</var>, using <var title="">referrer
     source</var> if one was specified, with the <i>manual redirect flag</i> set.</li> <!--
     http-origin privacy sensitive -->

     <li><p><i>Loop</i>: Wait for the <a href=#fetch>fetch</a> algorithm to know if the result is a
     redirect or not.</li>

     <li>

      <p>Follow the first appropriate steps from the following list:</p>

      <dl class=switch><dt>If the result of the <a href=#fetch>fetch</a> is a redirect, and the <a href=#origin>origin</a> of the
       target URL of the redirect is not the <a href=#same-origin>same origin</a> as <var title="">origin</var></dt>

       <dd>

        <p>Set <var title="">URL</var> to the target URL of the redirect and return to the top of
        the <a href=#potentially-cors-enabled-fetch>potentially CORS-enabled fetch</a> algorithm (this time, one of the other
        branches below might be taken, based on the value of <var title="">mode</var><!-- but if
        it's a data: URL, we'll stay here -->).</p>

       </dd>

       <dt>If the result of the <a href=#fetch>fetch</a> is a redirect</dt>

       <dd>

        <p class=note>The <a href=#origin>origin</a> of the target URL of the redirect is the <a href=#same-origin>same
        origin</a> as <var title="">origin</var>.</p>

        <p><a href=#transparently-follow-the-redirect>Transparently follow the redirect</a> and jump to the step labeled <i>loop</i>
        above.</p>

       </dd>

       <dt>Otherwise</dt>

       <dd>

        <p class=note>The resource is available, it is not a redirect, and its <a href=#origin>origin</a>
        is the <a href=#same-origin>same origin</a> as <var title="">origin</var>.</p>

        <p>The <a href=#concept-task title=concept-task>tasks</a> from the <a href=#fetch>fetch</a> algorithm are
        <a href=#queue-a-task title="queue a task">queued</a> normally, and for the purposes of the calling
        algorithm, the obtained resource is <a href=#cors-same-origin>CORS-same-origin</a>.</p>

       </dd>

      </dl></li>

    </ol></dd>


   <dt>If <var title="">mode</var> is "<a href=#attr-crossorigin-none title=attr-crossorigin-none>No CORS</a>" and
   <var title="">default</var> is <i>taint</i></dt>

   <dd>

    <p class=note>The <var title="">URL</var> does not have the <a href=#same-origin>same origin</a> as <var title="">origin</var>.</p>

    <p><a href=#fetch>Fetch</a><!--FETCH--> <var title="">URL</var>, using <var title="">referrer
    source</var> if one was specified.</p> <!-- http-origin privacy sensitive -->

    <p>The <a href=#concept-task title=concept-task>tasks</a> from the <a href=#fetch>fetch</a> algorithm are <a href=#queue-a-task title="queue a task">queued</a> normally, but for the purposes of the calling algorithm, the
    obtained resource is <a href=#cors-cross-origin>CORS-cross-origin</a>. The user agent may report a cross-origin
    resource access failure to the user (e.g. in a debugging console).</p>

   </dd>


   <dt>If <var title="">mode</var> is "<a href=#attr-crossorigin-none title=attr-crossorigin-none>No CORS</a>"</dt>

   <dd>

    <p class=note>The <var title="">URL</var> does not have the <a href=#same-origin>same origin</a> as <var title="">origin</var>, and <var title="">default</var> is <i>fail</i>.</p>

    <p>Discard any data fetched as part of this algorithm, and prevent any <a href=#concept-task title=concept-task>tasks</a> from such invocations of the <a href=#fetch>fetch</a> algorithm
    from being <a href=#queue-a-task title="queue a task">queued</a>.

    For the purposes of the calling algorithm, the user agent must act as if there was a fatal
    network error and no resource was obtained. The user agent may report a cross-origin resource
    access failure to the user (e.g. in a debugging console).</p>

   </dd>


   <dt>If <var title="">mode</var> is "<a href=#attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</a>"
   or "<a href=#attr-crossorigin-use-credentials title=attr-crossorigin-use-credentials>Use Credentials</a>"</dt>

   <dd>

    <p class=note>The <var title="">URL</var> does not have the <a href=#same-origin>same origin</a> as <var title="">origin</var>.</p>

    <p>Run these steps:</p>

    <ol><li><p>Perform a <a href=#cross-origin-request>cross-origin request</a><!--FETCH--> with the <i>request URL</i> set
     to <var title="">URL</var>, with the CORS <i title="">referrer source</i> set to <var title="">referrer source</var> if one was specified, the <i>source origin</i> set to <var title="">origin</var>, and with the <i><a href=#omit-credentials-flag>omit credentials flag</a></i> set if <var title="">mode</var> is "<a href=#attr-crossorigin-anonymous title=attr-crossorigin-anonymous>Anonymous</a>" and not
     set otherwise. <a href=#refsFETCH>[FETCH]</a></li>

     <li><p>Wait for the CORS <a href=#cross-origin-request-status>cross-origin request status</a> to have a value.</li>

     <li>

      <p>Jump to the appropriate step from the following list:</p>

      <dl class=switch><dt>If the CORS <a href=#cross-origin-request-status>cross-origin request status</a> is not <i>success</i></dt>

       <dd>

        <p>Discard all fetched data and prevent any <a href=#concept-task title=concept-task>tasks</a> from
        the <a href=#fetch>fetch</a> algorithm from being <a href=#queue-a-task title="queue a task">queued</a>. For
        the purposes of the calling algorithm, the user agent must act as if there was a fatal
        network error and no resource was obtained. If a CORS <a href=#resource-sharing-check>resource sharing check</a>
        failed, the user agent may report a cross-origin resource access failure to the user (e.g.
        in a debugging console).</p>

       </dd>

       <dt>If the CORS <a href=#cross-origin-request-status>cross-origin request status</a> is <i>success</i></dt>

       <dd>

        <p>The <a href=#concept-task title=concept-task>tasks</a> from the <a href=#fetch>fetch</a> algorithm are
        <a href=#queue-a-task title="queue a task">queued</a> normally, and for the purposes of the calling
        algorithm, the obtained resource is <a href=#cors-same-origin>CORS-same-origin</a>.</p>

       </dd>

      </dl></li>

    </ol></dd>

  </dl></div>



  <h3 id=common-dom-interfaces><span class=secno>2.7 </span>Common DOM interfaces</h3>

  <h4 id=reflecting-content-attributes-in-idl-attributes><span class=secno>2.7.1 </span>Reflecting content attributes in IDL attributes</h4>

  <p>Some IDL attributes are defined to <dfn id=reflect>reflect</dfn> a particular content attribute. This
  means that on getting, the IDL attribute returns the current value of the content attribute, and
  on setting, the IDL attribute changes the value of the content attribute to the given value.</p>

<!-- v2 for completeness: (also search for REFLECTIDL)
  <p class="note">A list of <span>reflecting IDL attributes</span> and
  their corresponding content attributes is given in the index.</p>
-->

  <div class=impl>

  <p>In general, on getting, if the content attribute is not present, the IDL attribute must act as
  if the content attribute's value is the empty string; and on setting, if the content attribute is
  not present, it must first be added.</p>

  <p>If a reflecting IDL attribute is a <code>DOMString</code> attribute whose content attribute is
  defined to contain a <a href=#url>URL</a>, then on getting, the IDL attribute must <a href=#resolve-a-url title="resolve a url">resolve</a> the value of the content attribute relative to the element
  and return the resulting <a href=#absolute-url>absolute URL</a> if that was successful, or the empty string
  otherwise; and on setting, must set the content attribute to the specified literal value. If the
  content attribute is absent, the IDL attribute must return the default value, if the content
  attribute has one, or else the empty string.</p>

  <p>If a reflecting IDL attribute is a <code>DOMString</code> attribute whose content attribute is
  defined to contain one or more <a href=#url title=URL>URLs</a>, then on getting, the IDL attribute
  must <a href=#split-a-string-on-spaces title="split a string on spaces">split the content attribute on spaces</a> and
  return the concatenation of <a href=#resolve-a-url title="resolve a URL">resolving</a> each token URL to an
  <a href=#absolute-url>absolute URL</a> relative to the element, with a single U+0020 SPACE character between
  each URL, ignoring any tokens that did not resolve successfully. If the content attribute is
  absent, the IDL attribute must return the default value, if the content attribute has one, or else
  the empty string. On setting, the IDL attribute must set the content attribute to the specified
  literal value.</p>

  <p>If a reflecting IDL attribute is a <code>DOMString</code> attribute whose content attribute is
  an <a href=#enumerated-attribute>enumerated attribute</a>, and the IDL attribute is <dfn id=limited-to-only-known-values>limited to only known
  values</dfn>, then, on getting, the IDL attribute must return the conforming value associated with
  the state the attribute is in (in its canonical case), if any, or the empty string if the
  attribute is in a state that has no associated keyword value or if the attribute is not in a defined state
  (e.g. the attribute is missing and there is no <i>missing value default</i>); and on setting, the
  content attribute must be set to the specified new value.</p>

  <p>If a reflecting IDL attribute is a <code>DOMString</code> attribute but doesn't fall into any
  of the above categories, then the getting and setting must be done in a transparent,
  case-preserving manner.</p>

  <p>If a reflecting IDL attribute is a <code title="">boolean</code> attribute, then on getting the
  IDL attribute must return true if the content attribute is set, and false if it is absent. On
  setting, the content attribute must be removed if the IDL attribute is set to false, and must be
  set to the empty string if the IDL attribute is set to true. (This corresponds to the rules for
  <a href=#boolean-attribute title="boolean attribute">boolean content attributes</a>.)</p>

  <p>If a reflecting IDL attribute has a signed integer type (<code>long</code>) then, on getting,
  the content attribute must be parsed according to the <a href=#rules-for-parsing-integers title="rules for parsing
  integers">rules for parsing signed integers</a>, and if that is successful, and the value is in
  the range of the IDL attribute's type, the resulting value must be returned. If, on the other
  hand, it fails or returns an out of range value, or if the attribute is absent, then the default
  value must be returned instead, or 0 if there is no default value. On setting, the given value
  must be converted to the shortest possible string representing the number as a <a href=#valid-integer>valid
  integer</a> and then that string must be used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has a signed integer type (<code>long</code>) that is
  <dfn id=limited-to-only-non-negative-numbers>limited to only non-negative numbers</dfn> then, on getting, the content attribute must be
  parsed according to the <a href=#rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a>, and if that is
  successful, and the value is in the range of the IDL attribute's type, the resulting value must be
  returned. If, on the other hand, it fails or returns an out of range value, or if the attribute is
  absent, the default value must be returned instead, or &minus;1 if there is no default value. On
  setting, if the value is negative, the user agent must throw an <code><a href=#indexsizeerror>IndexSizeError</a></code>
  exception. Otherwise, the given value must be converted to the shortest possible string
  representing the number as a <a href=#valid-non-negative-integer>valid non-negative integer</a> and then that string must be
  used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has an <em>unsigned</em> integer type (<code>unsigned
  long</code>) then, on getting, the content attribute must be parsed according to the <a href=#rules-for-parsing-non-negative-integers>rules
  for parsing non-negative integers</a>, and if that is successful, and the value is in the range
  0 to 2147483647 inclusive, the resulting value must be returned. If, on the other hand, it fails
  or returns an out of range value, or if the attribute is absent, the default value must be
  returned instead, or 0 if there is no default value. On setting, first, if the new value is in the
  range 0 to 2147483647, then let <var title="">n</var> be the new value, otherwise let <var title="">n</var> be the default value, or 0 if there is no default value; then, <var title="">n</var> must be converted to the shortest possible string representing the number as a
  <a href=#valid-non-negative-integer>valid non-negative integer</a> and that string must be used as the new content attribute
  value.</p>
  <!-- see http://www.w3.org/Bugs/Public/show_bug.cgi?id=10352
  https://bugzilla.mozilla.org/show_bug.cgi?id=586118 and
  https://www.w3.org/Bugs/Public/show_bug.cgi?id=17705 for why the
  range is clamped to 2147483647 rather the normal unsigned long
  maximum value of 4294967295 -->

  <p>If a reflecting IDL attribute has an unsigned integer type (<code>unsigned long</code>) that is
  <dfn id=limited-to-only-non-negative-numbers-greater-than-zero>limited to only non-negative numbers greater than zero</dfn>, then the behavior is similar to
  the previous case, but zero is not allowed. On getting, the content attribute must first be parsed
  according to the <a href=#rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a>, and if that is successful,
  and the value is in the range 1 to 2147483647 inclusive, the resulting value must be returned. If,
  on the other hand, it fails or returns an out of range value, or if the attribute is absent, the
  default value must be returned instead, or 1 if there is no default value. On setting, if the
  value is zero, the user agent must throw an <code><a href=#indexsizeerror>IndexSizeError</a></code> exception. Otherwise,
  first, if the new value is in the range 1 to 2147483647, then let <var title="">n</var> be the new
  value, otherwise let <var title="">n</var> be the default value, or 1 if there is no default
  value; then, <var title="">n</var> must be converted to the shortest possible string representing
  the number as a <a href=#valid-non-negative-integer>valid non-negative integer</a> and that string must be used as the new
  content attribute value.</p>
  <!-- see previous paragraph for note about the weird range -->

  <p>If a reflecting IDL attribute has a floating-point number type (<code>double</code> or
  <code>unrestricted double</code>), then, on getting, the content attribute must be parsed
  according to the <a href=#rules-for-parsing-floating-point-number-values>rules for parsing floating-point number values</a>, and if that is
  successful, the resulting value must be returned. If, on the other hand, it fails, or if the
  attribute is absent, the default value must be returned instead, or 0.0 if there is no default
  value. On setting, the given value must be converted to the <a href=#best-representation-of-the-number-as-a-floating-point-number>best representation of the
  number as a floating-point number</a> and then that string must be used as the new content
  attribute value.</p>

  <p>If a reflecting IDL attribute has a floating-point number type (<code>double</code> or
  <code>unrestricted double</code>) that is <dfn id=limited-to-numbers-greater-than-zero>limited to numbers greater than zero</dfn>, then
  the behavior is similar to the previous case, but zero and negative values are not allowed. On
  getting, the content attribute must be parsed according to the <a href=#rules-for-parsing-floating-point-number-values>rules for parsing
  floating-point number values</a>, and if that is successful and the value is greater than 0.0,
  the resulting value must be returned. If, on the other hand, it fails or returns an out of range
  value, or if the attribute is absent, the default value must be returned instead, or 0.0 if there
  is no default value. On setting, if the value is less than or equal to zero, then the value must
  be ignored. Otherwise, the given value must be converted to the <a href=#best-representation-of-the-number-as-a-floating-point-number>best representation of the
  number as a floating-point number</a> and then that string must be used as the new content
  attribute value.</p>

  <p class=note>The values Infinity and Not-a-Number (NaN) values throw an exception on setting,
  as defined in the Web IDL specification. <a href=#refsWEBIDL>[WEBIDL]</a></p>

  <p>If a reflecting IDL attribute has the type <code><a href=#domtokenlist>DOMTokenList</a></code> or
  <code><a href=#domsettabletokenlist>DOMSettableTokenList</a></code>, then on getting it must return a <code><a href=#domtokenlist>DOMTokenList</a></code> or
  <code><a href=#domsettabletokenlist>DOMSettableTokenList</a></code> object (as appropriate) whose associated element is the element
  in question and whose associated attribute's local name is the name of the attribute in question.
  The same <code><a href=#domtokenlist>DOMTokenList</a></code> or <code><a href=#domsettabletokenlist>DOMSettableTokenList</a></code> object must be returned
  every time for each attribute.</p>

  <p>If a reflecting IDL attribute has the type <code><a href=#htmlelement>HTMLElement</a></code>, or an interface that
  descends from <code><a href=#htmlelement>HTMLElement</a></code>, then, on getting, it must run the following algorithm
  (stopping at the first point where a value is returned):</p>

  <ol><li>If the corresponding content attribute is absent, then the IDL attribute must return
   null.</li>

   <li>Let <var title="">candidate</var> be the element that the <code title=dom-Document-getElementById><a href=#dom-document-getelementbyid>document.getElementById()</a></code> method would find when
   called on the content attribute's document if it were passed as its argument the current value of
   the corresponding content attribute.</li>

   <li>If <var title="">candidate</var> is null, or if it is not type-compatible with the IDL
   attribute, then the IDL attribute must return null.</li>

   <li>Otherwise, it must return <var title="">candidate</var>.</li>

  </ol><p>On setting, if the given element has an <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute, and has the
  same <a href=#home-subtree>home subtree</a> as the element of the attribute being set, and the given element is
  the first element in that <a href=#home-subtree>home subtree</a> whose <a href=#concept-id title=concept-ID>ID</a> is
  the value of that <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute, then the content attribute must be
  set to the value of that <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute. Otherwise, the content
  attribute must be set to the empty string.</p>

  </div>


<!--TOPIC:DOM APIs-->
  <h4 id=collections-0><span class=secno>2.7.2 </span>Collections</h4>

  <p>The <code><a href=#htmlallcollection>HTMLAllCollection</a></code>, <code><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code>,
  <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code>, and <code><a href=#htmlpropertiescollection>HTMLPropertiesCollection</a></code> interfaces are
  <a href=#collections>collections</a> derived from the <code><a href=#htmlcollection>HTMLCollection</a></code> interface.</p>


  <h5 id=htmlallcollection-0><span class=secno>2.7.2.1 </span>HTMLAllCollection</h5>

  <p>The <code><a href=#htmlallcollection>HTMLAllCollection</a></code> interface is used for generic <a href=#collections>collections</a> of
  elements just like <code><a href=#htmlcollection>HTMLCollection</a></code>, with the exception that its <code title=dom-HTMLAllCollection-namedItem><a href=#dom-htmlallcollection-nameditem>namedItem()</a></code> method returns an
  <code><a href=#htmlcollection>HTMLCollection</a></code> object when there are multiple matching elements, and that its <code title=dom-HTMLAllCollection-item>item()</code> method can be used as a synonym for its <code title=dom-HTMLAllCollection-namedItem><a href=#dom-htmlallcollection-nameditem>namedItem()</a></code> method. It is intended only for the
  legacy <code title=dom-document-all><a href=#dom-document-all>document.all</a></code> attribute.</p>

  <pre class=idl>interface <dfn id=htmlallcollection>HTMLAllCollection</dfn> : <a href=#htmlcollection>HTMLCollection</a> {
  // inherits <span title=dom-HTMLCollection-length>length</span> and <a href=#dom-htmlcollection-item title=dom-HTMLCollection-item>item</a>(unsigned long index)
  (<a href=#htmlcollection>HTMLCollection</a> or <a href=#element>Element</a>)? <a href=#dom-htmlallcollection-item-string title=dom-HTMLAllCollection-item-string>item</a>(DOMString name);
  legacycaller getter (<a href=#htmlcollection>HTMLCollection</a> or <a href=#element>Element</a>)? <a href=#dom-htmlallcollection-nameditem title=dom-HTMLAllCollection-namedItem>namedItem</a>(DOMString name); // shadows inherited namedItem()
};</pre>

  <dl class=domintro><dt><var title="">collection</var> . <code title=dom-HTMLCollection-length>length</code></dt>
   <dd>
    <p>Returns the number of elements in the collection.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLCollection-item><a href=#dom-htmlcollection-item>item</a></code>(<var title="">index</var>)</dt>
   <dt><var title="">collection</var>[<var title="">index</var>]</dt>
   <dd>
    <p>Returns the item with index <var title="">index</var> from the collection. The items are sorted in <a href=#tree-order>tree order</a>.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLAllCollection-item-string><a href=#dom-htmlallcollection-item-string>item</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">collection</var> = <var title="">collection</var> . <code title=dom-HTMLAllCollection-item-string><a href=#dom-htmlallcollection-item-string>item</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLAllCollection-namedItem><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">collection</var> = <var title="">collection</var> . <code title=dom-HTMLAllCollection-namedItem><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">element</var> = <var title="">collection</var>(<var title="">name</var>)</dt>
   <dt><var title="">collection</var> = <var title="">collection</var>(<var title="">name</var>)</dt>
   <dt><var title="">collection</var>[<var title="">name</var>]</dt>
   <dd>
    <p>Returns the item with <a href=#concept-id title=concept-id>ID</a> or name <var title="">name</var> from the collection.</p>
    <p>If there are multiple matching items, then an <code><a href=#htmlcollection>HTMLCollection</a></code> object containing all those elements is returned.</p>
    <!-- this list only includes conforming elements: -->
    <p>Only <code><a href=#the-button-element>button</a></code>, <code><a href=#the-form-element>form</a></code>, <code><a href=#the-iframe-element>iframe</a></code>,
    <code><a href=#the-input-element>input</a></code>, <code><a href=#the-map-element>map</a></code>, <code><a href=#the-meta-element>meta</a></code>, <code><a href=#the-object-element>object</a></code>,
    <code><a href=#the-select-element>select</a></code>, and <code><a href=#the-textarea-element>textarea</a></code> elements can have a name for the purpose of this
    method; their name is given by the value of their <code title="">name</code> attribute.</p>
   </dd>

  </dl><div class=impl>

  <p>The object's <a href=#supported-property-indices>supported property indices</a> are as defined for
  <code><a href=#htmlcollection>HTMLCollection</a></code> objects.</p>

  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?saved=2837 -->
  <p>The following elements are <dfn id=all-named-elements>"all"-named elements</dfn>:
   <code><a href=#the-a-element>a</a></code>, <!-- in some browsers -->
   <code><a href=#the-applet-element>applet</a></code>,
   <code><a href=#the-button-element>button</a></code>, <!-- in some browsers -->
   <code><a href=#the-embed-element>embed</a></code>,
   <code><a href=#the-form-element>form</a></code>,
   <code><a href=#frame>frame</a></code>,
   <code><a href=#frameset>frameset</a></code>,
   <code><a href=#the-iframe-element>iframe</a></code>, <!-- in some browsers -->
   <code><a href=#the-img-element>img</a></code>,
   <code><a href=#the-input-element>input</a></code>,
   <!-- keygen? -->
   <code><a href=#the-map-element>map</a></code>, <!-- in some browsers -->
   <code><a href=#the-meta-element>meta</a></code>, <!-- in some browsers -->
   <code><a href=#the-object-element>object</a></code>,
   <code><a href=#the-select-element>select</a></code>, and
   <code><a href=#the-textarea-element>textarea</a></code> <!-- in some browsers -->
  </p>

  <p>The <a href=#supported-property-names>supported property names</a> consist of the non-empty values of all the <code title=attr-id><a href=#the-id-attribute>id</a></code> attributes of all the elements <a href=#represented-by-the-collection>represented by the
  collection</a>, and the non-empty values of all the <code title="">name</code> attributes of
  all the <a href=#all-named-elements>"all"-named elements</a> <a href=#represented-by-the-collection>represented by the collection</a>, in
  <a href=#tree-order>tree order</a>, ignoring later duplicates, with the <code title=attr-id><a href=#the-id-attribute>id</a></code> of
  an element preceding its <code title="">name</code> if it contributes both, they differ from each
  other, and neither is the duplicate of an earlier entry.</p>

  <p>The properties exposed in this way must be <a href=#unenumerable>unenumerable</a>.</p>

  <p>The <dfn id=dom-htmlallcollection-item-string title=dom-HTMLAllCollection-item-string><code>item(<var title="">name</var>)</code></dfn> and <dfn id=dom-htmlallcollection-nameditem title=dom-HTMLAllCollection-namedItem><code>namedItem(<var title="">name</var>)</code></dfn>
  methods must act according to the following algorithm:</p>

  <ol><li>If <var title="">name</var> is the empty string, return null and stop the algorithm.</li>

   <li>

    <p>Let <var title="">collection</var> be an <code><a href=#htmlcollection>HTMLCollection</a></code> object rooted at the
    same node as the <code><a href=#htmlallcollection>HTMLAllCollection</a></code> object on which the method was invoked, whose
    filter matches only elements that already match the filter of the <code><a href=#htmlallcollection>HTMLAllCollection</a></code>
    object on which the method was invoked and that are either:</p>

    <ul><li><a href=#all-named-elements>"all"-named elements</a> with a <code title="">name</code> attribute
     equal to <var title="">name</var>, or,</li>

     <li>elements with an <a href=#concept-id title=concept-id>ID</a> equal to <var title="">name</var>.</li>

    </ul></li>

   <li>If, at the time the method is called, there is exactly one node in <var title="">collection</var>, then return that node and stop the algorithm.</li>

   <li>Otherwise, if, at the time the method is called, <var title="">collection</var> is empty,
   return null and stop the algorithm.</li>

   <li>Otherwise, return <var title="">collection</var>.</li>

  </ol></div>


  <h5 id=htmlformcontrolscollection-0><span class=secno>2.7.2.2 </span>HTMLFormControlsCollection</h5>

  <p>The <code><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> interface is used for <a href=#collections>collections</a> of
  <a href=#category-listed title=category-listed>listed elements</a> in <code><a href=#the-form-element>form</a></code> and
  <code><a href=#the-fieldset-element>fieldset</a></code> elements.</p>

  <pre class=idl>interface <dfn id=htmlformcontrolscollection>HTMLFormControlsCollection</dfn> : <a href=#htmlcollection>HTMLCollection</a> {
  // inherits <span title=dom-HTMLCollection-length>length</span> and <a href=#dom-htmlcollection-item title=dom-HTMLCollection-item>item</a>()
  legacycaller getter (<a href=#radionodelist>RadioNodeList</a> or <a href=#element>Element</a>)? <a href=#dom-htmlformcontrolscollection-nameditem title=dom-HTMLFormControlsCollection-namedItem>namedItem</a>(DOMString name); // shadows inherited namedItem()
};

interface <dfn id=radionodelist>RadioNodeList</dfn> : <a href=#nodelist>NodeList</a> {
          attribute DOMString <a href=#dom-radionodelist-value title=dom-RadioNodeList-value>value</a>;
};</pre>

  <dl class=domintro><dt><var title="">collection</var> . <code title=dom-HTMLCollection-length>length</code></dt>
   <dd>
    <p>Returns the number of elements in the collection.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLCollection-item><a href=#dom-htmlcollection-item>item</a></code>(<var title="">index</var>)</dt>
   <dt><var title="">collection</var>[<var title="">index</var>]</dt>
   <dd>
    <p>Returns the item with index <var title="">index</var> from the collection. The items are sorted in <a href=#tree-order>tree order</a>.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLFormControlsCollection-namedItem><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">radioNodeList</var> = <var title="">collection</var> . <code title=dom-HTMLFormControlsCollection-namedItem><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">collection</var>[<var title="">name</var>]</dt>
   <dt><var title="">collection</var>(<var title="">name</var>)</dt>
   <dd>
    <p>Returns the item with <a href=#concept-id title=concept-id>ID</a> or <code title=attr-fe-name><a href=#attr-fe-name>name</a></code> <var title="">name</var> from the collection.</p>
    <p>If there are multiple matching items, then a <code><a href=#radionodelist>RadioNodeList</a></code> object containing all those elements is returned.</p>
   </dd>

   <dt><var title="">radioNodeList</var> . <var title="">value</var> [ = <var title="">value</var> ]</dt>
   <dd>
    <p>Returns the value of the first checked radio button represented by the object.</p>
    <p>Can be set, to check the first radio button with the given value represented by the object.</p>
   </dd>

  </dl><div class=impl>

  <p>The object's <a href=#supported-property-indices>supported property indices</a> are as defined for
  <code><a href=#htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>The <a href=#supported-property-names>supported property names</a> consist of the non-empty values of all the <code title=attr-id><a href=#the-id-attribute>id</a></code> and <code title=attr-fe-name><a href=#attr-fe-name>name</a></code> attributes of all the
  elements <a href=#represented-by-the-collection>represented by the collection</a>, in <a href=#tree-order>tree order</a>, ignoring later
  duplicates, with the <code title=attr-id><a href=#the-id-attribute>id</a></code> of an element preceding its <code title=attr-fe-name><a href=#attr-fe-name>name</a></code> if it contributes both, they differ from each other, and neither is the
  duplicate of an earlier entry.</p>

  <p>The properties exposed in this way must be <a href=#unenumerable>unenumerable</a>.</p>

  <p>The <dfn id=dom-htmlformcontrolscollection-nameditem title=dom-HTMLFormControlsCollection-namedItem><code>namedItem(<var title="">name</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li>If <var title="">name</var> is the empty string, return null and stop the algorithm.</li>

   <li>If, at the time the method is called, there is exactly one node in the collection that has
   either an <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute or a <code title=attr-fe-name><a href=#attr-fe-name>name</a></code>
   attribute equal to <var title="">name</var>, then return that node and stop the algorithm.</li>

   <li>Otherwise, if there are no nodes in the collection that have either an <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute or a <code title=attr-fe-name><a href=#attr-fe-name>name</a></code> attribute equal
   to <var title="">name</var>, then return null and stop the algorithm.</li>

   <li>Otherwise, create a new <code><a href=#radionodelist>RadioNodeList</a></code> object representing a <a href=#live>live</a>
   view of the <code><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> object, further filtered so that the only
   nodes in the <code><a href=#radionodelist>RadioNodeList</a></code> object are those that have either an <code title=attr-id><a href=#the-id-attribute>id</a></code> attribute or a <code title=attr-fe-name><a href=#attr-fe-name>name</a></code> attribute equal
   to <var title="">name</var>. The nodes in the <code><a href=#radionodelist>RadioNodeList</a></code> object must be sorted in
   <a href=#tree-order>tree order</a>.</li>

   <li>Return that <code><a href=#radionodelist>RadioNodeList</a></code> object.</li>

  </ol><hr><p>Members of the <code><a href=#radionodelist>RadioNodeList</a></code> interface inherited from the <code><a href=#nodelist>NodeList</a></code>
  interface must behave as they would on a <code><a href=#nodelist>NodeList</a></code> object.</p>

  <p>The <dfn id=dom-radionodelist-value title=dom-RadioNodeList-value><code>value</code></dfn> IDL attribute on the
  <code><a href=#radionodelist>RadioNodeList</a></code> object, on getting, must return the value returned by running the
  following steps:</p>

  <ol><li><p>Let <var title="">element</var> be the first element in <a href=#tree-order>tree order</a>
   represented by the <code><a href=#radionodelist>RadioNodeList</a></code> object that is an <code><a href=#the-input-element>input</a></code> element whose
   <code title=attr-input-type><a href=#attr-input-type>type</a></code> attribute is in the <a href="#radio-button-state-(type=radio)" title=attr-input-type-radio>Radio Button</a> state and whose <a href=#concept-fe-checked title=concept-fe-checked>checkedness</a> is true. Otherwise, let it be null.</li>

   <li><p>If <var title="">element</var> is null, or if it is an element with no <code title=attr-input-value><a href=#attr-input-value>value</a></code> attribute, return the empty string.</li>

   <li><p>Otherwise, return the value of <var title="">element</var>'s <code title=attr-input-value><a href=#attr-input-value>value</a></code> attribute.</li>

  </ol><p>On setting, the <code title=dom-RadioNodeList-value><a href=#dom-radionodelist-value>value</a></code> IDL attribute must run the
  following steps:</p>

  <ol><li><p>Let <var title="">element</var> be the first element in <a href=#tree-order>tree order</a>
   represented by the <code><a href=#radionodelist>RadioNodeList</a></code> object that is an <code><a href=#the-input-element>input</a></code> element whose
   <code title=attr-input-type><a href=#attr-input-type>type</a></code> attribute is in the <a href="#radio-button-state-(type=radio)" title=attr-input-type-radio>Radio Button</a> state and whose <code title=attr-input-value><a href=#attr-input-value>value</a></code> content attribute is present and equal to the new value, if
   any. Otherwise, let it be null.</li>

   <li><p>If <var title="">element</var> is not null, then set its <a href=#concept-fe-checked title=concept-fe-checked>checkedness</a> to true.</p>

  </ol><!--
http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A
--></div>


  <h5 id=htmloptionscollection-0><span class=secno>2.7.2.3 </span>HTMLOptionsCollection</h5>

  <p>The <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> interface is used for <a href=#collections>collections</a> of
  <code><a href=#the-option-element>option</a></code> elements. It is always rooted on a <code><a href=#the-select-element>select</a></code> element and has
  attributes and methods that manipulate that element's descendants.</p>

  <pre class=idl>interface <dfn id=htmloptionscollection>HTMLOptionsCollection</dfn> : <a href=#htmlcollection>HTMLCollection</a> {
  // inherits <a href=#dom-htmlcollection-item title=dom-HTMLCollection-item>item</a>()
           attribute unsigned long <a href=#dom-htmloptionscollection-length title=dom-HTMLOptionsCollection-length>length</a>; // shadows inherited length
  <a href=#dom-htmloptionscollection-nameditem title=dom-HTMLOptionsCollection-namedItem>legacycaller</a> <a href=#htmloptionelement>HTMLOptionElement</a>? (DOMString name);
  <a href=#dom-htmloptionscollection-setter title=dom-HTMLOptionsCollection-setter>setter creator</a> void (unsigned long index, <a href=#htmloptionelement>HTMLOptionElement</a>? option);
  void <a href=#dom-htmloptionscollection-add title=dom-HTMLOptionsCollection-add>add</a>((<a href=#htmloptionelement>HTMLOptionElement</a> or <a href=#htmloptgroupelement>HTMLOptGroupElement</a>) element, optional (<a href=#htmlelement>HTMLElement</a> or long)? before = null);
  void <a href=#dom-htmloptionscollection-remove title=dom-HTMLOptionsCollection-remove>remove</a>(long index);
           attribute long <a href=#dom-htmloptionscollection-selectedindex title=dom-HTMLOptionsCollection-selectedIndex>selectedIndex</a>;
};</pre>

  <dl class=domintro><dt><var title="">collection</var> . <code title=dom-HTMLOptionsCollection-length><a href=#dom-htmloptionscollection-length>length</a></code> [ = <var title="">value</var> ]</dt>
   <dd>
    <p>Returns the number of elements in the collection.</p>
    <p>When set to a smaller number, truncates the number of <code><a href=#the-option-element>option</a></code> elements in the corresponding container.</p>
    <p>When set to a greater number, adds new blank <code><a href=#the-option-element>option</a></code> elements to that container.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLCollection-item><a href=#dom-htmlcollection-item>item</a></code>(<var title="">index</var>)</dt>
   <dt><var title="">collection</var>[<var title="">index</var>]</dt>
   <dd>
    <p>Returns the item with index <var title="">index</var> from the collection. The items are sorted in <a href=#tree-order>tree order</a>.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLOptionsCollection-namedItem><a href=#dom-htmloptionscollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">nodeList</var> = <var title="">collection</var> . <code title=dom-HTMLOptionsCollection-namedItem><a href=#dom-htmloptionscollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dt><var title="">collection</var>[<var title="">name</var>]</dt>
   <dt><var title="">collection</var>(<var title="">name</var>)</dt>
   <dd>
    <p>Returns the item with <a href=#concept-id title=concept-id>ID</a> or <code title=attr-option-name><a href=#attr-option-name>name</a></code> <var title="">name</var> from the collection.</p>
    <p>If there are multiple matching items, then the first is returned.</p>
   </dd>

   <dt><var title="">collection</var> . <code title=dom-HTMLOptionsCollection-add><a href=#dom-htmloptionscollection-add>add</a></code>(<var title="">element</var> [, <var title="">before</var> ] )</dt>
   <dd>
    <p>Inserts <var title="">element</var> before the node given by <var title="">before</var>.</p>
    <p>The <var title="">before</var> argument can be a number, in which case <var title="">element</var> is inserted before the item with that number, or an element from the
    collection, in which case <var title="">element</var> is inserted before that element.</p>
    <p>If <var title="">before</var> is omitted, null, or a number out of range, then <var title="">element</var> will be added at the end of the list.</p>
    <p>This method will throw a <code><a href=#hierarchyrequesterror>HierarchyRequestError</a></code> exception if <var title="">element</var> is an ancestor of the element into which it is to be inserted.</p>
   </dd>

   <dt><var title="">collection</var> . <code title=dom-HTMLOptionsCollection-selectedIndex><a href=#dom-htmloptionscollection-selectedindex>selectedIndex</a></code> [ = <var title="">value</var> ]</dt>

   <dd>

    <p>Returns the index of the first selected item, if any, or &minus;1 if there is no selected
    item.</p>

    <p>Can be set, to change the selection.</p>

   </dd>

  </dl><div class=impl>

  <p>The object's <a href=#supported-property-indices>supported property indices</a> are as defined for
  <code><a href=#htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>On getting, the <dfn id=dom-htmloptionscollection-length title=dom-HTMLOptionsCollection-length><code>length</code></dfn>
  attribute must return the number of nodes <a href=#represented-by-the-collection>represented by the collection</a>.</p>

  <p>On setting, the behavior depends on whether the new value is equal to, greater than, or less
  than the number of nodes <a href=#represented-by-the-collection>represented by the collection</a> at that time. If the number is
  the same, then setting the attribute must do nothing. If the new value is greater, then <var title="">n</var> new <code><a href=#the-option-element>option</a></code> elements with no attributes and no child nodes must be
  appended to the <code><a href=#the-select-element>select</a></code> element on which the <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is
  rooted, where <var title="">n</var> is the difference between the two numbers (new value minus old
  value). Mutation events must be fired as if a <code><a href=#documentfragment>DocumentFragment</a></code> containing the new
  <code><a href=#the-option-element>option</a></code> elements had been inserted. If the new value is lower, then the last <var title="">n</var> nodes in the collection must be removed from their parent nodes, where <var title="">n</var> is the difference between the two numbers (old value minus new value).</p>

  <p class=note>Setting <code title=dom-HTMLOptionsCollection-length><a href=#dom-htmloptionscollection-length>length</a></code> never removes
  or adds any <code><a href=#the-optgroup-element>optgroup</a></code> elements, and never adds new children to existing
  <code><a href=#the-optgroup-element>optgroup</a></code> elements (though it can remove children from them).</p>

  <p>The <a href=#supported-property-names>supported property names</a> consist of the non-empty values of all the <code title=attr-id><a href=#the-id-attribute>id</a></code> and <code title=attr-option-name><a href=#attr-option-name>name</a></code> attributes of all the
  elements <a href=#represented-by-the-collection>represented by the collection</a>, in <a href=#tree-order>tree order</a>, ignoring later
  duplicates, with the <code title=attr-id><a href=#the-id-attribute>id</a></code> of an element preceding its <code title=attr-option-name><a href=#attr-option-name>name</a></code> if it contributes both, they differ from each other, and neither is
  the duplicate of an earlier entry.</p>

  <p>The properties exposed in this way must be <a href=#unenumerable>unenumerable</a>.</p>

  <p>The <dfn id=dom-htmloptionscollection-nameditem title=dom-HTMLOptionsCollection-namedItem>legacy caller</dfn> of the
  <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> interface must act like the <code title=dom-HTMLCollection-namedItem>namedItem()</code> method on the ancestor
  <code><a href=#htmlcollection>HTMLCollection</a></code> interface.</p>

  <p>When the user agent is to <dfn id=dom-htmloptionscollection-setter title=dom-HTMLOptionsCollection-setter>set the value of a new
  indexed property or set the value of an existing indexed property</dfn> for a given property index
  <var title="">index</var> to a new value <var title="">value</var>, it must run the following
  algorithm:</p>

  <ol><li><p>If <var title="">value</var> is null, invoke the steps for the <code title=dom-HTMLOptionsCollection-remove><a href=#dom-htmloptionscollection-remove>remove</a></code> method with <var title="">index</var> as
   the argument, and abort these steps.</li>

   <li><p>Let <var title="">length</var> be the number of nodes <a href=#represented-by-the-collection>represented by the
   collection</a>.</li>

   <li><p>Let <var title="">n</var> be <var title="">index</var> minus <var title="">length</var>.</li>

   <li><p>If <var title="">n</var> is greater than zero, then <a href=#concept-node-append title=concept-node-append>append</a> a <code><a href=#documentfragment>DocumentFragment</a></code> consisting of <span title=""><var title="">n</var>-1</span> new <code><a href=#the-option-element>option</a></code> elements with no attributes and
   no child nodes to the <code><a href=#the-select-element>select</a></code> element on which the <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code>
   is rooted.</li>

   <li><p>If <var title="">n</var> is greater than or equal to zero, <a href=#concept-node-append title=concept-node-append>append</a> <var title="">value</var> to the <code><a href=#the-select-element>select</a></code>
   element. Otherwise, <a href=#concept-node-replace title=concept-node-replace>replace</a> the <var title="">index</var>th element in the collection by <var title="">value</var>.</li>

  </ol><p>The <dfn id=dom-htmloptionscollection-add title=dom-HTMLOptionsCollection-add><code>add(<var title="">element</var>, <var title="">before</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li><p>If <var title="">element</var> is an ancestor of the <code><a href=#the-select-element>select</a></code> element on which
   the <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted, then throw a <code><a href=#hierarchyrequesterror>HierarchyRequestError</a></code>
   exception and abort these steps.</li>

   <li><p>If <var title="">before</var> is an element, but that element isn't a descendant of the
   <code><a href=#the-select-element>select</a></code> element on which the <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted, then throw
   a <code><a href=#notfounderror>NotFoundError</a></code> exception and abort these steps.</li>

   <li><p>If <var title="">element</var> and <var title="">before</var> are the same element, then
   return and abort these steps.</li>

   <li><p>If <var title="">before</var> is a node, then let <var title="">reference</var> be that
   node. Otherwise, if <var title="">before</var> is an integer, and there is a <var title="">before</var>th node in the collection, let <var title="">reference</var> be that node.
   Otherwise, let <var title="">reference</var> be null.</li>

   <li><p>If <var title="">reference</var> is not null, let <var title="">parent</var> be the parent
   node of <var title="">reference</var>. Otherwise, let <var title="">parent</var> be the
   <code><a href=#the-select-element>select</a></code> element on which the <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted.</li>

   <li><p>Act as if the DOM <code title=dom-Node-insertBefore><a href=#dom-node-insertbefore>insertBefore()</a></code> method was
   invoked on the <var title="">parent</var> node, with <var title="">element</var> as the first
   argument and <var title="">reference</var> as the second argument.</p>

  </ol><p>The <dfn id=dom-htmloptionscollection-remove title=dom-HTMLOptionsCollection-remove><code>remove(<var title="">index</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li><p>If the number of nodes <a href=#represented-by-the-collection>represented by the collection</a> is zero, abort these
   steps.</li>

   <li><p>If <var title="">index</var> is not a number greater than or equal to 0 and less than the
   number of nodes <a href=#represented-by-the-collection>represented by the collection</a>, abort these steps.</li>
   <!-- note that Web IDL converts 'a', NaN, -0.5, 0.5, most objects, and null to 0, and numbers in
   general truncate. so what we're checking against here in a way has very little to do with what's
   going on in the JS -->
   <!-- objects get converted by calling ToNumber which calls ToPrimitive which eventually calls valueOf:
         http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2828
         http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2833
    -->
   <!-- same for select.remove(), which calls this algorithm also:
         http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2826
         http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2825
         http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2827
     -->

   <li><p>Let <var title="">element</var> be the <var title="">index</var>th element in the
   collection.</li>

   <li><p>Remove <var title="">element</var> from its parent node.</li>

  </ol><p>The <dfn id=dom-htmloptionscollection-selectedindex title=dom-HTMLOptionsCollection-selectedIndex><code>selectedIndex</code></dfn> IDL
  attribute must act like the identically named attribute on the <code><a href=#the-select-element>select</a></code> element on
  which the <code><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted</p>

  <!-- see also http://ln.hixie.ch/?start=1161042744&count=1 -->

  </div>


<!--TOPIC:Microdata-->
  <h5 id=htmlpropertiescollection-0><span class=secno>2.7.2.4 </span>HTMLPropertiesCollection</h5>

  <p>The <code><a href=#htmlpropertiescollection>HTMLPropertiesCollection</a></code> interface is used for <a href=#collections>collections</a> of
  elements that add <a href=#the-properties-of-an-item title="the properties of an item">name-value pairs</a> to a particular
  <a href=#concept-item title=concept-item>item</a> in the <a href=#microdata>microdata</a> model.</p>

  <pre class=idl>interface <dfn id=htmlpropertiescollection>HTMLPropertiesCollection</dfn> : <a href=#htmlcollection>HTMLCollection</a> {
  // inherits <span title=dom-HTMLCollection-length>length</span> and <a href=#dom-htmlcollection-item title=dom-HTMLCollection-item>item</a>()
  getter <a href=#propertynodelist>PropertyNodeList</a>? <a href=#dom-htmlpropertiescollection-nameditem title=dom-HTMLPropertiesCollection-namedItem>namedItem</a>(DOMString name); // shadows inherited namedItem()
  readonly attribute DOMString[] <a href=#dom-htmlpropertiescollection-names title=dom-HTMLPropertiesCollection-names>names</a>;
};

typedef sequence&lt;any&gt; <dfn id=propertyvaluearray>PropertyValueArray</dfn>;

interface <dfn id=propertynodelist>PropertyNodeList</dfn> : <a href=#nodelist>NodeList</a> {
  <a href=#propertyvaluearray>PropertyValueArray</a> <a href=#dom-propertynodelist-getvalues title=dom-PropertyNodeList-getValues>getValues</a>();
};</pre>

  <dl class=domintro><dt><var title="">collection</var> . <code title=dom-HTMLCollection-length>length</code></dt>
   <dd>
    <p>Returns the number of elements in the collection.</p>
   </dd>

   <dt><var title="">element</var> = <var title="">collection</var> . <code title=dom-HTMLCollection-item><a href=#dom-htmlcollection-item>item</a></code>(<var title="">index</var>)</dt>
   <dt><var title="">collection</var>[<var title="">index</var>]</dt>
   <dd>
    <p>Returns the element with index <var title="">index</var> from the collection. The items are sorted in <a href=#tree-order>tree order</a>.</p>
   </dd>

   <dt><var title="">propertyNodeList</var> = <var title="">collection</var> . <code title=dom-HTMLPropertiesCollection-namedItem><a href=#dom-htmlpropertiescollection-nameditem>namedItem</a></code>(<var title="">name</var>)</dt>
   <dd>
    <p>Returns a <code><a href=#propertynodelist>PropertyNodeList</a></code> object containing any elements that add a property named <var title="">name</var>.</p>
   </dd>

   <dt><var title="">collection</var>[<var title="">name</var>]</dt>
   <dd>
    <p>Returns a <code><a href=#propertynodelist>PropertyNodeList</a></code> object containing any elements that add a property named <var title="">name</var>. The <var title="">name</var> index has to be one of the values listed in the <code title=dom-HTMLPropertiesCollection-names><a href=#dom-htmlpropertiescollection-names>names</a></code> list.</p>
   </dd>

   <dt><var title="">collection</var> . <code title=dom-HTMLPropertiesCollection-names><a href=#dom-htmlpropertiescollection-names>names</a></code></dt>
   <dd>
    <p>Returns an array with the <a href=#property-names>property names</a> of the elements in the collection.</p>
   </dd>

   <dt><var title="">propertyNodeList</var> . <code title=dom-PropertyNodeList-getVlues>getValues</code>()</dt>
   <dd>
    <p>Returns an array of the various values that the relevant elements have.</p>
   </dd>

  </dl><div class=impl>

  <p>The object's <a href=#supported-property-indices>supported property indices</a> are as defined for
  <code><a href=#htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>The <a href=#supported-property-names>supported property names</a> consist of the <a href=#property-names>property names</a> of all the
  elements <a href=#represented-by-the-collection>represented by the collection</a>, in <a href=#tree-order>tree order</a>, ignoring later
  duplicates.</p>

  <p>The properties exposed in this way must be <a href=#unenumerable>unenumerable</a>.</p>

  <p>The <dfn id=dom-htmlpropertiescollection-names title=dom-HTMLPropertiesCollection-names><code>names</code></dfn> attribute must
  return a <a href=#live>live</a> <a href=#dfn-read-only-array title=dfn-read-only-array>read only</a> array object giving
  the <a href=#property-names>property names</a> of all the elements <a href=#represented-by-the-collection>represented by the collection</a>,
  listed in <a href=#tree-order>tree order</a>, but with duplicates removed, leaving only the first occurrence
  of each name. The same object must be returned each time.</p>

  <p>The <dfn id=dom-htmlpropertiescollection-nameditem title=dom-HTMLPropertiesCollection-namedItem><code>namedItem(<var title="">name</var>)</code></dfn> method must return a <code><a href=#propertynodelist>PropertyNodeList</a></code> object
  representing a <a href=#live>live</a> view of the <code><a href=#htmlpropertiescollection>HTMLPropertiesCollection</a></code> object, further
  filtered so that the only nodes in the <code><a href=#propertynodelist>PropertyNodeList</a></code> object are those that have a
  <a href=#property-names title="property names">property name</a> equal to <var title="">name</var>. The nodes in
  the <code><a href=#propertynodelist>PropertyNodeList</a></code> object must be sorted in <a href=#tree-order>tree order</a>, and the same
  object must be returned each time a particular <var title="">name</var> is queried.</p>

  <hr><p>Members of the <code><a href=#propertynodelist>PropertyNodeList</a></code> interface inherited from the <code><a href=#nodelist>NodeList</a></code>
  interface must behave as they would on a <code><a href=#nodelist>NodeList</a></code> object.</p>

  <p>The <dfn id=dom-propertynodelist-getvalues title=dom-PropertyNodeList-getValues><code>getValues</code></dfn> method the
  <code><a href=#propertynodelist>PropertyNodeList</a></code> object must return a newly constructed array whose values are the
  values obtained from the <code title=dom-itemValue><a href=#dom-itemvalue>itemValue</a></code> IDL attribute of each of the
  elements represented by the object, in <a href=#tree-order>tree order</a>.</p>

  </div>


<!--TOPIC:DOM APIs-->
  <h4 id=domstringmap-0><span class=secno>2.7.3 </span>DOMStringMap</h4>

  <p>The <code><a href=#domstringmap>DOMStringMap</a></code> interface represents a set of name-value pairs. It exposes these
  using the scripting language's native mechanisms for property access.</p>

  <div class=impl>

  <p>When a <code><a href=#domstringmap>DOMStringMap</a></code> object is instantiated, it is associated with three
  algorithms, one for getting the list of name-value pairs, one for setting names to certain values,
  and one for deleting names.</p>

  <pre class=idl>[OverrideBuiltins, Exposed=Window,Worker]
interface <dfn id=domstringmap>DOMStringMap</dfn> {
  <a href=#dom-domstringmap-nameditem title=dom-DOMStringMap-namedItem>getter</a> DOMString (DOMString name);
  <a href=#dom-domstringmap-setitem title=dom-DOMStringMap-setItem>setter</a> <a href=#dom-domstringmap-additem title=dom-DOMStringMap-addItem>creator</a> void (DOMString name, DOMString value);
  <a href=#dom-domstringmap-removeitem title=dom-DOMStringMap-removeItem>deleter</a> void (DOMString name);
};</pre>

  <p>The <a href=#supported-property-names>supported property names</a> on a <code><a href=#domstringmap>DOMStringMap</a></code> object at any instant
  are the names of each pair returned from the algorithm for getting the list of name-value pairs at
  that instant, in the order returned.</p>

  <p>To <dfn id=dom-domstringmap-nameditem title=dom-DOMStringMap-namedItem>determine the value of a named property</dfn> <var title="">name</var> in a <code><a href=#domstringmap>DOMStringMap</a></code>, the user agent must return the value component
  of the name-value pair whose name component is <var title="">name</var> in the list returned by
  the algorithm for getting the list of name-value pairs.</p>

  <p>To set the value of a <dfn id=dom-domstringmap-additem title=dom-DOMStringMap-addItem>new</dfn> or <dfn id=dom-domstringmap-setitem title=dom-DOMStringMap-setItem>existing</dfn> named property <var title="">name</var> to value
  <var title="">value</var>, the algorithm for setting names to certain values must be run, passing
  <var title="">name</var> as the name and the result of converting <var title="">value</var> to a
  <code>DOMString</code> as the value.</p>

  <p>To <dfn id=dom-domstringmap-removeitem title=dom-DOMStringMap-removeItem>delete an existing named property</dfn> <var title="">name</var>, the algorithm for deleting names must be run, passing <var title="">name</var> as the name.</p>

  <p class=note>The <code><a href=#domstringmap>DOMStringMap</a></code> interface definition here is only intended for
  JavaScript environments. Other language bindings will need to define how <code><a href=#domstringmap>DOMStringMap</a></code>
  is to be implemented for those languages.</p>

  </div>

  <div class=example>

   <p>The <code title=dom-dataset><a href=#dom-dataset>dataset</a></code> attribute on elements exposes the <code title=attr-data-*><a href=#attr-data-*>data-*</a></code> attributes on the element.</p>

   <p>Given the following fragment and elements with similar constructions:</p>

   <pre>&lt;img class="tower" id="tower5" data-<!---->x="12" data-y="5"
     data-ai="robotarget" data-hp="46" data-ability="flames"
     src="towers/rocket.png alt="Rocket Tower"&gt;</pre>

   <p>...one could imagine a function <code title="">splashDamage()</code> that takes some arguments, the first
   of which is the element to process:</p>

   <pre>function splashDamage(node, x, y, damage) {
  if (node.classList.contains('tower') &amp;&amp; // checking the 'class' attribute
      node.dataset.x == x &amp;&amp; // reading the 'data-x' attribute
      node.dataset.y == y) { // reading the 'data-y' attribute
    var hp = parseInt(node.dataset.hp); // reading the 'data-hp' attribute
    hp = hp - damage;
    if (hp &lt; 0) {
      hp = 0;
      node.dataset.ai = 'dead'; // setting the 'data-ai' attribute
      delete node.dataset.ability; // removing the 'data-ability' attribute
    }
    node.dataset.hp = hp; // setting the 'data-hp' attribute
  }
}</pre>

  </div>


  <h4 id=domelementmap-0><span class=secno>2.7.4 </span>DOMElementMap</h4>

  <p>The <code><a href=#domelementmap>DOMElementMap</a></code> interface represents a set of name-element mappings. It exposes
  these using the scripting language's native mechanisms for property access.</p>

  <div class=impl>

  <p>When a <code><a href=#domelementmap>DOMElementMap</a></code> object is instantiated, it is associated with three
  algorithms, one for getting the list of name-element mappings, one for mapping a name to a certain
  element, and one for deleting mappings by name.</p>

  <pre class=idl>interface <dfn id=domelementmap>DOMElementMap</dfn> {
  <a href=#dom-domelementmap-nameditem title=dom-DOMElementMap-namedItem>getter</a> <a href=#element>Element</a> (DOMString name);
  <a href=#dom-domelementmap-setitem title=dom-DOMElementMap-setItem>setter</a> <a href=#dom-domelementmap-additem title=dom-DOMElementMap-addItem>creator</a> void (DOMString name, <a href=#element>Element</a> value);
  <a href=#dom-domelementmap-removeitem title=dom-DOMElementMap-removeItem>deleter</a> void (DOMString name);
};</pre>

  <p>The <a href=#supported-property-names>supported property names</a> on a <code><a href=#domelementmap>DOMElementMap</a></code> object at any instant
  are the names for each mapping returned from the algorithm for getting the list of name-element
  mappings at that instant, in the order returned.</p>

  <p>To <dfn id=dom-domelementmap-nameditem title=dom-DOMElementMap-namedItem>determine the value of a named property</dfn> <var title="">name</var> in a <code><a href=#domelementmap>DOMElementMap</a></code>, the user agent must return the element
  component of the name-element mapping whose name component is <var title="">name</var> in the list
  returned by the algorithm for getting the list of name-element mappings.</p>

  <p>To set the value of a <dfn id=dom-domelementmap-additem title=dom-DOMElementMap-addItem>new</dfn> or <dfn id=dom-domelementmap-setitem title=dom-DOMElementMap-setItem>existing</dfn> named property <var title="">name</var> to value
  <var title="">value</var>, the algorithm for mapping a name to a certain element must be run,
  passing <var title="">name</var> as the name <var title="">value</var> as the element.</p>

  <p>To <dfn id=dom-domelementmap-removeitem title=dom-DOMElementMap-removeItem>delete an existing named property</dfn> <var title="">name</var>, the algorithm for deleting mappings must be run, passing <var title="">name</var> as the name component of the mapping to be deleted.</p>

  <p class=note>The <code><a href=#domelementmap>DOMElementMap</a></code> interface definition here is only intended for
  JavaScript environments. Other language bindings will need to define how
  <code><a href=#domelementmap>DOMElementMap</a></code> is to be implemented for those languages.</p>

  </div>



  <h4 id=transferable-objects><span class=secno>2.7.5 </span>Transferable objects</h4>

  <p>Some objects support being copied and closed in one operation. This is called
  <i>transferring</i> the object, and is used in particular to transfer ownership of unsharable or
  expensive resources across worker boundaries.</p>

  <p>The following <code><a href=#transferable>Transferable</a></code> types exist:</p>

  <ul class=brief><li><code><a href=#arraybuffer>ArrayBuffer</a></code> <a href=#refsECMA262>[ECMA262]</a>
   <li><code><a href=#canvasproxy>CanvasProxy</a></code> (defined in this specification)
   <li><code><a href=#messageport>MessagePort</a></code> (defined in this specification)
  </ul><div class=impl>

  <p>The following IDL block formalizes this:</p>

  <pre class=idl>typedef (<a href=#arraybuffer>ArrayBuffer</a> or <a href=#canvasproxy>CanvasProxy</a> or <a href=#messageport>MessagePort</a>) <dfn id=transferable>Transferable</dfn>;</pre>

  <p>To <dfn id=transfer-a-transferable-object>transfer a <code>Transferable</code> object</dfn> to a new owner, the user agent must
  run the steps defined for the type of object in question. The steps will return a new object of
  the same type, and will permanently <dfn id=concept-transferable-neutered title=concept-Transferable-neutered>neuter</dfn> the
  original object. (This is an irreversible and non-idempotent operation; once an object has been
  transferred, it cannot be transferred, or indeed used, again.)</p>

  <p id=transferArrayBuffer>To <a href=#transfer-a-transferable-object title="transfer a Transferable object">transfer</a> an
  <code><a href=#arraybuffer>ArrayBuffer</a></code> object <var title="">old</var> to a new owner <var title="">owner</var>, a user agent must create a new <code><a href=#arraybuffer>ArrayBuffer</a></code> object pointing at
  the same underlying data as <var title="">old</var>, thus obtaining <var title="">new</var>,
  must <a href=#concept-transferable-neutered title=concept-Transferable-neutered>neuter</a> the <var title="">old</var>
  object, and must finally return <var title="">new</var>. <a href=#refsECMA262>[ECMA262]</a></p>
  <!-- I'm expecting this section to move to the JS spec eventually so I'm leaving it as is for now -->

  <p class=note>Rules for how to <a href=#transferCanvasProxy>transfer a
  <code>CanvasProxy</code> object</a> and how to <a href=#transferMessagePort>transfer a
  <code>MessagePort</code> object</a> are given in the relevant sections of this specification.</p>

  </div>


  <div class=impl>

  <h4 id=safe-passing-of-structured-data><span class=secno>2.7.6 </span>Safe passing of structured data</h4>

  <p>When a user agent is required to obtain a <dfn id=structured-clone>structured clone</dfn> of a value, optionally
  with a <i>transfer map</i>, it must run the following algorithm, which either returns a separate
  value, or throws an exception. If a <i>transfer map</i> is provided, it consists of an association
  list of <code><a href=#transferable>Transferable</a></code> objects to placeholder objects.</p>

  <ol><li><p>Let <var title="">input</var> be the value being cloned.</li>

   <li><p>Let <var title="">transfer map</var> be the <i>transfer map</i> passed to the algorithm,
   if any, or the empty list otherwise.</li>

   <li><p>Let <var title="">memory</var> be an association list of pairs of objects, initially
   empty. This is used to handle duplicate references. In each pair of objects, one is called the
   <em><a href=#the-source-element>source</a></em> object and the other the <em>destination</em> object.</li>

   <li><p>For each mapping in <var title="">transfer map</var>, add a mapping from the
   <code><a href=#transferable>Transferable</a></code> object (the source object) to the placeholder object (the destination
   object) to <var title="">memory</var>.</li>

   <li><p>Let <var title="">output</var> be the value resulting from calling the <a href=#internal-structured-cloning-algorithm>internal
   structured cloning algorithm</a> with <var title="">input</var> as the "<var title="">input</var>" argument, and <var title="">memory</var> as the "<var title="">memory</var>" argument.</li>

   <li><p>Return <var title="">output</var>.</li>

  </ol><p>The <dfn id=internal-structured-cloning-algorithm>internal structured cloning algorithm</dfn> is always called with two arguments, <var title="">input</var> and <var title="">memory</var>, and its behavior is as follows:</p>

  <ol><li><p>If <var title="">input</var> is the source object of a pair of objects in <var title="">memory</var>, then return the destination object in that pair of objects and abort these
   steps.</li>

   <li><p>If <var title="">input</var> is a primitive value, then return that value and abort these
   steps.</li>

   <li><p>Let <var title="">deep clone</var> be <i>none</i>.</li>

   <li>

    <p>The <var title="">input</var> value is an object. Jump to the appropriate step below:</p>

    <dl class=switch><dt>If <var title="">input</var> is a <code>Boolean</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed Boolean object with the same value
     as <var title="">input</var>.</dd>

     <dt>If <var title="">input</var> is a <code>Number</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed Number object with the same value
     as <var title="">input</var>.</dd>

     <dt>If <var title="">input</var> is a <code>String</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed String object with the same value
     as <var title="">input</var>.</dd>

     <dt>If <var title="">input</var> is a <code>Date</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed <code>Date</code> object with the
     same value as <var title="">input</var>.</dd>

     <dt>If <var title="">input</var> is a <code>RegExp</code> object</dt>

     <dd>

      <p>Let <var title="">output</var> be a newly constructed <code>RegExp</code> object with the
      same pattern and flags as <var title="">input</var>.</p>

      <p class=note>The value of the <code title="">lastIndex</code> property is not copied.</p>

     </dd>

     <dt>If <var title="">input</var> is a <code><a href=#blob>Blob</a></code> object</dt>

     <dd><p>If <var title="">input</var> has been disabled through the <code title=dom-Blob-close><a href=#dom-blob-close>close()</a></code> method, throw a <code><a href=#datacloneerror>DataCloneError</a></code> exception
     and abort the overall <a href=#structured-clone>structured clone</a> algorithm. Otherwise, let <var title="">output</var> be a newly constructed object of the same class as <var title="">input</var>, corresponding to the same underlying data.</dd>

     <dt>If <var title="">input</var> is a <code><a href=#filelist>FileList</a></code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed <code><a href=#filelist>FileList</a></code> object
     containing a list of newly constructed <code><a href=#file>File</a></code> objects corresponding to the same
     underlying data as those in <var title="">input</var>, maintaining their relative
     order.</dd>

     <dt>If <var title="">input</var> is an <code><a href=#imagedata>ImageData</a></code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed <code><a href=#imagedata>ImageData</a></code> object
     whose <code title=dom-imagedata-width><a href=#dom-imagedata-width>width</a></code> and <code title=dom-imagedata-height><a href=#dom-imagedata-height>height</a></code> have values equal to the corresponding attributes
     on <var title="">input</var>, and whose <code title=dom-imagedata-data><a href=#dom-imagedata-data>data</a></code>
     attribute has the value obtained from invoking the <a href=#internal-structured-cloning-algorithm>internal structured cloning
     algorithm</a> recursively with the value of the <code title=dom-imagedata-data><a href=#dom-imagedata-data>data</a></code> attribute on <var title="">input</var> as the new
     "<var title="">input</var>" argument and <var title="">memory</var> as the new "<var title="">memory</var>" argument.</dd>

     <dt>If <var title="">input</var> is an <code><a href=#imagebitmap>ImageBitmap</a></code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed <code><a href=#imagebitmap>ImageBitmap</a></code> object
     whose bitmap data is a copy of <var title="">input</var>'s bitmap data.</dd>

     <dt>If <var title="">input</var> is an <code><a href=#arraybuffer>ArrayBuffer</a></code> object</dt>

     <dd><p>If <var title="">input</var> has been <a href=#concept-transferable-neutered title=concept-Transferable-neutered>neutered</a>, throw a <code><a href=#datacloneerror>DataCloneError</a></code>
     exception and abort the overall <a href=#structured-clone>structured clone</a> algorithm. Otherwise, let <var title="">output</var> be a newly constructed <code><a href=#arraybuffer>ArrayBuffer</a></code> object whose contents
     are a copy of <var title="">input</var>'s contents, with the same length.</dd>

     <dt>If <var title="">input</var> is an object with a [[DataView]] internal slot</dt>

     <dd>

      <p>Let <var title="">output</var> be a newly constructed object of the same class as <var title="">input</var>, with its [[DataView]] internal property present, its
      [[ViewedArrayBuffer]] internal property set to the value obtained from invoking the
      <a href=#internal-structured-cloning-algorithm>internal structured cloning algorithm</a> recursively with the value of the internal
      property on <var title="">input</var> as the new "<var title="">input</var>" argument and
      <var title="">memory</var> as the new "<var title="">memory</var>" argument, and with the
      [[ByteLength]] and [[ByteOffset]] internal properties set to the same value as their
      counterparts on <var title="">input</var>.</p>

      <!-- the above might not make much sense, but it'll become moot when JS takes over defining
      how to clone ArrayBufferView objects -->

     </dd>

     <dt>If <var title="">input</var> is an <code>Array</code> object</dt>

     <dd>

      <p>Let <var title="">output</var> be a newly constructed empty <code>Array</code> object
      whose <code title="">length</code> is equal to the <code title="">length</code> of <var title="">input</var>, and set <var title="">deep clone</var> to <i>own</i>.</p>

      <p class=note>This means that the length of sparse arrays is preserved.</p>

     </dd>

     <dt>If <var title="">input</var> is an <code title="">Object</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed empty <code title="">Object</code> object, and set <var title="">deep clone</var> to <i>own</i>.</dd>

     <dt>If <var title="">input</var> is a <code title="">Map</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed empty <code title="">Map</code>
     object, and set <var title="">deep clone</var> to <i><a href=#the-map-element>map</a></i>.</dd>

     <dt>If <var title="">input</var> is a <code>Set</code> object</dt>

     <dd><p>Let <var title="">output</var> be a newly constructed empty <code title="">Set</code>
     object, and set <var title="">deep clone</var> to <i>set</i>.</dd>

     <dt>If <var title="">input</var> is an object that another specification defines how to clone</dt>

     <dd><p>Let <var title="">output</var> be a clone of the object as defined by the other
     specification.</dd>

     <dt>If <var title="">input</var> is another native object type (e.g. <code>Error</code>,
     <code>Function</code>)</dt>
     <dt>If <var title="">input</var> is a host object (e.g. a DOM node)</dt>

     <dd><p>Throw a <code><a href=#datacloneerror>DataCloneError</a></code> exception and abort the overall <a href=#structured-clone>structured
     clone</a> algorithm.</dd>

    </dl><p>For the purposes of the algorithm above, an object is a particular type of object <var title="">class</var> if its [[Class]] internal property is equal to <var title="">class</var>.</p>

    <p class=example>For example, "<var title="">input</var> is an <code title="">Object</code>
    object" if <var title="">input</var>'s [[Class]] internal property is equal to the string
    "<code title="">Object</code>".</p>

   </li>

   <li><p>Add a mapping from <var title="">input</var> (the source object) to <var title="">output</var> (the destination object) to <var title="">memory</var>.</li>

   <li>

    <p>If <var title="">deep clone</var> is set to <i><a href=#the-map-element>map</a></i>, then run these substeps. These
    substeps use the terminology and typographic conventions used in the JavaScript specification's
    definition of Maps. <a href=#refsECMA262>[ECMA262]</a></p>

    <ol><li><p>Let <var title="">source</var> be the List that is the value of <var title="">input</var>'s [[MapData]] internal slot, if any. If there is no such slot, then
     instead throw a <code><a href=#datacloneerror>DataCloneError</a></code> exception and abort the overall <a href=#structured-clone>structured
     clone</a> algorithm. <a href=#refsECMA262>[ECMA262]</a></li>

     <li><p>Let <var title="">target</var> be the List that is the value of <var title="">output</var>'s [[MapData]] internal slot.</li>

     <li>

      <p>For each Record {[[key]], [[value]]} <var title="">entry</var> that is an element of
      <var title="">source</var>, run the following substeps:</p>

      <ol><li><p>Let <var title="">key</var> have the value obtained from invoking the
       <a href=#internal-structured-cloning-algorithm>internal structured cloning algorithm</a> recursively with <var title="">entry</var>.[[key]] as the new "<var title="">input</var>" argument and <var title="">memory</var> as the new "<var title="">memory</var>" argument.</li>

       <li><p>Let <var title="">value</var> have the value obtained from invoking the
       <a href=#internal-structured-cloning-algorithm>internal structured cloning algorithm</a> recursively with <var title="">entry</var>.[[value]] as the new "<var title="">input</var>" argument and <var title="">memory</var> as the new "<var title="">memory</var>" argument.</li>

       <li><p>Let <var title="">new entry</var> be the Record {[[key]]: <var title="">key</var>,
       [[value]]: <var title="">value</var>}.</li>

       <li><p>Append <var title="">new entry</var> as the last element of <var title="">target</var>.</li>

      </ol></li>

     <li><p>Set <var title="">deep clone</var> to <i>own</i>.</li>

    </ol></li>

   <li>

    <p>If <var title="">deep clone</var> is set to <i>set</i>, then run these substeps. These
    substeps use the terminology and typographic conventions used in the JavaScript specification's
    definition of Sets. <a href=#refsECMA262>[ECMA262]</a></p>

    <ol><li><p>Let <var title="">source</var> be the List that is the value of <var title="">input</var>'s [[SetData]] internal slot, if any. If there is no such slot, then
     instead throw a <code><a href=#datacloneerror>DataCloneError</a></code> exception and abort the overall <a href=#structured-clone>structured
     clone</a> algorithm. <a href=#refsECMA262>[ECMA262]</a></li>

     <li><p>Let <var title="">target</var> be the List that is the value of <var title="">output</var>'s [[SetData]] internal slot.</li>

     <li>

      <p>For each <var title="">entry</var> that is an element of <var title="">source</var> that
      is not <i>empty</i>, run the following substeps:</p>

      <ol><li><p>Let <var title="">new entry</var> have the value obtained from invoking the
       <a href=#internal-structured-cloning-algorithm>internal structured cloning algorithm</a> recursively with <var title="">entry</var> as the new "<var title="">input</var>" argument and <var title="">memory</var> as the new "<var title="">memory</var>" argument.</li>

       <li><p>Append <var title="">new entry</var> as the last element of <var title="">target</var>.</li>

      </ol></li>

     <li><p>Set <var title="">deep clone</var> to <i>own</i>.</li>

    </ol></li>

   <li>

    <p>If <var title="">deep clone</var> is set to <i>own</i>, then, for each enumerable own
    property in <var title="">input</var>, run the following steps:</p>

    <ol><li><p>Let <var title="">name</var> be the name of the property.</li>

     <li><p>Let <var title="">source value</var> be the result of calling the [[Get]] internal
     method of <var title="">input</var> with the argument <var title="">name</var>. If the
     [[Get]] internal method of a property involved executing script, and that script threw an
     uncaught exception, then abort the overall <a href=#structured-clone>structured clone</a> algorithm, with that
     exception being passed through to the caller.</li>

     <li><p>Let <var title="">cloned value</var> be the result of invoking the <a href=#internal-structured-cloning-algorithm>internal
     structured cloning algorithm</a> recursively with <var title="">source value</var> as the
     "<var title="">input</var>" argument and <var title="">memory</var> as the "<var title="">memory</var>" argument. If this results in an exception, then abort the overall
     <a href=#structured-clone>structured clone</a> algorithm, with that exception being passed through to the
     caller.</li>

     <li><p>Add a new property to <var title="">output</var> having the name <var title="">name</var>, and having the value <var title="">cloned value</var>.</li>

    </ol><p>The order of the properties in the <var title="">input</var> and <var title="">output</var>
    objects must be the same, and any properties whose [[Get]] internal method involves running
    script must be processed in that same order.</p>

    <p class=note>This does not walk the prototype chain.</p>

    <p class=note>Property descriptors, setters, getters, and analogous features are not copied in
    this process. For example, the property in the input could be marked as read-only, but in the
    output it would just have the default state (typically read-write, though that could depend on
    the scripting environment).</p>

    <p class=note>Properties of Array objects are not treated any differently than those of other
    Objects. In particular, this means that non-index properties of arrays are copied as well.</p>

   </li>

   <li><p>Return <var title="">output</var>.</li>

  </ol><p class=note>This algorithm preserves cycles and preserves the identity of duplicate objects in
  graphs.</p>

  </div>


  <h4 id=callbacks><span class=secno>2.7.7 </span>Callbacks</h4>

  <p>The following callback function type is used in various APIs that interact with
  <code><a href=#file>File</a></code> objects:</p>

  <pre class=idl>callback <dfn id=filecallback>FileCallback</dfn> = void (<a href=#file>File</a> file);</pre>


  <div class=impl>

  <h4 id=garbage-collection><span class=secno>2.7.8 </span>Garbage collection</h4>

  <p>There is an <dfn id=implied-strong-reference>implied strong reference</dfn> from any IDL attribute that returns a
  pre-existing object to that object.</p>

  <div class=example>

   <p>For example, the <code>document.location</code> attribute means that there is a strong
   reference from a <code><a href=#document>Document</a></code> object to its <code><a href=#location>Location</a></code> object. Similarly,
   there is always a strong reference from a <code><a href=#document>Document</a></code> to any descendant nodes, and from
   any node to its owner <code><a href=#document>Document</a></code>.</p>

  </div>

  </div>


<!--TOPIC:HTML Syntax and Parsing-->
  <h3 id=namespaces><span class=secno>2.8 </span>Namespaces</h3>

  <p>The <dfn id=html-namespace-0>HTML namespace</dfn> is: <code>http://www.w3.org/1999/xhtml</code></p>

  <p>The <dfn id=mathml-namespace>MathML namespace</dfn> is: <code>http://www.w3.org/1998/Math/MathML</code></p>

  <p>The <dfn id=svg-namespace>SVG namespace</dfn> is: <code>http://www.w3.org/2000/svg</code></p>

  <p>The <dfn id=xlink-namespace>XLink namespace</dfn> is: <code>http://www.w3.org/1999/xlink</code></p>

  <p>The <dfn id=xml-namespace>XML namespace</dfn> is: <code>http://www.w3.org/XML/1998/namespace</code></p>

  <p>The <dfn id=xmlns-namespace>XMLNS namespace</dfn> is: <code>http://www.w3.org/2000/xmlns/</code></p>

  <hr><p>Data mining tools and other user agents that perform operations
  on content without running scripts, evaluating CSS or XPath
  expressions, or otherwise exposing the resulting DOM to arbitrary
  content, may "support namespaces" by just asserting that their DOM
  node analogues are in certain namespaces, without actually exposing
  the above strings.</p>

  <hr><p class=note>In <a href=#syntax>the HTML syntax</a>, namespace prefixes
  and namespace declarations do not have the same effect as in XML.
  For instance, the colon has no special meaning in HTML element
  names.</p>


<!--TOPIC:DOM APIs-->
  <h2 id=dom><span class=secno>3 </span>Semantics, structure, and APIs of HTML documents</h2>

  <h3 id=documents><span class=secno>3.1 </span>Documents</h3>

  <p>Every XML and HTML document in an HTML UA is represented by a <code><a href=#document>Document</a></code> object. <a href=#refsDOM>[DOM]</a></p>

  <p><dfn id="the-document's-address">The document's address</dfn> is the <i title=concept-document-URL>URL associated with a
  <code><a href=#document>Document</a></code></i> (as defined in the DOM standard). It is initially set when the
  <code><a href=#document>Document</a></code> is created, but that can change during the lifetime of the
  <code><a href=#document>Document</a></code>; for example, it changes when the user <a href=#navigate title=navigate>navigates</a> to a <a href=#scroll-to-fragid title=navigate-fragid>fragment identifier</a>
  on the page and when the <code title=dom-history-pushState><a href=#dom-history-pushstate>pushState()</a></code> method is called
  with a new <a href=#url>URL</a>. <a href=#refsDOM>[DOM]</a></p>
  <!--
    http://www.hixie.ch/tests/adhoc/dom/level0/history/pushState/002/
    http://www.hixie.ch/tests/adhoc/html/navigation/fragids/016.html
  -->

  <p class=warning>Interactive user agents typically expose <a href="#the-document's-address">the document's address</a> in
  their user interface. This is the primary mechanism by which a user can tell if a site is
  attempting to impersonate another.</p>

  <p>When a <code><a href=#document>Document</a></code> is created by a <a href=#concept-script title=concept-script>script</a> using
  the <code title=dom-DOMImplementation-createDocument><a href=#dom-domimplementation-createdocument>createDocument()</a></code> or <code title=dom-DOMImplementation-createHTMLDocument><a href=#dom-domimplementation-createhtmldocument>createHTMLDocument()</a></code> APIs, <a href="#the-document's-address">the
  document's address</a> is the same as <a href="#the-document's-address">the document's address</a> of the
  <a href=#responsible-document>responsible document</a> specified by the script's <a href=#settings-object>settings object</a>, and the
  <code><a href=#document>Document</a></code> is both <a href=#ready-for-post-load-tasks>ready for post-load tasks</a> and <a href=#completely-loaded>completely
  loaded</a> immediately.</p>

  <p><dfn id="the-document's-referrer">The document's referrer</dfn> is an <a href=#absolute-url>absolute URL</a> that can be set when the
  <code><a href=#document>Document</a></code> is created. If it is not explicitly set, then its value is the empty
  string.</p>

  <p>Each <code><a href=#document>Document</a></code> object has a <dfn id=reload-override-flag>reload override flag</dfn> that is originally
  unset. The flag is set by the <code title=dom-document-open><a href=#dom-document-open>document.open()</a></code> and <code title=dom-document-open><a href=#dom-document-open>document.write()</a></code> methods in certain situations. When the flag is
  set, the <code><a href=#document>Document</a></code> also has a <dfn id=reload-override-buffer>reload override buffer</dfn> which is a Unicode
  string that is used as the source of the document when it is reloaded.</p>

  <p>When the user agent is to perform <dfn id=an-overridden-reload>an overridden reload</dfn>, given a <a href=#source-browsing-context>source
  browsing context</a>, it must act as follows:</p>

  <ol><li><p>Let <var title="">source</var> be the value of the <a href=#browsing-context>browsing context</a>'s
   <a href=#active-document>active document</a>'s <a href=#reload-override-buffer>reload override buffer</a>.</li>

   <li><p>Let <var title="">address</var> be the <a href=#browsing-context>browsing context</a>'s <a href=#active-document>active
   document</a>'s <a href="#the-document's-address" title="the document's address">address</a>.</li>

   <li>

    <p><a href=#navigate>Navigate</a><!--DONAV reload after d.open()--> the <a href=#browsing-context>browsing context</a> to
    a resource whose source is <var title="">source</var>, with <a href=#replacement-enabled>replacement enabled</a>
    and <a href=#exceptions-enabled>exceptions enabled</a>. The <a href=#source-browsing-context>source browsing context</a> is that given to
    the <a href=#an-overridden-reload title="an overridden reload">overridden reload</a> algorithm. When the
    <a href=#navigate>navigate</a> algorithm creates a <code><a href=#document>Document</a></code> object for this purpose, set
    that <code><a href=#document>Document</a></code>'s <a href=#reload-override-flag>reload override flag</a> and set its <a href=#reload-override-buffer>reload override
    buffer</a> to <var title="">source</var>.</p>

    <p>When it comes time to <a href="#set-the-document's-address">set the document's address</a> in the <a href=#navigate title=navigate>navigation algorithm</a>, use <var title="">address</var> as the
    <a href=#override-url>override URL</a>.</p>

   </li>


  </ol><h4 id=the-document-object><span class=secno>3.1.1 </span>The <code><a href=#document>Document</a></code> object</h4>

  <p>The DOM specification defines a <code title="DOM Document"><a href=#dom-document>Document</a></code> interface, which
  this specification extends significantly:</p>

  <pre class=idl>enum <dfn id=documentreadystate>DocumentReadyState</dfn> { "loading", "interactive", "complete" };

[OverrideBuiltins]
partial /*sealed*/ interface <dfn id=document>Document</dfn> {
  // <a href=#resource-metadata-management>resource metadata management</a>
  [PutForwards=<a href=#dom-url-href title=dom-url-href>href</a>, Unforgeable] readonly attribute <a href=#location>Location</a>? <a href=#dom-document-location title=dom-document-location>location</a>;
           attribute DOMString <a href=#dom-document-domain title=dom-document-domain>domain</a>;
  readonly attribute DOMString <a href=#dom-document-referrer title=dom-document-referrer>referrer</a>;
           attribute DOMString <a href=#dom-document-cookie title=dom-document-cookie>cookie</a>;
  readonly attribute DOMString <a href=#dom-document-lastmodified title=dom-document-lastModified>lastModified</a>;
  readonly attribute <a href=#documentreadystate>DocumentReadyState</a> <a href=#dom-document-readystate title=dom-document-readyState>readyState</a>;

  // <a href=#dom-tree-accessors>DOM tree accessors</a>
  <a href=#dom-document-nameditem title=dom-document-namedItem>getter</a> object (DOMString name);
           attribute DOMString <a href=#document.title title=dom-document-title>title</a>;
           attribute DOMString <a href=#dom-document-dir title=dom-document-dir>dir</a>;
           attribute <a href=#htmlelement>HTMLElement</a>? <a href=#dom-document-body title=dom-document-body>body</a>;
  readonly attribute <a href=#htmlheadelement>HTMLHeadElement</a>? <a href=#dom-document-head title=dom-document-head>head</a>;
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-images title=dom-document-images>images</a>;
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-embeds title=dom-document-embeds>embeds</a>;
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-plugins title=dom-document-plugins>plugins</a>;
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-links title=dom-document-links>links</a>;
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-forms title=dom-document-forms>forms</a>;
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-scripts title=dom-document-scripts>scripts</a>;
  NodeList <a href=#dom-document-getelementsbyname title=dom-document-getElementsByName>getElementsByName</a>(DOMString elementName);
  NodeList <a href=#dom-document-getitems title=dom-document-getItems>getItems</a>(optional DOMString typeNames = ""); // <a href=#microdata>microdata</a>
  readonly attribute <a href=#domelementmap>DOMElementMap</a> <a href=#dom-document-csselementmap title=dom-document-cssElementMap>cssElementMap</a>;
  readonly attribute <a href=#htmlscriptelement>HTMLScriptElement</a>? <a href=#dom-document-currentscript title=dom-document-currentScript>currentScript</a>;

  // <a href=#dynamic-markup-insertion>dynamic markup insertion</a>
  <a href=#document>Document</a> <a href=#dom-document-open title=dom-document-open>open</a>(optional DOMString type = "text/html", optional DOMString replace = "");
  <a href=#windowproxy>WindowProxy</a> <a href=#dom-document-open title=dom-document-open>open</a>(DOMString url, DOMString name, DOMString features, optional boolean replace = false);
  void <a href=#dom-document-close title=dom-document-close>close</a>();
  void <a href=#dom-document-write title=dom-document-write>write</a>(DOMString... text);
  void <a href=#dom-document-writeln title=dom-document-writeln>writeln</a>(DOMString... text);

  // <a href=#editing>user interaction</a>
  readonly attribute <a href=#windowproxy>WindowProxy</a>? <a href=#dom-document-defaultview title=dom-document-defaultView>defaultView</a>;
  readonly attribute <a href=#element>Element</a>? <a href=#dom-document-activeelement title=dom-document-activeElement>activeElement</a>;
  boolean <a href=#dom-document-hasfocus title=dom-document-hasFocus>hasFocus</a>();
           attribute DOMString <a href=#designMode title=dom-document-designMode>designMode</a>;
  boolean <a href=#execCommand title=dom-document-execCommand>execCommand</a>(DOMString commandId, optional boolean showUI = false, optional DOMString value = "");
  boolean <a href=#dom-document-querycommandenabled title=dom-document-queryCommandEnabled>queryCommandEnabled</a>(DOMString commandId);
  boolean <a href=#dom-document-querycommandindeterm title=dom-document-queryCommandIndeterm>queryCommandIndeterm</a>(DOMString commandId);
  boolean <a href=#dom-document-querycommandstate title=dom-document-queryCommandState>queryCommandState</a>(DOMString commandId);
  boolean <a href=#dom-document-querycommandsupported title=dom-document-queryCommandSupported>queryCommandSupported</a>(DOMString commandId);
  DOMString <a href=#dom-document-querycommandvalue title=dom-document-queryCommandValue>queryCommandValue</a>(DOMString commandId);
  readonly attribute <a href=#htmlcollection>HTMLCollection</a> <a href=#dom-document-commands title=dom-document-commands>commands</a>;

  // special <a href=#event-handler-idl-attributes>event handler IDL attributes</a> that only apply to Document objects
  [LenientThis] attribute <a href=#eventhandler>EventHandler</a> <a href=#handler-onreadystatechange title=handler-onreadystatechange>onreadystatechange</a>;

  // <a href="#Document-partial">also has obsolete members</a>
};
<a href=#document>Document</a> implements <a href=#globaleventhandlers>GlobalEventHandlers</a>;</pre>



  <h4 id=resource-metadata-management><span class=secno>3.1.2 </span><dfn>Resource metadata management</dfn></h4>

  <dl class=domintro><dt><var title="">document</var> . <code title=dom-document-referrer><a href=#dom-document-referrer>referrer</a></code></dt>
   <dd>

    <p>Returns <a href="#the-document's-address" title="the document's address">the address</a> of the <code><a href=#document>Document</a></code>
    from which the user navigated to this one, unless it was blocked or there was no such document,
    in which case it returns the empty string.</p>

    <p>The <code title=rel-noreferrer><a href=#link-type-noreferrer>noreferrer</a></code> link type can be used to block the
    referrer.</p>

   </dd>

  </dl><div class=impl>

  <p>The <dfn id=dom-document-referrer title=dom-document-referrer><code>referrer</code></dfn> attribute must return
  <a href="#the-document's-referrer">the document's referrer</a>.</p>

  </div>

  <p class=note>In the case of HTTP, the <code title=dom-document-referrer><a href=#dom-document-referrer>referrer</a></code> IDL
  attribute will match the <code title=http-referer>Referer</code> (sic) header that was sent when
  <a href=#fetch title=fetch>fetching</a> the current page.</p>

  <p class=note>Typically user agents are configured to not report referrers in the case where the
  referrer uses an encrypted protocol and the current page does not (e.g. when navigating from an
  <code title="">https:</code> page to an <code title="">http:</code> page).</p>

  <hr><dl class=domintro><dt><var title="">document</var> . <code title=dom-document-cookie><a href=#dom-document-cookie>cookie</a></code> [ = <var title="">value</var> ]</dt>
   <dd>

    <p>Returns the HTTP cookies that apply to the <code><a href=#document>Document</a></code>. If there are no cookies or
    cookies can't be applied to this resource, the empty string will be returned.</p>

    <p>Can be set, to add a new cookie to the element's set of HTTP cookies.</p>

    <p>If the contents are <a href=#sandboxed-origin-browsing-context-flag title="sandboxed origin browsing context flag">sandboxed into a
    unique origin</a> (e.g. in an <code><a href=#the-iframe-element>iframe</a></code> with the <code title=attr-iframe-sandbox><a href=#attr-iframe-sandbox>sandbox</a></code> attribute), a <code><a href=#securityerror>SecurityError</a></code> exception
    will be thrown on getting and setting.</p>

   </dd>

  </dl><div class=impl>

  <p>The <dfn id=dom-document-cookie title=dom-document-cookie><code>cookie</code></dfn> attribute represents the cookies
  of the resource identified by <a href="#the-document's-address">the document's address</a>.</p>

  <p>A <code><a href=#document>Document</a></code> object that falls into one of the following conditions is a
  <dfn id=cookie-averse-document-object>cookie-averse <code>Document</code> object</dfn>:</p>

  <ul><li>A <code><a href=#document>Document</a></code> that has no <a href=#browsing-context>browsing context</a>.</li>

   <li>A <code><a href=#document>Document</a></code> whose <a href="#the-document's-address" title="the document's address">address</a> does not
   use a server-based naming authority.</li>

  </ul><!--Other specifications can also define <code>Document</code> objects as being <span
  title="cookie-averse Document object">cookie-averse <code>Document</code> objects</span>.--><p id=sandboxCookies>On getting, if the document is a <a href=#cookie-averse-document-object>cookie-averse <code>Document</code>
  object</a>, then the user agent must return the empty string. Otherwise, if the
  <code><a href=#document>Document</a></code>'s <a href=#origin>origin</a> is not a scheme/host/port tuple, the user agent must
  throw a <code><a href=#securityerror>SecurityError</a></code> exception. Otherwise, the user agent must first <a href=#obtain-the-storage-mutex>obtain
  the storage mutex</a> and then return the cookie-string for <a href="#the-document's-address">the document's address</a>
  for a "non-HTTP" API, decoded using the <a href=#utf-8-decoder>UTF-8 decoder</a>. <a href=#refsCOOKIES>[COOKIES]</a>
  <a href=#fingerprinting-vector class=fingerprint title="fingerprinting vector"><img src=http://images.whatwg.org/fingerprint.png width=46 alt="(This is a fingerprinting vector.)" height=64></a>
  </p>

  <p>On setting, if the document is a <a href=#cookie-averse-document-object>cookie-averse <code>Document</code> object</a>, then
  the user agent must do nothing. Otherwise, if the <code><a href=#document>Document</a></code>'s <a href=#origin>origin</a> is
  not a scheme/host/port tuple, the user agent must throw a <code><a href=#securityerror>SecurityError</a></code> exception.
  Otherwise, the user agent must <a href=#obtain-the-storage-mutex>obtain the storage mutex</a> and then act as it would when
  <a href=#receives-a-set-cookie-string title="receives a set-cookie-string">receiving a set-cookie-string</a> for <a href="#the-document's-address">the
  document's address</a> via a "non-HTTP" API, consisting of the new value encoded as UTF-8. <a href=#refsCOOKIES>[COOKIES]</a> <a href=#refsENCODING>[ENCODING]</a></p>

  <p class=note>Since the <code title=dom-document-cookie><a href=#dom-document-cookie>cookie</a></code> attribute is accessible
  across frames, the path restrictions on cookies are only a tool to help manage which cookies are
  sent to which parts of the site, and are not in any way a security feature.</p>

  <hr></div>

  <dl class=domintro><dt><var title="">document</var> . <code title=dom-document-lastmodified><a href=#dom-document-lastmodified>lastModified</a></code></dt>
   <dd>
    <p>Returns the date of the last modification to the document, as reported by the server, in the
    form "<code title="">MM/DD/YYYY&nbsp;hh:mm:ss</code>", in the user's local time zone.</p>
    <p>If the last modification date is not known, the current time is returned instead.</p>
   </dd>

  </dl><div class=impl>

  <p>The <dfn id=dom-document-lastmodified title=dom-document-lastModified><code>lastModified</code></dfn> attribute, on
  getting, must return the date and time of the <code><a href=#document>Document</a></code>'s source file's last
  modification, in the user's local time zone, in the following format:</p>

  <ol><li> The month component of the date. </li>

   <li> A U+002F SOLIDUS character (/). </li>

   <li> The day component of the date. </li>

   <li> A U+002F SOLIDUS character (/). </li>

   <li> The year component of the date. </li>

   <li> A U+0020 SPACE character. </li>

   <li> The hours component of the time. </li>

   <li> A U+003A COLON character (:). </li>

   <li> The minutes component of the time. </li>

   <li> A U+003A COLON character (:). </li>

   <li> The seconds component of the time. </li>

  </ol><p>All the numeric components above, other than the year, must be given as two <a href=#ascii-digits>ASCII
  digits</a> representing the number in base ten, zero-padded if necessary. The year must be
  given as the shortest possible string of four or more <a href=#ascii-digits>ASCII digits</a> representing the
  number in base ten, zero-padded if necessary.</p>

  <p>The <code><a href=#document>Document</a></code>'s source file's last modification date and time must be derived from
  relevant features of the networking protocols used, e.g. from the value of the HTTP <code title=http-last-modified>Last-Modified</code> header of the document, or from metadata in the
  file system for local files. If the last modification date and time are not known, the attribute
  must return the current date and time in the above format.</p>

  <hr></div>

  <dl class=domintro><dt><var title="">document</var> . <code title=dom-document-readyState><a href=#dom-document-readystate>readyState</a></code></dt>
   <dd>
    <p>Returns "<code title="">loading</code>" while the <code><a href=#document>Document</a></code> is loading, "<code title="">interactive</code>" once it is finished parsing but still loading sub-resources, and
    "<code title="">complete</code>" once it has loaded.</p>
    <p>The <code title=event-readystatechange><a href=#event-readystatechange>readystatechange</a></code> event fires on the
    <code><a href=#document>Document</a></code> object when this value changes.</p>
   </dd>

  </dl><div class=impl>

  <p>Each document has a <dfn id=current-document-readiness>current document readiness</dfn>. When a <code><a href=#document>Document</a></code> object
  is created, it must have its <a href=#current-document-readiness>current document readiness</a> set to the string "<code title="">loading</code>" if the document is associated with an <a href=#html-parser>HTML parser</a>, an
  <a href=#xml-parser>XML parser</a>, or an XSLT processor, and to the string "<code title="">complete</code>"
  otherwise. Various algorithms during page loading affect this value. When the value is set, the
  user agent must <a href=#fire-a-simple-event>fire a simple event</a> named <code title=event-readystatechange><a href=#event-readystatechange>readystatechange</a></code> at the <code><a href=#document>Document</a></code> object.</p>

  <p>A <code><a href=#document>Document</a></code> is said to have an <dfn id=active-parser>active parser</dfn> if it is associated with an
  <a href=#html-parser>HTML parser</a> or an <a href=#xml-parser>XML parser</a> that has not yet been <a href=#stop-parsing title="stop
  parsing">stopped</a> or <a href=#abort-a-parser title="abort a parser">aborted</a>.</p>

  <p>The <dfn id=dom-document-readystate title=dom-document-readyState><code>readyState</code></dfn> IDL attribute must, on
  getting, return the <a href=#current-document-readiness>current document readiness</a>.</p>

  </div>



  <h4 id=dom-tree-accessors><span class=secno>3.1.3 </span><dfn>DOM tree accessors</dfn></h4>

  <p><dfn id=the-html-element-0>The <code>html</code> element</dfn> of a document is the document's root element, if there
  is one and it's an <code><a href=#the-html-element>html</a></code> element, or null otherwise.</p>

  <hr><dl class=domintro><dt><var title="">document</var> . <code title=dom-document-head><a href=#dom-document-head>head</a></code></dt>
   <dd>
    <p>Returns <a href=#the-head-element-0>the <code>head</code> element</a>.</p>
   </dd>

  </dl><p><dfn id=the-head-element-0>The <code>head</code> element</dfn> of a document is the first <code><a href=#the-head-element>head</a></code> element
  that is a child of <a href=#the-html-element-0>the <code>html</code> element</a>, if there is one, or null
  otherwise.</p>

  <div class=impl>

  <p>The <dfn id=dom-document-head title=dom-document-head><code>head</code></dfn> attribute, on getting, must return
  <a href=#the-head-element-0>the <code>head</code> element</a> of the document (a <code><a href=#the-head-element>head</a></code> element or
  null).</p>

  </div>

  <hr><dl class=domintro><dt><var title="">document</var> . <code title=dom-document-title><a href=#document.title>title</a></code> [ = <var title="">value</var> ]</dt>
   <dd>

    <p>Returns the document's title, as given by <a href=#the-title-element-0>the <code>title</code> element</a> for
    HTML and as given by the SVG <code title="">title</code> element for SVG.</p>

    <p>Can be set, to update the document's title. If there is no appropriate element to update, the
    new value is ignored.</p>

   </dd>

  </dl><p><dfn id=the-title-element-0>The <code>title</code> element</dfn> of a document is the first <code><a href=#the-title-element>title</a></code> element
  in the document (in tree order), if there is one, or null otherwise.</p>

  <div class=impl>

  <p>The <dfn id=document.title title=dom-document-title><code>title</code></dfn> attribute
  must, on getting, run the following algorithm:</p>

  <ol><li><p>If the <a href=#root-element>root element</a> is an <code><a href=#svg>svg</a></code> element in the <a href=#svg-namespace>SVG
   namespace</a>, then let <var title="">value</var> be a concatenation of the data of all the
   child <code><a href=#text>Text</a></code> nodes of the first <code title="">title</code> element in the <a href=#svg-namespace>SVG
   namespace</a> that is a child of the <a href=#root-element>root element</a>. <a href=#refsSVG>[SVG]</a></li>

   <li><p>Otherwise, let <var title="">value</var> be a concatenation of the data of all the child
   <code><a href=#text>Text</a></code> nodes of <a href=#the-title-element-0>the <code>title</code> element</a>, in <a href=#tree-order>tree
   order</a>, or the empty string if <a href=#the-title-element-0>the <code>title</code> element</a> is
   null.</li>

   <li><p><a href=#strip-and-collapse-whitespace>Strip and collapse whitespace</a> in <var title="">value</var>.</li>

   <li><p>Return <var title="">value</var>.</li>

  </ol><p>On setting, the steps corresponding to the first matching condition in the following list must
  be run:</p>

  <dl class=switch><dt>If the <a href=#root-element>root element</a> is an <code><a href=#svg>svg</a></code> element in the <a href=#svg-namespace>SVG
   namespace</a> <a href=#refsSVG>[SVG]</a></dt>

   <dd>

    <ol><li><p>Let <var title="">element</var> be the first <code title="">title</code> element in
     the <a href=#svg-namespace>SVG namespace</a> that is a child of the <a href=#root-element>root element</a>, if any. If
     there isn't one, create a <code title="">title</code> element in the <a href=#svg-namespace>SVG
     namespace</a>, append it to the <a href=#root-element>root element</a>, and let <var title="">element</var> be that element. <a href=#refsSVG>[SVG]</a></li>

     <li><p>Act as if the <code><a href=#textcontent>textContent</a></code> IDL attribute of <var title="">element</var> was
     set to the new value being assigned.</li>

    </ol></dd>

   <dt>If the <a href=#root-element>root element</a> is in the <a href=#html-namespace-0>HTML namespace</a></dt>

   <dd>

    <ol><li><p>If <a href=#the-title-element-0>the <code>title</code> element</a> is null and <a href=#the-head-element-0>the <code>head</code>
     element</a> is null, then abort these steps.</li>

     <li><p>If <a href=#the-title-element-0>the <code>title</code> element</a> is null, then create a new
     <code><a href=#the-title-element>title</a></code> element and <a href=#concept-node-append title=concept-node-append>append</a> it to <a href=#the-head-element-0>the
     <code>head</code> element</a>, and let <var title="">element</var> be the newly created
     element; otherwise, let <var title="">element</var> be <a href=#the-title-element-0>the <code>title</code>
     element</a>.</li>

     <li><p>Act as if the <code><a href=#textcontent>textContent</a></code> IDL attribute of <var title="">element</var> was
     set to the new value being assigned.</li>

    </ol></dd>

   <dt>Otherwise</dt>

   <dd>

    <p>Do nothing.</p>

   </dd>

  </dl></div>

  <hr><dl class=domintro><dt><var title="">document</var> . <code title=dom-document-body><a href=#dom-document-body>body</a></code> [ = <var title="">value</var> ]</dt>
   <dd>

    <p>Returns <a href=#the-body-element-0>the body element</a>.</p>

    <p>Can be set, to replace <a href=#the-body-element-0>the body element</a>.</p>

    <p>If the new value is not a <code><a href=#the-body-element>body</a></code> or <code><a href=#frameset>frameset</a></code> element, this will throw
    a <code><a href=#hierarchyrequesterror>HierarchyRequestError</a></code> exception.</p>

   </dd>

  </dl><p><dfn id=the-body-element-0>The body element</dfn> of a document is the first child of <a href=#the-html-element-0>the <code>html</code>
  element</a> that is either a <code><a href=#the-body-element>body</a></code> element or a <code><a href=#frameset>frameset</a></code> element. If
  there is no such element, it is null.</p>

  <div class=impl>

  <p>The <dfn id=dom-document-body title=dom-document-body><code>body</code></dfn> attribute, on getting, must return
  <a href=#the-body-element-0>the body element</a> of the document (either a <code><a href=#the-body-element>body</a></code> element, a
  <code><a href=#frameset>frameset</a></code> element, or null). On setting, the following algorithm must be run:</p>

  <ol><!-- if changes are requested:
    http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp
    search for ::GetBody ::SetBody
    http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp
    search for ::setBody
    http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp
    search for ::body
   --><li>If the new value is not a <code><a href=#the-body-element>body</a></code> or <code><a href=#frameset>frameset</a></code> element, then throw a
   <code><a href=#hierarchyrequesterror>HierarchyRequestError</a></code> exception and abort these steps.</li>

   <li>Otherwise, if the new value is the same as <a href=#the-body-element-0>the body element</a>, do nothing. Abort
   these steps.</li>

   <li>Otherwise, if <a href=#the-body-element-0>the body element</a> is not null, then replace that element with the
   new value in the DOM, as if the root element's <code title="">replaceChild()</code> method had
   been called with the new value and <a href=#the-body-element-0 title="the body element">the incumbent body
   element</a> as its two arguments respectively, then abort these steps.</li>

   <li>Otherwise, if there is no root element, throw a <code><a href=#hierarchyrequesterror>HierarchyRequestError</a></code> exception
   and abort these steps.</li>

   <li>Otherwise, <a href=#the-body-element-0>the body element</a> is null, but there's a root element. Append
   the new value to the root element.</li>

  </ol></div>

  <hr><dl class=domintro><dt><var title="">document</var> . <code title=dom-document-images><a href=#dom-document-images>images</a></code></dt>
   <dd>
    <p>Returns an <code><a href=#htmlcollection>HTMLCollection</a></code> of the <code><a href=#the-img-element>img</a></code> elements in the <code><a href=#document>Document</a></code>.</p>
   </dd>

   <dt><var title="">document</var> . <code title=dom-document-embeds><a href=#dom-document-embeds>embeds</a></code></dt>
   <dt><var title="">document</var> . <code title=dom-document-plugins><a href=#dom-document-plugins>plugins</a></code></dt>
   <dd>
    <p>Return an <code><a href=#htmlcollection>HTMLCollection</a></code> of the <code><a href=#the-embed-element>embed</a></code> elements in the <code><a href=#document>Document</a></code>.</p>
   </dd>

   <dt><var title="">document</var> . <code title=dom-document-links><a href=#dom-document-links>links</a></code></dt>
   <dd>
    <p>Returns an <code><a href=#htmlcollection>HTMLCollection</a></code> of the <code><a href=#the-a-element>a</a></code> and <code><a href=#the-area-element>area</a></code> elements
    in the <code><a href=#document>Document</a></code> that have <code title=attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code>
    attributes.</p>
   </dd>

   <dt><var title="">document</var> . <code title=dom-document-forms><a href=#dom-document-forms>forms</a></code></dt>
   <dd>
    <p>Return an <code><a href=#htmlcollection>HTMLCollection</a></code> of the <code><a href=#the-form-element>form</a></code> elements in the <code><a href=#document>Document</a></code>.</p>
   </dd>

   <dt><var title="">document</var> . <code title=dom-document-scripts><a href=#dom-document-scripts>scripts</a></code></dt>
   <dd>
    <p>Return an <code><a href=#htmlcollection>HTMLCollection</a></code> of the <code><a href=#the-script-element>script</a></code> elements in the <code><a href=#document>Document</a></code>.</p>
   </dd>

  </dl><div class=impl>

  <!-- these all return the same object each time because of a rule in the collection section -->

  <p>The <dfn id=dom-document-images title=dom-document-images><code>images</code></dfn> attribute must return an
  <code><a href=#htmlcollection>HTMLCollection</a></code> rooted at the <code><a href=#document>Document</a></code> node, whose filter matches only
  <code><a href=#the-img-element>img</a></code> elements.</p>

  <p>The <dfn id=dom-document-embeds title=dom-document-embeds><code>embeds</code></dfn> attribute must return an
  <code><a href=#htmlcollection>HTMLCollection</a></code> rooted at the <code><a href=#document>Document</a></code> node, whose filter matches only
  <code><a href=#the-embed-element>embed</a></code> elements.</p>

  <p>The <dfn id=dom-document-plugins title=dom-document-plugins><code>plugins</code></dfn> attribute must return the
  same object as that returned by the <code title=dom-document-embeds><a href=#dom-document-embeds>embeds</a></code>
  attribute.</p>

  <p>The <dfn id=dom-document-links title=dom-document-links><code>links</code></dfn> attribute must return an
  <code><a href=#htmlcollection>HTMLCollection</a></code> rooted at the <code><a href=#document>Document</a></code> node, whose filter matches only
  <code><a href=#the-a-element>a</a></code> elements with <code title=attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code> attributes and
  <code><a href=#the-area-element>area</a></code> elements with <code title=attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code> attributes.</p>

  <p>The <dfn id=dom-document-forms title=dom-document-forms><code>forms</code></dfn> attribute must return an
  <code><a href=#htmlcollection>HTMLCollection</a></code> rooted at the <code><a href=#document>Document</a></code> node, whose filter matches only
  <code><a href=#the-form-element>form</a></code> elements.</p>

  <p>The <dfn id=dom-document-scripts title=dom-document-scripts><code>scripts</code></dfn> attribute must return an
  <code><a href=#htmlcollection>HTMLCollection</a></code> rooted at the <code><a href=#document>Document</a></code> node, whose filter matches only
  <code><a href=#the-script-element>script</a></code> elements.</p>

  <hr></div>

  <dl class=domintro><dt><var title="">collection</var> = <var title="">document</var> . <code title=dom-document-getElementsByName><a href=#dom-document-getelementsbyname>getElementsByName</a></code>(<var title="">name</var>)</dt>
   <dd>

    <p>Returns a <code><a href=#nodelist>NodeList</a></code> of elements in the <code><a href=#document>Document</a></code> that have a <code title="">name</code> attribute with the value <var title="">name</var>.</p>

   </dd>

  </dl><div class=impl>

  <p>The <dfn id=dom-document-getelementsbyname title=dom-document-getElementsByName><code>getElementsByName(<var title="">name</var>)</code></dfn> method takes a string <var title="">name</var>, and must
  return a <a href=#live>live</a> <code><a href=#nodelist>NodeList</a></code> containing all the <a href=#html-elements>HTML elements</a> in
  that document that have a <code title="">name</code> attribute whose value is equal to the <var title="">name</var> argument (in a <a href=#case-sensitive>case-sensitive</a> manner), in <a href=#tree-order>tree
  order</a>. When the method is invoked on a <code><a href=#document>Document</a></code> object again with the same
  argument, the user agent may return the same as the object returned by the earlier call. In other
  cases, a new <code><a href=#nodelist>NodeList</a></code> object must be returned.</p>

  </div>

  <hr><dl class=domintro><dt><var title="">element</var> . <code title=dom-document-cssElementMap><a href=#dom-document-csselementmap>cssElementMap</a></code></dt>
   <dd>

    <p>Returns a <code><a href=#domelementmap>DOMElementMap</a></code> object for the <code><a href=#document>Document</a></code> representing the
    current <a href=#css-element-reference-identifier title="CSS element reference identifier">CSS element reference
    identifiers</a>.</p>

   </dd>

  </dl><div class=impl>

  <p>The <dfn id=dom-document-csselementmap title=dom-document-cssElementMap><code>cssElementMap</code></dfn> IDL attribute
  allows authors to define <a href=#css-element-reference-identifier title="CSS element reference identifier">CSS element reference
  identifiers</a>, which are used in certain CSS features to override the normal <a href=#concept-id title=concept-id>ID</a>-based mapping. <a href=#refsCSSIMAGES>[CSSIMAGES]</a></p>

  <p>When a <code><a href=#document>Document</a></code> is created, it must be associated with an initially-empty <dfn id=css-id-overrides-list>CSS
  ID overrides list</dfn>, which consists of a list of mappings each of which consists of a string
  name mapped to an <code><a href=#element>Element</a></code> node.</p>

  <p>Each entry in the <a href=#css-id-overrides-list>CSS ID overrides list</a>, while it is in the list and is either
  <a href=#in-a-document title="in a Document">in the <code>Document</code></a> or is an <code><a href=#the-img-element>img</a></code>,
  <code><a href=#the-video-element>video</a></code>, or <code><a href=#the-canvas-element>canvas</a></code> element, defines a <a href=#css-element-reference-identifier>CSS element reference
  identifier</a> mapping the given name to the given <code><a href=#element>Element</a></code>. <a href=#refsCSSIMAGES>[CSSIMAGES]</a></p>

  <p>On getting, the <code title=dom-document-cssElementMap><a href=#dom-document-csselementmap>cssElementMap</a></code> IDL attribute
  must return a <code><a href=#domelementmap>DOMElementMap</a></code> object, associated with the following algorithms, which
  expose the current mappings:</p>

  <dl><dt>The algorithm for getting the list of name-element mappings</dt>

   <dd>

    <p>Return the <code><a href=#document>Document</a></code>'s <a href=#css-id-overrides-list>CSS ID overrides list</a>, maintaining the order
    in which the entries were originally added to the list.</p>

   </dd>

   <dt>The algorithm for mapping a name to a certain element</dt>

   <dd>

    <p>Let <var title="">name</var> be the name passed to the algorithm and <var title="">element</var> be the <code><a href=#element>Element</a></code> passed to the algorithm.</p>

    <p>If <var title="">element</var> is null, run the algorithm for deleting mappings by name,
    passing it <var title="">name</var>.</p>

    <p>Otherwise, if there is an entry in the <code><a href=#document>Document</a></code>'s <a href=#css-id-overrides-list>CSS ID overrides
    list</a> whose name is <var title="">name</var>, replace its current value with <var title="">element</var>.</p>

    <p>Otherwise, add a mapping to the <code><a href=#document>Document</a></code>'s <a href=#css-id-overrides-list>CSS ID overrides list</a>
    whose name is <var title="">name</var> and whose element is <var title="">element</var>.</p>

   </dd>

   <dt>The algorithm for deleting mappings by name</dt>

   <dd>

    <p>If there is an entry in the <code><a href=#document>Document</a></code>'s <a href=#css-id-overrides-list>CSS ID overrides list</a> whose
    name is the name passed to this algorithm, remove it. This also undefines the <a href=#css-element-reference-identifier>CSS element
    reference identifier</a> for that name. <a href=#refsCSSIMAGES>[CSSIMAGES]</a></p>

   </dd>

  </dl><p>The same object must be returned each time.</p>

  </div>

  <hr><dl class=domintro><dt><var title="">document</var> . <code title=dom-document-currentScript><a href=#dom-document-currentscript>currentScript</a></code></dt>
   <dd>

    <p>Returns the <code><a href=#the-script-element>script</a></code> element that is currently executing. In the case of reentrant
    <code><a href=#the-script-element>script</a></code> execution, returns the one that most recently started executing amongst
    those that have not yet finished executing.</p>

    <p>Returns null if the <code><a href=#document>Document</a></code> is not currently executing a <code><a href=#the-script-element>script</a></code>
    element (e.g. because the running script is an event handler, or a timeout).</p>

   </dd>

  </dl><div class=impl>

  <p>The <dfn id=dom-document-currentscript title=dom-document-currentScript><code>currentScript</code></dfn> attribute, on
  getting, must return the value to which it was most recently initialized. When the
  <code><a href=#document>Document</a></code> is created, the <code title=dom-document-currentScript><a href=#dom-document-currentscript>currentScript</a></code> must be initialised to null.</p>

  </div>

  <div class=impl>

  <hr><p id=dom-document-namedItem-which>The <code><a href=#document>Document</a></code> interface <a href=#support-named-properties title="support
  named properties">supports named properties</a>. The <a href=#supported-property-names>supported property names</a> at
  any moment consist of the values of the <code title="">name</code> content attributes of
  all the
    <code><a href=#the-applet-element>applet</a></code>,
    <a href=#exposed>exposed</a> <code><a href=#the-embed-element>embed</a></code>,
    <code><a href=#the-form-element>form</a></code>,
    <code><a href=#the-iframe-element>iframe</a></code>,
    <code><a href=#the-img-element>img</a></code>, and
    <a href=#exposed>exposed</a> <code><a href=#the-object-element>object</a></code>
  elements in the <code><a href=#document>Document</a></code> that have non-empty <code title="">name</code> content
  attributes, and the values of the <code title=attr-id><a href=#the-id-attribute>id</a></code> content attributes of all the
    <code><a href=#the-applet-element>applet</a></code> and
    <a href=#exposed>exposed</a> <code><a href=#the-object-element>object</a></code>
  elements in the <code><a href=#document>Document</a></code> that have non-empty <code title=attr-id><a href=#the-id-attribute>id</a></code> content
  attributes, and the values of the <code title=attr-id><a href=#the-id-attribute>id</a></code> content attributes of all the
    <code><a href=#the-img-element>img</a></code>
  elements in the <code><a href=#document>Document</a></code> that have both non-empty <code title=attr-name>name</code> content attributes and non-empty <code title=attr-id><a href=#the-id-attribute>id</a></code>
  content attributes. The <a href=#supported-property-names>supported property names</a> must be in <a href=#tree-order>tree order</a>,
  ignoring later duplicates, with values from <code title=attr-id><a href=#the-id-attribute>id</a></code> attributes coming
  before values from <code title="">name</code> attributes when the same element contributes
  both.</p>

  <p>To <a href=#determine-the-value-of-a-named-property>determine the value of a named property</a> <var title="">name</var> when <dfn id=dom-document-nameditem title=dom-document-namedItem>the <code>Document</code> object is indexed for property
  retrieval</dfn>, the user agent must return the value obtained using the following steps:</p>

  <ol><li>

    <p>Let <var title="">elements</var> be the list of <a href=#dom-document-nameditem-filter title=dom-document-namedItem-filter>named elements</a> with the name <var title="">name</var> in the <code><a href=#document>Document</a></code>.

    <p class=note>There will be at least one such element, by definition.<!-- (If there wasn't,
    then this algorithm wouldn't have been invoked by Web IDL.) --></p>

   </li>

   <li>

    <p>If <var title="">elements</var> has only one element, and that element is an
    <code><a href=#the-iframe-element>iframe</a></code> element, then return the <code><a href=#windowproxy>WindowProxy</a></code> object of the <a href=#nested-browsing-context>nested
    browsing context</a> represented by that <code><a href=#the-iframe-element>iframe</a></code> element, and abort these
    steps.</p>

   </li>

   <li>

    <p>Otherwise, if <var title="">elements</var> has only one element, return that element and
    abort these steps.</p>

   </li>

   <li>

    <p>Otherwise return an <code><a href=#htmlcollection>HTMLCollection</a></code> rooted at the <code><a href=#document>Document</a></code> node,
    whose filter matches only <a href=#dom-document-nameditem-filter title=dom-document-namedItem-filter>named elements</a> with
    the name <var title="">name</var>.</p> <!-- the same one each time is returned, because of the
    rule under collections -->

   </li>

  <!--
  Note that this named getter overrides built-in properties, as in:
     http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%20name%3Dbody%3E%3C%2Fiframe%3E%3Cscript%3Ew(document.body)%3C%2Fscript%3E
  This is what the "OverrideBuiltins" bit means in the IDL.
  -->

  </ol><p><dfn id=dom-document-nameditem-filter title=dom-document-nameditem-filter>Named elements</dfn> with the name <var title="">name</var>, for the purposes of the above algorithm, are those that are either:</p>

  <ul><li><code><a href=#the-applet-element>applet</a></code>, <a href=#exposed>exposed</a> <code><a href=#the-embed-element>embed</a></code>, <code><a href=#the-form-element>form</a></code>,
   <code><a href=#the-iframe-element>iframe</a></code>, <code><a href=#the-img-element>img</a></code>, or <a href=#exposed>exposed</a> <code><a href=#the-object-element>object</a></code> elements that
   have a <code title=attr-name>name</code> content attribute whose value is <var title="">name</var>, or</li>

   <li><code><a href=#the-applet-element>applet</a></code> or <a href=#exposed>exposed</a> <code><a href=#the-object-element>object</a></code> elements that have an <code title=attr-id><a href=#the-id-attribute>id</a></code> content attribute whose value is <var title="">name</var>, or</li>

   <li><code><a href=#the-img-element>img</a></code> elements that have an <code title=attr-id><a href=#the-id-attribute>id</a></code> content attribute
   whose value is <var title="">name</var>, and that have a non-empty <code title=attr-name>name</code>
   content attribute present also.</li>

  </ul><p>An <code><a href=#the-embed-element>embed</a></code> or <code><a href=#the-object-element>object</a></code> element is said to be <dfn id=exposed>exposed</dfn> if it has
  no <a href=#exposed>exposed</a> <code><a href=#the-object-element>object</a></code> ancestor, and, for <code><a href=#the-object-element>object</a></code> elements, is
  additionally either not showing its <a href=#fallback-content>fallback content</a> or has no <code><a href=#the-object-element>object</a></code> or
  <code><a href=#the-embed-element>embed</a></code> descendants.</p>

  </div>

  <hr><p class=note>The <code title=dom-document-dir><a href=#dom-document-dir>dir</a></code> attribute on the
  <code><a href=#document>Document</a></code> interface is defined along with the <code title=attr-dir><a href=#the-dir-attribute>dir</a></code>
  content attribute.</p>



  <div class=impl> <!-- very deprecated API; use XHR instead -->

  <h4 id=loading-xml-documents><span class=secno>3.1.4 </span>Loading XML documents</h4>

  <pre class=idl>partial interface <dfn id=xmldocument>XMLDocument</dfn> {
<!--SYNCLOAD           attribute boolean <span title="dom-XMLDocument-async">async</span>;
-->  boolean <a href=#dom-xmldocument-load title=dom-XMLDocument-load>load</a>(DOMString url);
};</pre>

  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/576 -->
  <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/saved/577 -->
  <!-- http://www.hixie.ch/tests/adhoc/dom/level0/document/load/001.html -->

<!--SYNCLOAD
  <p>The <dfn title="dom-XMLDocument-async"><code>async</code></dfn> attribute must initially be
  true. On getting, it must return its current value. On setting, its current value must be changed
  to the new value.</p>
-->

  <p>The <dfn id=dom-xmldocument-load title=dom-XMLDocument-load><code>load(<var title="">url</var>)</code></dfn> method
  must run the following steps:</p>

  <ol><!--SYNCLOAD
   <li><p>If <code title="dom-XMLDocument-async">async</code> is set to false and the <var
   title="">document</var> is <span>load-blocked</span>, return false and abort these
   steps.</p></li>
--><li><p>Let <var title="">document</var> be the <code><a href=#xmldocument>XMLDocument</a></code> object on which the
   method was invoked.</li>

   <li><p><a href=#resolve-a-url title="resolve a url">Resolve</a> the method's first argument, relative to the
   <a href=#api-base-url>API base URL</a> specified by the <a href=#entry-settings-object>entry settings object</a>. If this is not
   successful, throw a <code><a href=#syntaxerror>SyntaxError</a></code> exception and abort these steps. Otherwise, let <var title="">url</var> be the resulting <a href=#absolute-url>absolute URL</a>.</li>

   <li><p>If the <a href=#origin>origin</a> of <var title="">url</var> is not the same as the
   <a href=#origin>origin</a> of <var title="">document</var>, throw a <code><a href=#securityerror>SecurityError</a></code> exception
   and abort these steps.</li>

<!--SYNCLOAD
   <li><p>If <code title="dom-XMLDocument-async">async</code> is set to false, let <var
   title="">document</var> be <dfn>load-blocked</dfn>.</p></li>
-->

   <li><p>Remove all child nodes of <var title="">document</var>, without firing any mutation
   events.</li> <!-- as of 2010-07-26, only Opera fired mutation events here. -->

   <li><p>Set the <a href=#current-document-readiness>current document readiness</a> of <var title="">document</var> to "<code title="">loading</code>".</li>

   <li><p><!--SYNCLOAD If <code title="dom-XMLDocument-async">async</code> is set to true, then
   run--> Run the remainder of these steps asynchronously, and return true from the
   method.<!--SYNCLOAD Otherwise, continue running these steps without yet returning.--></li>

   <li><p>Let <var title="">result</var> be a <code><a href=#document>Document</a></code> object.</li>

   <li><p>Let <var title="">success</var> be false.</li>

   <li><p><a href=#fetch>Fetch</a><!--FETCH--> <var title="">url</var> from the <a href=#origin>origin</a> of
   <var title="">document</var>, using the <a href=#api-referrer-source>API referrer source</a> specified by the
   <a href=#entry-settings-object>entry settings object</a>, with the <i title="">synchronous flag</i> set and the <i title="">force same-origin flag</i> set.</li>

   <li>

    <p>If the fetch attempt was successful, and the resource's <a href=#content-type title=Content-Type>Content-Type metadata</a> is an <a href=#xml-mime-type>XML MIME type</a>, then run
    these substeps:</p>

    <ol><li><p>Create a new <a href=#xml-parser>XML parser</a> associated with the <var title="">result</var>
     document.</li>

     <li><p>Pass this parser the fetched document.</li> <!-- no worries about scripts running;
     there's no browsing context for the document so scripts are automatically disabled -->

     <li><p>If there is an XML well-formedness or XML namespace well-formedness error, then remove
     all child nodes from <var title="">result</var>. Otherwise let <var title="">success</var> be
     true.</li>

    </ol></li>

   <li>

    <p><!--SYNCLOAD If <code title="dom-XMLDocument-async">async</code> is set to true, then
    <span>queue--> <a href=#queue-a-task>Queue a task</a> to run the following steps. <!--SYNCLOAD Otherwise, run
    them synchronously.--></p>

    <ol><li><p>Set the <a href=#current-document-readiness>current document readiness</a> of <var title="">document</var> to
     "<code title="">complete</code>".</li>

     <li><p>Replace all the children of <var title="">document</var> by the children of <var title="">result</var> (even if it has no children), firing mutation events as if a
     <code><a href=#documentfragment>DocumentFragment</a></code> containing the new children had been inserted.</li> <!-- as
     of 2010-07-26, both Firefox and Opera fired mutation events here. -->

     <!-- If the document doesn't have no nodes here, at time of writing, Opera would leave the new
     nodes and drop the parsed ones, while Firefox would basically abort instead, failing to fire
     the 'load' event -->

     <li><p><a href=#fire-a-simple-event>Fire a simple event</a> named <code title=event-load><a href=#event-load>load</a></code> at <var title="">document</var>.</li>

    </ol></li>
<!--SYNCLOAD
   <li><p>If <code title="dom-XMLDocument-async">async</code> was set to false when this algorithm
   started, let <var title="">document</var> be no longer <span>load-blocked</span>.</p></li>

   <li><p>If <code title="dom-XMLDocument-async">async</code> was set to false when this algorithm
   started, return <var title="">success</var>.</p></li>
-->
  </ol></div>


<!--TOPIC:HTML-->
  <h3 id=elements><span class=secno>3.2 </span>Elements</h3>

  <h4 id=semantics-0><span class=secno>3.2.1 </span>Semantics</h4>

  <p>Elements, attributes, and attribute values in HTML are defined (by this specification) to have
  certain meanings (semantics). For example, the <code><a href=#the-ol-element>ol</a></code> element represents an ordered list,
  and the <code title=attr-lang><a href=#attr-lang>lang</a></code> attribute represents the language of the content.</p>

  <p>These definitions allow HTML processors, such as Web browsers or search engines, to present and
  use documents and applications in a wide variety of contexts that the author might not have
  considered.</p>

  <div class=example>

   <p>As a simple example, consider a Web page written by an author who only considered desktop
   computer Web browsers:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;My Page&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;Welcome to my page&lt;/h1&gt;
  &lt;p&gt;I like cars and lorries and have a big Jeep!&lt;/p&gt;
  &lt;h2&gt;Where I live&lt;/h2&gt;
  &lt;p&gt;I live in a small hut on a mountain!&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

   <p>Because HTML conveys <em>meaning</em>, rather than presentation, the same
   page can also be used by a small browser on a mobile phone, without any change to the page.
   Instead of headings being in large letters as on the desktop, for example, the browser on the
   mobile phone might use the same size text for the whole the page, but with the headings in
   bold.</p>

   <p>But it goes further than just differences in screen size: the same page could equally be used
   by a blind user using a browser based around speech synthesis, which instead of displaying the
   page on a screen, reads the page to the user, e.g. using headphones. Instead of large text for
   the headings, the speech browser might use a different volume or a slower voice.</p>

   <p>That's not all, either. Since the browsers know which parts of the page are the headings, they
   can create a document outline that the user can use to quickly navigate around the document,
   using keys for "jump to next heading" or "jump to previous heading". Such features are especially
   common with speech browsers, where users would otherwise find quickly navigating a page quite
   difficult.</p>

   <p>Even beyond browsers, software can make use of this information. Search engines can use the
   headings to more effectively index a page, or to provide quick links to subsections of the page
   from their results. Tools can use the headings to create a table of contents (that is in fact how
   this very specification's table of contents is generated).</p>

   <p>This example has focused on headings, but the same principle applies to all of the semantics
   in HTML.</p>

  </div>

  <p>Authors must not use elements, attributes, or attribute values for purposes other than their
  appropriate intended semantic purpose, as doing so prevents software from correctly processing the
  page.</p>

  <div class=example>

   <p>For example, the following snippet, intended to represent the heading of a
   corporate site, is non-conforming because the second line is not intended to
   be a heading of a subsection, but merely a subheading or subtitle (a
   subordinate heading for the same section).</p>

   <pre class=bad>&lt;body&gt;
 &lt;h1&gt;ACME Corporation&lt;/h1&gt;
 &lt;h2&gt;The leaders in arbitrary fast delivery since 1920&lt;/h2&gt;
 ...</pre>

   <p>The <code><a href=#the-hgroup-element>hgroup</a></code> element is intended for these kinds of situations:</p>

   <pre>&lt;body&gt;
 &lt;hgroup&gt;
  &lt;h1&gt;ACME Corporation&lt;/h1&gt;
  &lt;h2&gt;The leaders in arbitrary fast delivery since 1920&lt;/h2&gt;
 &lt;/hgroup&gt;
 ...</pre>

  </div>

  <div class=example>

   <p>The document in this next example is similarly non-conforming, despite
   being syntactically correct, because the data placed in the cells is clearly
   not tabular data, and the <code><a href=#the-cite-element>cite</a></code> element mis-used:</p>

   <pre class=bad>&lt;!DOCTYPE HTML&gt;
&lt;html lang="en-GB"&gt;
 &lt;head&gt; &lt;title&gt; Demonstration &lt;/title&gt; &lt;/head&gt;
 &lt;body&gt;
  &lt;table&gt;
   &lt;tr&gt; &lt;td&gt; My favourite animal is the cat. &lt;/td&gt; &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td&gt;
     &mdash;&lt;a href="http://example.org/~ernest/"&gt;&lt;cite&gt;Ernest&lt;/cite&gt;&lt;/a&gt;,
     in an essay from 1992
    &lt;/td&gt;
   &lt;/tr&gt;
  &lt;/table&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

   <p>This would make software that relies on these semantics fail: for example,
   a speech browser that allowed a blind user to navigate tables in the document
   would report the quote above as a table, confusing the user; similarly, a
   tool that extracted titles of works from pages would extract "Ernest" as the
   title of a work, even though it's actually a person's name, not a title.</p>

   <p>A corrected version of this document might be:</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html lang="en-GB"&gt;
 &lt;head&gt; &lt;title&gt; Demonstration &lt;/title&gt; &lt;/head&gt;
 &lt;body&gt;
  &lt;blockquote&gt;
   &lt;p&gt; My favourite animal is the cat. &lt;/p&gt;
  &lt;/blockquote&gt;
  &lt;p&gt;
   &mdash;&lt;a href="http://example.org/~ernest/"&gt;Ernest&lt;/a&gt;,
   in an essay from 1992
  &lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>

  <p>Authors must not use elements, attributes, or attribute values that are not permitted by this
  specification or <a href=#other-applicable-specifications>other applicable specifications</a>, as doing so makes it significantly
  harder for the language to be extended in the future.</p>

  <div class=example>

   <p>In the next example, there is a non-conforming attribute value ("carpet") and a non-conforming
   attribute ("texture"), which is not permitted by this specification:</p>

   <pre class=bad>&lt;label&gt;Carpet: &lt;input type="carpet" name="c" texture="deep pile"&gt;&lt;/label&gt;</pre>

   <p>Here would be an alternative and correct way to mark this up:</p>

   <pre>&lt;label&gt;Carpet: &lt;input type="text" class="carpet" name="c" data-texture="deep pile"&gt;&lt;/label&gt;</pre>

  </div>

  <p>Through scripting and using other mechanisms, the values of attributes, text, and indeed the
  entire structure of the document may change dynamically while a user agent is processing it. The
  semantics of a document at an instant in time are those represented by the state of the document
  at that instant in time, and the semantics of a document can therefore change over time. User
  agents <span class=impl>must</span> update their presentation of the document as this
  occurs.</p>

  <p class=example>HTML has a <code><a href=#the-progress-element>progress</a></code> element that describes a progress bar. If its
  "value" attribute is dynamically updated by a script, the UA would update the rendering to show
  the progress changing.</p>



<!--TOPIC:DOM APIs-->
  <h4 id=elements-in-the-dom><span class=secno>3.2.2 </span>Elements in the DOM</h4>

  <p>The nodes representing <a href=#html-elements>HTML elements</a> in the DOM <span class=impl>must</span>
  implement, and expose to scripts, the interfaces listed for them in the relevant sections of this
  specification. This includes <a href=#html-elements>HTML elements</a> in <a href=#xml-documents>XML documents</a>, even when
  those documents are in another context (e.g. inside an XSLT transform).</p>

  <p>Elements in the DOM <dfn id=represents title=represents>represent</dfn> things; that is, they have
  intrinsic <em>meaning</em>, also known as semantics.</p>

  <p class=example>For example, an <code><a href=#the-ol-element>ol</a></code> element represents an ordered list.</p>

  <p>The basic interface, from which all the <a href=#html-elements>HTML elements</a>' interfaces inherit, <span class=impl>and which must be used by elements that have no additional requirements,</span> is
  the <code><a href=#htmlelement>HTMLElement</a></code> interface.</p>

  <pre class=idl>interface <dfn id=htmlelement>HTMLElement</dfn> : <a href=#element>Element</a> {
  // metadata attributes
           attribute DOMString <a href=#dom-title title=dom-title>title</a>;
           attribute DOMString <a href=#dom-lang title=dom-lang>lang</a>;
           attribute boolean <a href=#dom-translate title=dom-translate>translate</a>;
           attribute DOMString <a href=#dom-dir title=dom-dir>dir</a>;
  readonly attribute <a href=#domstringmap>DOMStringMap</a> <a href=#dom-dataset title=dom-dataset>dataset</a>;

  // <a href=#microdata>microdata</a>
           attribute boolean <a href=#dom-itemscope title=dom-itemScope>itemScope</a>;
  [PutForwards=<span title=dom-DOMSettableTokenList-value>value</span>] readonly attribute <a href=#domsettabletokenlist>DOMSettableTokenList</a> <a href=#dom-itemtype title=dom-itemType>itemType</a>;
           attribute DOMString <a href=#dom-itemid title=dom-itemId>itemId</a>;
  [PutForwards=<span title=dom-DOMSettableTokenList-value>value</span>] readonly attribute <a href=#domsettabletokenlist>DOMSettableTokenList</a> <a href=#dom-itemref title=dom-itemRef>itemRef</a>;
  [PutForwards=<span title=dom-DOMSettableTokenList-value>value</span>] readonly attribute <a href=#domsettabletokenlist>DOMSettableTokenList</a> <a href=#dom-itemprop title=dom-itemProp>itemProp</a>;
  readonly attribute <a href=#htmlpropertiescollection>HTMLPropertiesCollection</a> <a href=#dom-properties title=dom-properties>properties</a>;
           attribute any <a href=#dom-itemvalue title=dom-itemValue>itemValue</a>; // acts as DOMString on setting

  // <a href=#editing>user interaction</a>
           attribute boolean <a href=#dom-hidden title=dom-hidden>hidden</a>;
  void <a href=#dom-click title=dom-click>click</a>();
           attribute long <a href=#dom-tabindex title=dom-tabindex>tabIndex</a>;
  void <a href=#dom-focus title=dom-focus>focus</a>();
  void <a href=#dom-blur title=dom-blur>blur</a>();
           attribute DOMString <a href=#dom-accesskey title=dom-accessKey>accessKey</a>;
  readonly attribute DOMString <a href=#dom-accesskeylabel title=dom-accessKeyLabel>accessKeyLabel</a>;
           attribute boolean <a href=#dom-draggable title=dom-draggable>draggable</a>;
  [PutForwards=<span title=dom-DOMSettableTokenList-value>value</span>] readonly attribute <a href=#domsettabletokenlist>DOMSettableTokenList</a> <a href=#dom-dropzone title=dom-dropzone>dropzone</a>;
           attribute DOMString <a href=#dom-contenteditable title=dom-contentEditable>contentEditable</a>;
  readonly attribute boolean <a href=#dom-iscontenteditable title=dom-isContentEditable>isContentEditable</a>;
           attribute <a href=#htmlmenuelement>HTMLMenuElement</a>? <a href=#dom-contextmenu title=dom-contextMenu>contextMenu</a>;
           attribute boolean <a href=#dom-spellcheck title=dom-spellcheck>spellcheck</a>;
  void <a href=#dom-forcespellcheck title=dom-forceSpellCheck>forceSpellCheck</a>();

  // <a href=#command-api>command API</a>
  readonly attribute DOMString? <a href=#dom-command-ro-commandtype title=dom-command-ro-commandType>commandType</a>;
  readonly attribute DOMString? <a href=#dom-command-ro-commandlabel title=dom-command-ro-commandLabel>commandLabel</a>;
  readonly attribute DOMString? <a href=#dom-command-ro-commandicon title=dom-command-ro-commandIcon>commandIcon</a>;
  readonly attribute boolean? <a href=#dom-command-ro-commandhidden title=dom-command-ro-commandHidden>commandHidden</a>;
  readonly attribute boolean? <a href=#dom-command-ro-commanddisabled title=dom-command-ro-commandDisabled>commandDisabled</a>;
  readonly attribute boolean? <a href=#dom-command-ro-commandchecked title=dom-command-ro-commandChecked>commandChecked</a>;<!-- v2COMMAND
  readonly attribute <span>HTMLCollection</span> <span title="dom-command-ro-commandTriggers">commandTriggers</span>;-->
};
<a href=#htmlelement>HTMLElement</a> implements <a href=#globaleventhandlers>GlobalEventHandlers</a>;

interface <dfn id=htmlunknownelement>HTMLUnknownElement</dfn> : <a href=#htmlelement>HTMLElement</a> { };</pre>

  <p>The <code><a href=#htmlelement>HTMLElement</a></code> interface holds methods and attributes related to a number of
  disparate features, and the members of this interface are therefore described in various different
  sections of this specification.</p>

  <div class=impl>

  <p>The <code><a href=#htmlunknownelement>HTMLUnknownElement</a></code> interface must be used for <a href=#html-elements>HTML elements</a> that
  are not defined by this specification (or <a href=#other-applicable-specifications>other applicable specifications</a>).</p>

  </div>


<!--TOPIC:HTML-->

  <h4 id=element-definitions><span class=secno>3.2.3 </span>Element definitions</h4>

  <p>Each element in this specification has a definition that includes the following
  information:</p>

  <dl><dt><dfn id=concept-element-categories title=concept-element-categories>Categories</dfn></dt>

   <dd><p>A list of <a href=#content-categories title="content categories">categories</a> to which the element belongs.
   These are used when defining the <a href=#content-models>content models</a> for each element.</dd>


   <dt><dfn id=concept-element-contexts title=concept-element-contexts>Contexts in which this element can be used</dfn></dt>

   <dd>

    <p>A <em>non-normative</em> description of where the element can be used. This information is
    redundant with the content models of elements that allow this one as a child, and is provided
    only as a convenience.</p>

    <p class=note>For simplicity, only the most specific expectations are listed. For example, an
    element that is both <a href=#flow-content>flow content</a> and <a href=#phrasing-content>phrasing content</a> can be used
    anywhere that either <a href=#flow-content>flow content</a> or <a href=#phrasing-content>phrasing content</a> is expected, but
    since anywhere that <a href=#flow-content>flow content</a> is expected, <a href=#phrasing-content>phrasing content</a> is also
    expected (since all <a href=#phrasing-content>phrasing content</a> is <a href=#flow-content>flow content</a>), only "where
    <a href=#phrasing-content>phrasing content</a> is expected" will be listed.</p>

   </dd>


   <dt><dfn id=concept-element-content-model title=concept-element-content-model>Content model</dfn></dt>

   <dd><p>A normative description of what content must be included as children and descendants of
   the element.</dd>


   <dt><dfn id=concept-element-tag-omission title=concept-element-tag-omission>Tag omission in text/html</dfn></dt>

   <dd><p>A <em>non-normative</em> description of whether, in the <code><a href=#text/html>text/html</a></code> syntax, the
   <a href=#syntax-start-tag title=syntax-start-tag>start</a> and <a href=#syntax-end-tag title=syntax-end-tag>end</a> tags can
   be omitted. This information is redundant with the normative requirements given in the <a href=#syntax-tag-omission title=syntax-tag-omission>optional tags</a> section, and is provided in the element
   definitions only as a convenience.</dd>


   <dt><dfn id=concept-element-attributes title=concept-element-attributes>Content attributes</dfn></dt>

   <dd><p>A normative list of attributes that may be specified on the element (except where
   otherwise disallowed), along with non-normative descriptions of those attributes. (The content to
   the left of the dash is normative, the content to the right of the dash is not.)</dd>


   <dt><dfn id=concept-element-dom title=concept-element-dom>DOM interface</dfn></dt>

   <dd><p>A normative definition of a DOM interface that such elements must implement.</dd>

  </dl><p>This is then followed by a description of what the element <a href=#represents>represents</a>, along with
  any additional normative conformance criteria that may apply to authors<span class=impl title=""> and implementations</span>. Examples are sometimes also included.</p>


  <h5 id=attributes><span class=secno>3.2.3.1 </span>Attributes</h5>

  <p id=attribute-text>Except where otherwise specified, attributes on <a href=#html-elements>HTML elements</a>
  may have any string value, including the empty string. Except where explicitly stated, there is no
  restriction on what text can be specified in such attributes.</p>



  <h4 id=content-models><span class=secno>3.2.4 </span><dfn>Content models</dfn></h4>

  <p>Each element defined in this specification has a content model: a description of the element's
  expected <a href=#concept-html-contents title=concept-html-contents>contents</a>. An <a href=#html-elements title="HTML elements">HTML
  element</a> must have contents that match the requirements described in the element's content
  model. The <dfn id=concept-html-contents title=concept-html-contents>contents</dfn> of an element are its children in the
  DOM, except for <code><a href=#the-template-element>template</a></code> elements, where the children are those in the <a href=#template-contents>template
  contents</a> (a separate <code><a href=#documentfragment>DocumentFragment</a></code> assigned to the element when the element
  is created).</p>

  <p>The <a href=#space-character title="space character">space characters</a> are always allowed between elements.
  User agents represent these characters between elements in the source markup as <code><a href=#text>Text</a></code>
  nodes in the DOM.<!-- not a conf criteria since the parser now requires this --> Empty
  <code><a href=#text>Text</a></code> nodes and <code><a href=#text>Text</a></code> nodes consisting of just sequences of those
  characters are considered <dfn id=inter-element-whitespace>inter-element whitespace</dfn>.</p>

  <p><a href=#inter-element-whitespace>Inter-element whitespace</a>, comment nodes, and processing instruction nodes must be
  ignored when establishing whether an element's contents match the element's content model or not,
  and must be ignored when following algorithms that define document and element semantics.</p>

  <p class=note>Thus, an element <var title="">A</var> is said to be <i>preceded or followed</i>
  by a second element <var title="">B</var> if <var title="">A</var> and <var title="">B</var> have
  the same parent node and there are no other element nodes or <code><a href=#text>Text</a></code> nodes (other than
  <a href=#inter-element-whitespace>inter-element whitespace</a>) between them. Similarly, a node is the <i>only child</i> of
  an element if that element contains no other nodes other than <a href=#inter-element-whitespace>inter-element
  whitespace</a>, comment nodes, and processing instruction nodes.</p>

  <p>Authors must not use <a href=#html-elements>HTML elements</a> anywhere except where they are explicitly
  allowed, as defined for each element, or as explicitly required by other specifications. For XML
  compound documents, these contexts could be inside elements from other namespaces, if those
  elements are defined as providing the relevant contexts.</p>

  <div class=example>
   <p>For example, the Atom specification defines a <code title="">content</code> element. When its
   <code title="">type</code> attribute has the value <code title="">xhtml</code>, the Atom
   specification requires that it contain a single HTML <code><a href=#the-div-element>div</a></code> element. Thus, a
   <code><a href=#the-div-element>div</a></code> element is allowed in that context, even though this is not explicitly
   normatively stated by this specification. <a href=#refsATOM>[ATOM]</a></p>
  </div>

  <p>In addition, <a href=#html-elements>HTML elements</a> may be orphan nodes (i.e. without a parent node).</p>

  <div class=example>

   <p>For example, creating a <code><a href=#the-td-element>td</a></code> element and storing it in a global variable in a
   script is conforming, even though <code><a href=#the-td-element>td</a></code> elements are otherwise only supposed to be used
   inside <code><a href=#the-tr-element>tr</a></code> elements.</p>

   <pre>var data = {
  name: "Banana",
  cell: document.createElement('td'),
};</pre>

  </div>


  <h5 id=kinds-of-content><span class=secno>3.2.4.1 </span>Kinds of content</h5>

  <p>Each element in HTML falls into zero or more <dfn id=content-categories title="content categories">categories</dfn>
  that group elements with similar characteristics together. The following broad categories are used
  in this specification:</p>

  <ul class=brief><li><a href=#metadata-content>Metadata content</a></li>
   <li><a href=#flow-content>Flow content</a></li>
   <li><a href=#sectioning-content>Sectioning content</a></li>
   <li><a href=#heading-content>Heading content</a></li>
   <li><a href=#phrasing-content>Phrasing content</a></li>
   <li><a href=#embedded-content-category>Embedded content</a></li>
   <li><a href=#interactive-content>Interactive content</a></li>
  </ul><p class=note>Some elements also fall into other categories, which are defined in other parts of
  this specification.</p>

  <p>These categories are related as follows:</p>

  <!-- The following image is decorative; the 'as follows' bit above refers to the paragraph after it, which entirely duplicates the content of
       this image. So setting an alt="" on this would be bogus (indeed, it would be non-conforming and bad for accessibility.) -->
  <p><object width=1000 height=288 data=images/content-venn.svg><img src=http://images.whatwg.org/content-venn.png width=512 alt="" height=288></object></p>

  <p>Sectioning content, heading content, phrasing content, embedded content, and interactive
  content are all types of flow content. Metadata is sometimes flow content. Metadata and
  interactive content are sometimes phrasing content. Embedded content is also a type of phrasing
  content, and sometimes is interactive content.</p>

  <p>Other categories are also used for specific purposes, e.g. form controls are specified using a
  number of categories to define common requirements. Some elements have unique requirements and do
  not fit into any particular category.</p>


  <h6 id=metadata-content-0><span class=secno>3.2.4.1.1 </span>Metadata content</h6>

  <p><dfn id=metadata-content>Metadata content</dfn> is content that sets up the presentation or behavior of the rest of
  the content, or that sets up the relationship of the document with other documents, or that
  conveys other "out of band" information.</p>

  <!-- when updating this also update the category index -->
  <ul class="brief category-list"><li><code><a href=#the-base-element>base</a></code></li>
   <li><code><a href=#the-link-element>link</a></code></li>
   <li><code><a href=#the-meta-element>meta</a></code></li>
   <li><code><a href=#the-noscript-element>noscript</a></code></li>
   <li><code><a href=#the-script-element>script</a></code></li>
   <li><code><a href=#the-style-element>style</a></code></li>
   <li><code><a href=#the-template-element>template</a></code></li>
   <li><code><a href=#the-title-element>title</a></code></li>
  </ul><p>Elements from other namespaces whose semantics are primarily metadata-related (e.g. RDF) are
  also <a href=#metadata-content>metadata content</a>.</p>

  <div class=example>

   <p>Thus, in the XML serialization, one can use RDF, like this:</p>

   <pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:r="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
 &lt;head&gt;
  &lt;title&gt;Hedral's Home Page&lt;/title&gt;
  &lt;r:RDF&gt;
   &lt;Person xmlns="http://www.w3.org/2000/10/swap/pim/contact#"
           r:about="http://hedral.example.com/#"&gt;
    &lt;fullName&gt;Cat Hedral&lt;/fullName&gt;
    &lt;mailbox r:resource="mailto:hedral@damowmow.com"/&gt;
    &lt;personalTitle&gt;Sir&lt;/personalTitle&gt;
   &lt;/Person&gt;
  &lt;/r:RDF&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;My home page&lt;/h1&gt;
  &lt;p&gt;I like playing with string, I guess. Sister says squirrels are fun
  too so sometimes I follow her to play with them.&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

   <p>This isn't possible in the HTML serialization, however.</p>

  </div>


  <h6 id=flow-content-0><span class=secno>3.2.4.1.2 </span>Flow content</h6>

  <p>Most elements that are used in the body of documents and applications are categorised as
  <dfn id=flow-content>flow content</dfn>.</p>

  <!-- when updating this also update the category index -->
  <ul class="brief category-list"><li><code><a href=#the-a-element>a</a></code></li>
   <li><code><a href=#the-abbr-element>abbr</a></code></li>
   <li><code><a href=#the-address-element>address</a></code></li>
   <li><code><a href=#the-area-element>area</a></code> (if it is a descendant of a <code><a href=#the-map-element>map</a></code> element)</li>
   <li><code><a href=#the-article-element>article</a></code></li>
   <li><code><a href=#the-aside-element>aside</a></code></li>
   <li><code><a href=#the-audio-element>audio</a></code></li>
   <li><code><a href=#the-b-element>b</a></code></li>
   <li><code><a href=#the-bdi-element>bdi</a></code></li>
   <li><code><a href=#the-bdo-element>bdo</a></code></li>
   <li><code><a href=#the-blockquote-element>blockquote</a></code></li>
   <li><code><a href=#the-br-element>br</a></code></li>
   <li><code><a href=#the-button-element>button</a></code></li>
   <li><code><a href=#the-canvas-element>canvas</a></code></li>
   <li><code><a href=#the-cite-element>cite</a></code></li>
   <li><code><a href=#the-code-element>code</a></code></li>
   <li><code><a href=#the-data-element>data</a></code></li>
   <li><code><a href=#the-datalist-element>datalist</a></code></li>
   <li><code><a href=#the-del-element>del</a></code></li>
   <li><code><a href=#the-details-element>details</a></code></li>
   <li><code><a href=#the-dfn-element>dfn</a></code></li>
   <li><code><a href=#the-dialog-element>dialog</a></code></li>
   <li><code><a href=#the-div-element>div</a></code></li>
   <li><code><a href=#the-dl-element>dl</a></code></li>
   <li><code><a href=#the-em-element>em</a></code></li>
   <li><code><a href=#the-embed-element>embed</a></code></li>
   <li><code><a href=#the-fieldset-element>fieldset</a></code></li>
   <li><code><a href=#the-figure-element>figure</a></code></li>
   <li><code><a href=#the-footer-element>footer</a></code></li>
   <li><code><a href=#the-form-element>form</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h1</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h2</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h3</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h4</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h5</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h6</a></code></li>
   <li><code><a href=#the-header-element>header</a></code></li>
   <li><code><a href=#the-hgroup-element>hgroup</a></code></li>
   <li><code><a href=#the-hr-element>hr</a></code></li>
   <li><code><a href=#the-i-element>i</a></code></li>
   <li><code><a href=#the-iframe-element>iframe</a></code></li>
   <li><code><a href=#the-img-element>img</a></code></li>
   <li><code><a href=#the-input-element>input</a></code></li>
   <li><code><a href=#the-ins-element>ins</a></code></li>
   <li><code><a href=#the-kbd-element>kbd</a></code></li>
   <li><code><a href=#the-keygen-element>keygen</a></code></li>
   <li><code><a href=#the-label-element>label</a></code></li>
   <li><code><a href=#the-link-element>link</a></code> (if the <code title=attr-itemprop><a href=#names:-the-itemprop-attribute>itemprop</a></code> attribute is present)</li>
   <li><code><a href=#the-main-element>main</a></code></li>
   <li><code><a href=#the-map-element>map</a></code></li>
   <li><code><a href=#the-mark-element>mark</a></code></li>
   <li><code><a href=#math>math</a></code></li>
   <li><code><a href=#the-menu-element>menu</a></code></li>
   <li><code><a href=#the-meta-element>meta</a></code> (if the <code title=attr-itemprop><a href=#names:-the-itemprop-attribute>itemprop</a></code> attribute is present)</li>
   <li><code><a href=#the-meter-element>meter</a></code></li>
   <li><code><a href=#the-nav-element>nav</a></code></li>
   <li><code><a href=#the-noscript-element>noscript</a></code></li>
   <li><code><a href=#the-object-element>object</a></code></li>
   <li><code><a href=#the-ol-element>ol</a></code></li>
   <li><code><a href=#the-output-element>output</a></code></li>
   <li><code><a href=#the-p-element>p</a></code></li>
   <li><code><a href=#the-pre-element>pre</a></code></li>
   <li><code><a href=#the-progress-element>progress</a></code></li>
   <li><code><a href=#the-q-element>q</a></code></li>
   <li><code><a href=#the-ruby-element>ruby</a></code></li>
   <li><code><a href=#the-s-element>s</a></code></li>
   <li><code><a href=#the-samp-element>samp</a></code></li>
   <li><code><a href=#the-script-element>script</a></code></li>
   <li><code><a href=#the-section-element>section</a></code></li>
   <li><code><a href=#the-select-element>select</a></code></li>
   <li><code><a href=#the-small-element>small</a></code></li>
   <li><code><a href=#the-span-element>span</a></code></li>
   <li><code><a href=#the-strong-element>strong</a></code></li>
   <li><code><a href=#the-style-element>style</a></code> (if the <code title=attr-style-scoped><a href=#attr-style-scoped>scoped</a></code> attribute is present)</li>
   <li><code><a href=#the-sub-and-sup-elements>sub</a></code></li>
   <li><code><a href=#the-sub-and-sup-elements>sup</a></code></li>
   <li><code><a href=#svg>svg</a></code></li>
   <li><code><a href=#the-table-element>table</a></code></li>
   <li><code><a href=#the-template-element>template</a></code></li>
   <li><code><a href=#the-textarea-element>textarea</a></code></li>
   <li><code><a href=#the-time-element>time</a></code></li>
   <li><code><a href=#the-u-element>u</a></code></li>
   <li><code><a href=#the-ul-element>ul</a></code></li>
   <li><code><a href=#the-var-element>var</a></code></li>
   <li><code><a href=#the-video-element>video</a></code></li>
   <li><code><a href=#the-wbr-element>wbr</a></code></li>
   <li><a href=#text-content title="text content">Text</a></li>
  </ul><h6 id=sectioning-content-0><span class=secno>3.2.4.1.3 </span>Sectioning content</h6>

  <p><dfn id=sectioning-content>Sectioning content</dfn> is content that defines the scope of <a href=#heading-content title="heading
  content">headings</a> and <a href=#the-footer-element title=footer>footers</a>.</p>

  <!-- when updating this also update the category index -->
  <ul class="brief category-list"><li><code><a href=#the-article-element>article</a></code></li>
   <li><code><a href=#the-aside-element>aside</a></code></li>
   <li><code><a href=#the-nav-element>nav</a></code></li>
   <li><code><a href=#the-section-element>section</a></code></li>
  </ul><p>Each <a href=#sectioning-content>sectioning content</a> element potentially has a heading and an
  <a href=#outline>outline</a>. See the section on <a href=#headings-and-sections>headings and sections</a> for further
  details.</p>

  <p class=note>There are also certain elements that are <a href=#sectioning-root title="sectioning root">sectioning
  roots</a>. These are distinct from <a href=#sectioning-content>sectioning content</a>, but they can also have an
  <a href=#outline>outline</a>.</p>


  <h6 id=heading-content-0><span class=secno>3.2.4.1.4 </span>Heading content</h6>

  <p><dfn id=heading-content>Heading content</dfn> defines the header of a section (whether explicitly marked up using
  <a href=#sectioning-content>sectioning content</a> elements, or implied by the heading content itself).</p>

  <!-- when updating this also update the category index -->
  <ul class="brief category-list"><li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h1</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h2</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h3</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h4</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h5</a></code></li>
   <li><code><a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements>h6</a></code></li>
   <li><code><a href=#the-hgroup-element>hgroup</a></code></li>
  </ul><h6 id=phrasing-content-0><span class=secno>3.2.4.1.5 </span>Phrasing content</h6>

  <p><dfn id=phrasing-content>Phrasing content</dfn> is the text of the document, as well as elements that mark up that
  text at the intra-paragraph level. Runs of <a href=#phrasing-content>phrasing content</a> form <a href=#paragraph title=paragraph>paragraphs</a>.</p>

  <!-- when updating this also update the category index -->
  <ul class="brief category-list"><li><code><a href=#the-a-element>a</a></code></li>
   <li><code><a href=#the-abbr-element>abbr</a></code></li>
   <li><code><a href=#the-area-element>area</a></code> (if it is a descendant of a <code><a href=#the-map-element>map</a></code> element)</li>
   <li><code><a href=#the-audio-element>audio</a></code></li>
   <li><code><a href=#the-b-element>b</a></code></li>
   <li><code><a href=#the-bdi-element>bdi</a></code></li>
   <li><code><a href=#the-bdo-element>bdo</a></code></li>
   <li><code><a href=#the-br-element>br</a></code></li>
   <li><code><a href=#the-button-element>button</a></code></li>
   <li><code><a href=#the-canvas-element>canvas</a></code></li>
   <li><code><a href=#the-cite-element>cite</a></code></li>
   <li><code><a href=#the-code-element>code</a></code></li>
   <li><code><a href=#the-data-element>data</a></code></li>
   <li><code><a href=#the-datalist-element>datalist</a></code></li>
   <li><code><a href=#the-del-element>del</a></code></li>
   <li><code><a href=#the-dfn-element>dfn</a></code></li>
   <li><code><a href=#the-em-element>em</a></code></li>
   <li><code><a href=#the-embed-element>embed</a></code></li>
   <li><code><a href=#the-i-element>i</a></code></li>
   <li><code><a href=#the-iframe-element>iframe</a></code></li>
   <li><code><a href=#the-img-element>img</a></code></li>
   <li><code><a href=#the-input-element>input</a></code></li>
   <li><code><a href=#the-ins-element>ins</a></code></li>
   <li><code><a href=#the-kbd-element>kbd</a></code></li>
   <li><code><a href=#the-keygen-element>keygen</a></code></li>
   <li><code><a href=#the-label-element>label</a></code></li>
   <li><code><a href=#the-link-element>link</a></code> (if the <code title=attr-itemprop><a href=#names:-the-itemprop-attribute>itemprop</a></code> attribute is present)</li>
   <li><code><a href=#the-map-element>map</a></code></li>
   <li><code><a href=#the-mark-element>mark</a></code></li>
   <li><code><a href=#math>math</a></code></li>
   <li><code><a href=#the-meta-element>meta</a></code> (if the <code title=attr-itemprop><a href=#names:-the-itemprop-attribute>itemprop</a></code> attribute is present)</li>
   <li><code><a href=#the-meter-element>meter</a></code></li>
   <li><code><a href=#the-noscript-element>noscript</a></code></li>
   <li><code><a href=#the-object-element>object</a></code></li>
   <li><code><a href=#the-output-element>output</a></code></li>
   <li><code><a href=#the-progress-element>progress</a></code></li>
   <li><code><a href=#the-q-element>q</a></code></li>
   <li><code><a href=#the-ruby-element>ruby</a></code></li>
   <li><code><a href=#the-s-element>s</a></code></li>
   <li><code><a href=#the-samp-element>samp</a></code></li>
   <li><code><a href=#the-script-element>script</a></code></li>
   <li><code><a href=#the-select-element>select</a></code></li>
   <li><code><a href=#the-small-element>small</a></code></li>
   <li><code><a href=#the-span-element>span</a></code></li>
   <li><code><a href=#the-strong-element>strong</a></code></li>
   <li><code><a href=#the-sub-and-sup-elements>sub</a></code></li>
   <li><code><a href=#the-sub-and-sup-elements>sup</a></code></li>
   <li><code><a href=#svg>svg</a></code></li>
   <li><code><a href=#the-template-element>template</a></code></li>
   <li><code><a href=#the-textarea-element>textarea</a></code></li>
   <li><code><a href=#the-time-element>time</a></code></li>
   <li><code><a href=#the-u-element>u</a></code></li>
   <li><code><a href=#the-var-element>var</a></code></li>
   <li><code><a href=#the-video-element>video</a></code></li>
   <li><code><a href=#the-wbr-element>wbr</a></code></li>
   <li><a href=#text-content title="text content">Text</a></li>
  </ul><p class=note>Most elements that are categorised as phrasing content can only contain elements
  that are themselves categorised as phrasing content, not any flow content.</p>

  <p><dfn id=text-content title="text content">Text</dfn>, in the context of content models, means either nothing,
  or <code><a href=#text>Text</a></code> nodes. <a href=#text-content title="text content">Text</a> is sometimes used as a content
  model on its own, but is also <a href=#phrasing-content>phrasing content</a>, and can be <a href=#inter-element-whitespace>inter-element
  whitespace</a> (if the <code><a href=#text>Text</a></code> nodes are empty or contain just <a href=#space-character title="space
  character">space characters</a>).</p>

  <p><code><a href=#text>Text</a></code> nodes and attribute values must consist of <a href=#unicode-character title="Unicode
  character">Unicode characters</a>, must not contain U+0000 characters, must not contain
  permanently undefined Unicode characters (noncharacters), and must not contain <a href=#control-characters>control characters</a>
  other than <a href=#space-character title="space character">space characters</a>.

  <!--<code>Text</code> nodes and attribute values may begin with an <i>isolated combining
  character</i>.--> <!-- commented out since nothing disallows it currently, so it's implicit;
  however, if we ever make charmod a normative reference, this will be needed to override it -->
  <!-- see also https://www.w3.org/Bugs/Public/show_bu
